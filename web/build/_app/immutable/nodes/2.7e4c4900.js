import{s as Ce,n as me,r as Ue,f as Le,o as Fe,b as Se,h as _t}from"../chunks/scheduler.89bf212d.js";import{S as Ee,i as De,g as k,y as ge,m as se,s as J,h as y,j as $,z as we,f as _,n as re,c as G,A as ce,k as i,a as q,x as f,B as le,e as Te,o as fe,l as We,C as ye,d as ie,p as Be,b as Ve,t as ae,D as $e,r as _e,u as pe,v as ve,w as be,E as pt}from"../chunks/index.6b8f49fb.js";function de(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Tt(t){let e,l,n,r,s,o,a,d,p,D,E,j,T,V,F,W,M,O,L,Y,N,m,H,C,I='<a href="https://github.com/talesofai/comfyui-browser" target="_blank"><img src="https://img.shields.io/github/stars/talesofai/comfyui-browser?style=social" alt="stars - comfyui-browser"/></a>',R,S;return{c(){e=k("div"),l=k("ul"),n=k("li"),r=k("button"),s=ge("svg"),o=ge("path"),a=se(`
        Outputs`),p=J(),D=k("li"),E=k("button"),j=ge("svg"),T=ge("path"),V=se(`
        Saves`),W=J(),M=k("li"),O=k("button"),L=ge("svg"),Y=ge("path"),N=se(`
        Sources`),H=J(),C=k("div"),C.innerHTML=I,this.h()},l(g){e=y(g,"DIV",{class:!0});var A=$(e);l=y(A,"UL",{class:!0});var U=$(l);n=y(U,"LI",{});var h=$(n);r=y(h,"BUTTON",{class:!0});var v=$(r);s=we(v,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=$(s);o=we(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(o).forEach(_),c.forEach(_),a=re(v,`
        Outputs`),v.forEach(_),h.forEach(_),p=G(U),D=y(U,"LI",{});var b=$(D);E=y(b,"BUTTON",{class:!0});var P=$(E);j=we(P,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=$(j);T=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(T).forEach(_),u.forEach(_),V=re(P,`
        Saves`),P.forEach(_),b.forEach(_),W=G(U),M=y(U,"LI",{});var w=$(M);O=y(w,"BUTTON",{class:!0});var Z=$(O);L=we(Z,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var X=$(L);Y=we(X,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(Y).forEach(_),X.forEach(_),N=re(Z,`
        Sources`),Z.forEach(_),w.forEach(_),U.forEach(_),H=G(A),C=y(A,"DIV",{class:!0,"data-svelte-h":!0}),ce(C)!=="svelte-1ihc90r"&&(C.innerHTML=I),A.forEach(_),this.h()},h(){i(o,"stroke-linecap","round"),i(o,"stroke-linejoin","round"),i(o,"d","M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"),i(s,"xmlns","http://www.w3.org/2000/svg"),i(s,"fill","none"),i(s,"viewBox","0 0 24 24"),i(s,"stroke-width","1.5"),i(s,"stroke","currentColor"),i(s,"class","w-5 h-5"),i(r,"class",d=t[0]("outputs")),i(T,"stroke-linecap","round"),i(T,"stroke-linejoin","round"),i(T,"d","M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"),i(j,"xmlns","http://www.w3.org/2000/svg"),i(j,"fill","none"),i(j,"viewBox","0 0 24 24"),i(j,"stroke-width","1.5"),i(j,"stroke","currentColor"),i(j,"class","w-5 h-5"),i(E,"class",F=t[0]("collections")),i(Y,"stroke-linecap","round"),i(Y,"stroke-linejoin","round"),i(Y,"d","M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"),i(L,"xmlns","http://www.w3.org/2000/svg"),i(L,"fill","none"),i(L,"viewBox","0 0 24 24"),i(L,"stroke-width","1.5"),i(L,"stroke","currentColor"),i(L,"class","w-5 h-5"),i(O,"class",m=t[0]("sources")),i(l,"class","menu menu-horizontal bg-base-200 rounded-box flex-1"),i(C,"class","hidden sm:flex flex-0 items-center justify-center p-2"),i(e,"class","flex")},m(g,A){q(g,e,A),f(e,l),f(l,n),f(n,r),f(r,s),f(s,o),f(r,a),f(l,p),f(l,D),f(D,E),f(E,j),f(j,T),f(E,V),f(l,W),f(l,M),f(M,O),f(O,L),f(L,Y),f(O,N),f(e,H),f(e,C),R||(S=[le(r,"click",t[3]),le(E,"click",t[4]),le(O,"click",t[5])],R=!0)},p(g,[A]){A&1&&d!==(d=g[0]("outputs"))&&i(r,"class",d),A&1&&F!==(F=g[0]("collections"))&&i(E,"class",F),A&1&&m!==(m=g[0]("sources"))&&i(O,"class",m)},i:me,o:me,d(g){g&&_(e),R=!1,Ue(S)}}}function Ct(t,e,l){let n,{activeTab:r="outputs"}=e;async function s(p){l(2,r=p)}const o=()=>s("outputs"),a=()=>s("collections"),d=()=>s("sources");return t.$$set=p=>{"activeTab"in p&&l(2,r=p.activeTab)},t.$$.update=()=>{t.$$.dirty&4&&l(0,n=function(p){return p===r?"active":""})},[n,s,r,o,a,d]}class Et extends Ee{constructor(e){super(),De(this,e,Ct,Tt,Ce,{activeTab:2})}}function Je(t){let e,l,n,r,s;return{c(){e=k("div"),l=k("div"),n=k("span"),r=se(t[2]),this.h()},l(o){e=y(o,"DIV",{class:!0});var a=$(e);l=y(a,"DIV",{class:!0});var d=$(l);n=y(d,"SPAN",{});var p=$(n);r=re(p,t[2]),p.forEach(_),d.forEach(_),a.forEach(_),this.h()},h(){i(l,"class",s="alert "+(t[1]?"alert-success":"alert-error")),i(e,"class","toast toast-center")},m(o,a){q(o,e,a),f(e,l),f(l,n),f(n,r)},p(o,a){a&4&&fe(r,o[2]),a&2&&s!==(s="alert "+(o[1]?"alert-success":"alert-error"))&&i(l,"class",s)},d(o){o&&_(e)}}}function Dt(t){let e,l=t[0]&&Je(t);return{c(){l&&l.c(),e=Te()},l(n){l&&l.l(n),e=Te()},m(n,r){l&&l.m(n,r),q(n,e,r)},p(n,[r]){n[0]?l?l.p(n,r):(l=Je(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:me,o:me,d(n){n&&_(e),l&&l.d(n)}}}function Mt(t,e,l){let{showToast:n=!1}=e,{toastSuccess:r=!0}=e,{toastText:s=""}=e;function o(a,d,p,D=2e3){l(1,r=a),l(2,s=a?d:p),l(0,n=!0),setTimeout(()=>l(0,n=!1),D)}return t.$$set=a=>{"showToast"in a&&l(0,n=a.showToast),"toastSuccess"in a&&l(1,r=a.toastSuccess),"toastText"in a&&l(2,s=a.toastText)},[n,r,s,o]}class ze extends Ee{constructor(e){super(),De(this,e,Mt,Dt,Ce,{showToast:0,toastSuccess:1,toastText:2,show:3})}get show(){return this.$$.ctx[3]}}var St=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ut(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vt={exports:{}};(function(t,e){(function(l,n){t.exports=n()})(St,function(){var l=1e3,n=6e4,r=36e5,s="millisecond",o="second",a="minute",d="hour",p="day",D="week",E="month",j="quarter",T="year",V="date",F="Invalid Date",W=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,O={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(U){var h=["th","st","nd","rd"],v=U%100;return"["+U+(h[(v-20)%10]||h[v]||h[0])+"]"}},L=function(U,h,v){var c=String(U);return!c||c.length>=h?U:""+Array(h+1-c.length).join(v)+U},Y={s:L,z:function(U){var h=-U.utcOffset(),v=Math.abs(h),c=Math.floor(v/60),b=v%60;return(h<=0?"+":"-")+L(c,2,"0")+":"+L(b,2,"0")},m:function U(h,v){if(h.date()<v.date())return-U(v,h);var c=12*(v.year()-h.year())+(v.month()-h.month()),b=h.clone().add(c,E),P=v-b<0,u=h.clone().add(c+(P?-1:1),E);return+(-(c+(v-b)/(P?b-u:u-b))||0)},a:function(U){return U<0?Math.ceil(U)||0:Math.floor(U)},p:function(U){return{M:E,y:T,w:D,d:p,D:V,h:d,m:a,s:o,ms:s,Q:j}[U]||String(U||"").toLowerCase().replace(/s$/,"")},u:function(U){return U===void 0}},N="en",m={};m[N]=O;var H="$isDayjsObject",C=function(U){return U instanceof g||!(!U||!U[H])},I=function U(h,v,c){var b;if(!h)return N;if(typeof h=="string"){var P=h.toLowerCase();m[P]&&(b=P),v&&(m[P]=v,b=P);var u=h.split("-");if(!b&&u.length>1)return U(u[0])}else{var w=h.name;m[w]=h,b=w}return!c&&b&&(N=b),b||!c&&N},R=function(U,h){if(C(U))return U.clone();var v=typeof h=="object"?h:{};return v.date=U,v.args=arguments,new g(v)},S=Y;S.l=I,S.i=C,S.w=function(U,h){return R(U,{locale:h.$L,utc:h.$u,x:h.$x,$offset:h.$offset})};var g=function(){function U(v){this.$L=I(v.locale,null,!0),this.parse(v),this.$x=this.$x||v.x||{},this[H]=!0}var h=U.prototype;return h.parse=function(v){this.$d=function(c){var b=c.date,P=c.utc;if(b===null)return new Date(NaN);if(S.u(b))return new Date;if(b instanceof Date)return new Date(b);if(typeof b=="string"&&!/Z$/i.test(b)){var u=b.match(W);if(u){var w=u[2]-1||0,Z=(u[7]||"0").substring(0,3);return P?new Date(Date.UTC(u[1],w,u[3]||1,u[4]||0,u[5]||0,u[6]||0,Z)):new Date(u[1],w,u[3]||1,u[4]||0,u[5]||0,u[6]||0,Z)}}return new Date(b)}(v),this.init()},h.init=function(){var v=this.$d;this.$y=v.getFullYear(),this.$M=v.getMonth(),this.$D=v.getDate(),this.$W=v.getDay(),this.$H=v.getHours(),this.$m=v.getMinutes(),this.$s=v.getSeconds(),this.$ms=v.getMilliseconds()},h.$utils=function(){return S},h.isValid=function(){return this.$d.toString()!==F},h.isSame=function(v,c){var b=R(v);return this.startOf(c)<=b&&b<=this.endOf(c)},h.isAfter=function(v,c){return R(v)<this.startOf(c)},h.isBefore=function(v,c){return this.endOf(c)<R(v)},h.$g=function(v,c,b){return S.u(v)?this[c]:this.set(b,v)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(v,c){var b=this,P=!!S.u(c)||c,u=S.p(v),w=function(ue,Q){var B=S.w(b.$u?Date.UTC(b.$y,Q,ue):new Date(b.$y,Q,ue),b);return P?B:B.endOf(p)},Z=function(ue,Q){return S.w(b.toDate()[ue].apply(b.toDate("s"),(P?[0,0,0,0]:[23,59,59,999]).slice(Q)),b)},X=this.$W,z=this.$M,x=this.$D,K="set"+(this.$u?"UTC":"");switch(u){case T:return P?w(1,0):w(31,11);case E:return P?w(1,z):w(0,z+1);case D:var he=this.$locale().weekStart||0,ne=(X<he?X+7:X)-he;return w(P?x-ne:x+(6-ne),z);case p:case V:return Z(K+"Hours",0);case d:return Z(K+"Minutes",1);case a:return Z(K+"Seconds",2);case o:return Z(K+"Milliseconds",3);default:return this.clone()}},h.endOf=function(v){return this.startOf(v,!1)},h.$set=function(v,c){var b,P=S.p(v),u="set"+(this.$u?"UTC":""),w=(b={},b[p]=u+"Date",b[V]=u+"Date",b[E]=u+"Month",b[T]=u+"FullYear",b[d]=u+"Hours",b[a]=u+"Minutes",b[o]=u+"Seconds",b[s]=u+"Milliseconds",b)[P],Z=P===p?this.$D+(c-this.$W):c;if(P===E||P===T){var X=this.clone().set(V,1);X.$d[w](Z),X.init(),this.$d=X.set(V,Math.min(this.$D,X.daysInMonth())).$d}else w&&this.$d[w](Z);return this.init(),this},h.set=function(v,c){return this.clone().$set(v,c)},h.get=function(v){return this[S.p(v)]()},h.add=function(v,c){var b,P=this;v=Number(v);var u=S.p(c),w=function(z){var x=R(P);return S.w(x.date(x.date()+Math.round(z*v)),P)};if(u===E)return this.set(E,this.$M+v);if(u===T)return this.set(T,this.$y+v);if(u===p)return w(1);if(u===D)return w(7);var Z=(b={},b[a]=n,b[d]=r,b[o]=l,b)[u]||1,X=this.$d.getTime()+v*Z;return S.w(X,this)},h.subtract=function(v,c){return this.add(-1*v,c)},h.format=function(v){var c=this,b=this.$locale();if(!this.isValid())return b.invalidDate||F;var P=v||"YYYY-MM-DDTHH:mm:ssZ",u=S.z(this),w=this.$H,Z=this.$m,X=this.$M,z=b.weekdays,x=b.months,K=b.meridiem,he=function(Q,B,te,oe){return Q&&(Q[B]||Q(c,P))||te[B].slice(0,oe)},ne=function(Q){return S.s(w%12||12,Q,"0")},ue=K||function(Q,B,te){var oe=Q<12?"AM":"PM";return te?oe.toLowerCase():oe};return P.replace(M,function(Q,B){return B||function(te){switch(te){case"YY":return String(c.$y).slice(-2);case"YYYY":return S.s(c.$y,4,"0");case"M":return X+1;case"MM":return S.s(X+1,2,"0");case"MMM":return he(b.monthsShort,X,x,3);case"MMMM":return he(x,X);case"D":return c.$D;case"DD":return S.s(c.$D,2,"0");case"d":return String(c.$W);case"dd":return he(b.weekdaysMin,c.$W,z,2);case"ddd":return he(b.weekdaysShort,c.$W,z,3);case"dddd":return z[c.$W];case"H":return String(w);case"HH":return S.s(w,2,"0");case"h":return ne(1);case"hh":return ne(2);case"a":return ue(w,Z,!0);case"A":return ue(w,Z,!1);case"m":return String(Z);case"mm":return S.s(Z,2,"0");case"s":return String(c.$s);case"ss":return S.s(c.$s,2,"0");case"SSS":return S.s(c.$ms,3,"0");case"Z":return u}return null}(Q)||u.replace(":","")})},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(v,c,b){var P,u=this,w=S.p(c),Z=R(v),X=(Z.utcOffset()-this.utcOffset())*n,z=this-Z,x=function(){return S.m(u,Z)};switch(w){case T:P=x()/12;break;case E:P=x();break;case j:P=x()/3;break;case D:P=(z-X)/6048e5;break;case p:P=(z-X)/864e5;break;case d:P=z/r;break;case a:P=z/n;break;case o:P=z/l;break;default:P=z}return b?P:S.a(P)},h.daysInMonth=function(){return this.endOf(E).$D},h.$locale=function(){return m[this.$L]},h.locale=function(v,c){if(!v)return this.$L;var b=this.clone(),P=I(v,c,!0);return P&&(b.$L=P),b},h.clone=function(){return S.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},U}(),A=g.prototype;return R.prototype=A,[["$ms",s],["$s",o],["$m",a],["$H",d],["$W",p],["$M",E],["$y",T],["$D",V]].forEach(function(U){A[U[1]]=function(h){return this.$g(h,U[0],U[1])}}),R.extend=function(U,h){return U.$i||(U(h,g,R),U.$i=!0),R},R.locale=I,R.isDayjs=C,R.unix=function(U){return R(1e3*U)},R.en=m[N],R.Ls=m,R.p={},R})})(vt);var It=vt.exports;const bt=Ut(It);function Lt(t,e,l){const n=t.name.split(".").pop().toLowerCase();t.fileType="json",["png","webp","jpeg","jpg","gif"].includes(n)&&(t.fileType="image"),["mp4","webm","mov","avi","mkv"].includes(n)&&(t.fileType="video"),t.url=`${l}/browser/files/view?folder_type=${e}&filename=${t.name}&folder_path=${t.folder_path}`;const r=bt.unix(t.created_at);return t.formattedDatetime=r.format("YYYY-MM-DD HH-mm-ss"),t.bytes/1024/1024>1?t.formattedSize=(t.bytes/1024/1024).toFixed(2)+" MB":t.formattedSize=Math.round(t.bytes/1024)+" KB",t}function $t(t){t.fileType="dir";const e=t.folder_path?`${t.folder_path}/${t.name}`:t.name;t.path=e;const l=bt.unix(t.created_at);return t.formattedDatetime=l.format("YYYY-MM-DD HH-mm-ss"),t.formattedSize="0 KB",t}async function Ae(t,e,l){let n=e+"/browser/files?folder_type="+t;l&&(n=n+`&folder_path=${l}&`);let o=(await(await fetch(n)).json()).files;return o.forEach(a=>{a.type==="dir"?a=$t(a):a=Lt(a,t,e)}),o}function gt(t,e){if(t>=e)return t;const l=document.documentElement.scrollHeight;return window.innerHeight+window.scrollY>=l?t+10:t}async function wt(t,e,l){const n=await fetch(t.url),r=await n.blob(),s=new File([r],t.name,{type:n.headers.get("Content-Type")||""}),o=e.loadGraphData.bind(e);e.loadGraphData=async function(a){var p;const d=(p=window.top)==null?void 0:p.document.getElementById("comfy-browser-dialog");d&&(d.style.display="none"),await o(a)},await e.handleFile(s),l.show(!1,"Loaded","No workflow found here")}function Ot(t){let e,l,n,r,s=t[0].fileType==="json"&&Ge(),o=t[0].fileType==="image"&&Ze(t),a=t[0].fileType==="video"&&qe(t);return{c(){e=k("a"),s&&s.c(),l=J(),o&&o.c(),n=J(),a&&a.c(),this.h()},l(d){e=y(d,"A",{href:!0,target:!0,style:!0});var p=$(e);s&&s.l(p),l=G(p),o&&o.l(p),n=G(p),a&&a.l(p),p.forEach(_),this.h()},h(){i(e,"href",r=t[0].url),i(e,"target","_blank"),We(e,"height","inherit"),We(e,"width","inherit")},m(d,p){q(d,e,p),s&&s.m(e,null),f(e,l),o&&o.m(e,null),f(e,n),a&&a.m(e,null)},p(d,p){d[0].fileType==="json"?s||(s=Ge(),s.c(),s.m(e,l)):s&&(s.d(1),s=null),d[0].fileType==="image"?o?o.p(d,p):(o=Ze(d),o.c(),o.m(e,n)):o&&(o.d(1),o=null),d[0].fileType==="video"?a?a.p(d,p):(a=qe(d),a.c(),a.m(e,null)):a&&(a.d(1),a=null),p&1&&r!==(r=d[0].url)&&i(e,"href",r)},d(d){d&&_(e),s&&s.d(),o&&o.d(),a&&a.d()}}}function jt(t){let e,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"></path></svg>',n,r;return{c(){e=k("button"),e.innerHTML=l,this.h()},l(s){e=y(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-fq6lbl"&&(e.innerHTML=l),this.h()},h(){i(e,"class","w-full h-full flex items-center justify-center")},m(s,o){q(s,e,o),n||(r=le(e,"click",t[3]),n=!0)},p:me,d(s){s&&_(e),n=!1,r()}}}function Ge(t){let e,l='<span class="font-bold text-xl">JSON</span>';return{c(){e=k("div"),e.innerHTML=l,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-opd4jy"&&(e.innerHTML=l),this.h()},h(){i(e,"class","w-full h-full flex items-center justify-center")},m(n,r){q(n,e,r)},d(n){n&&_(e)}}}function Ze(t){let e,l,n;return{c(){e=k("img"),this.h()},l(r){e=y(r,"IMG",{class:!0,loading:!0,src:!0,alt:!0}),this.h()},h(){i(e,"class","h-full w-full object-contain"),i(e,"loading","lazy"),Le(e.src,l=t[0].url)||i(e,"src",l),i(e,"alt",n=t[0].name)},m(r,s){q(r,e,s)},p(r,s){s&1&&!Le(e.src,l=r[0].url)&&i(e,"src",l),s&1&&n!==(n=r[0].name)&&i(e,"alt",n)},d(r){r&&_(e)}}}function qe(t){let e,l,n;return{c(){e=k("video"),l=k("track"),this.h()},l(r){e=y(r,"VIDEO",{class:!0,src:!0});var s=$(e);l=y(s,"TRACK",{kind:!0}),s.forEach(_),this.h()},h(){i(l,"kind","captions"),i(e,"class","h-full w-full object-contain pb-0.5 border-0.5 border-black"),Le(e.src,n=t[0].url)||i(e,"src",n),e.loop=!0,e.autoplay=!0,e.muted=!0},m(r,s){q(r,e,s),f(e,l)},p(r,s){s&1&&!Le(e.src,n=r[0].url)&&i(e,"src",n)},d(r){r&&_(e)}}}function Pt(t){let e;function l(s,o){return s[0].type==="dir"?jt:Ot}let n=l(t),r=n(t);return{c(){e=k("div"),r.c(),this.h()},l(s){e=y(s,"DIV",{class:!0});var o=$(e);r.l(o),o.forEach(_),this.h()},h(){i(e,"class",t[1])},m(s,o){q(s,e,o),r.m(e,null)},p(s,[o]){n===(n=l(s))&&r?r.p(s,o):(r.d(1),r=n(s),r&&(r.c(),r.m(e,null))),o&2&&i(e,"class",s[1])},i:me,o:me,d(s){s&&_(e),r.d()}}}function Nt(t,e,l){let{file:n}=e,{styleClass:r}=e,{onClickDir:s}=e;const o=()=>s(n);return t.$$set=a=>{"file"in a&&l(0,n=a.file),"styleClass"in a&&l(1,r=a.styleClass),"onClickDir"in a&&l(2,s=a.onClickDir)},[n,r,s,o]}class kt extends Ee{constructor(e){super(),De(this,e,Nt,Pt,Ce,{file:0,styleClass:1,onClickDir:2})}}function Ke(t,e,l){const n=t.slice();return n[22]=e[l],n}function Qe(t,e,l){const n=t.slice();return n[25]=e[l],n[27]=l,n}function Xe(t){let e,l,n=t[25]+"",r,s,o;function a(){return t[16](t[27])}return{c(){e=k("li"),l=k("button"),r=se(n)},l(d){e=y(d,"LI",{});var p=$(e);l=y(p,"BUTTON",{});var D=$(l);r=re(D,n),D.forEach(_),p.forEach(_)},m(d,p){q(d,e,p),f(e,l),f(l,r),s||(o=le(l,"click",a),s=!0)},p(d,p){t=d,p&1&&n!==(n=t[25]+"")&&fe(r,n)},d(d){d&&_(e),s=!1,o()}}}function xe(t){let e,l,n,r,s,o=t[22].name+"",a,d,p,D=t[22].formattedDatetime+"",E,j,T,V=t[22].formattedSize+"",F,W,M,O,L,Y="Save",N,m,H="Delete",C,I,R,S;n=new kt({props:{file:t[22],styleClass:"w-full h-36",onClickDir:t[10]}});let g=t[3]&&t[22].type!="dir"&&et(t);function A(){return t[20](t[22])}function U(){return t[21](t[22])}return{c(){e=k("div"),l=k("div"),_e(n.$$.fragment),r=J(),s=k("p"),a=se(o),d=J(),p=k("p"),E=se(D),j=J(),T=k("p"),F=se(V),W=J(),M=k("div"),g&&g.c(),O=J(),L=k("button"),L.textContent=Y,N=J(),m=k("button"),m.textContent=H,C=J(),this.h()},l(h){e=y(h,"DIV",{class:!0});var v=$(e);l=y(v,"DIV",{class:!0});var c=$(l);pe(n.$$.fragment,c),c.forEach(_),r=G(v),s=y(v,"P",{class:!0});var b=$(s);a=re(b,o),b.forEach(_),d=G(v),p=y(v,"P",{class:!0});var P=$(p);E=re(P,D),P.forEach(_),j=G(v),T=y(v,"P",{class:!0});var u=$(T);F=re(u,V),u.forEach(_),W=G(v),M=y(v,"DIV",{class:!0});var w=$(M);g&&g.l(w),O=G(w),L=y(w,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(L)!=="svelte-19fo4xl"&&(L.textContent=Y),N=G(w),m=y(w,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(m)!=="svelte-1t0nfha"&&(m.textContent=H),w.forEach(_),C=G(v),v.forEach(_),this.h()},h(){i(l,"class","flex items-center"),i(s,"class","font-bold max-h-12 leading-6 overflow-auto mt-1"),i(p,"class","hidden sm:block text-gray-500 text-xs"),i(T,"class","hidden sm:block text-gray-500 text-xs"),i(L,"class","btn btn-link btn-sm p-0 no-underline text-accent"),i(m,"class","btn btn-link btn-sm p-0 no-underline text-error"),i(M,"class",""),i(e,"class","p-2 bg-info-content")},m(h,v){q(h,e,v),f(e,l),ve(n,l,null),f(e,r),f(e,s),f(s,a),f(e,d),f(e,p),f(p,E),f(e,j),f(e,T),f(T,F),f(e,W),f(e,M),g&&g.m(M,null),f(M,O),f(M,L),f(M,N),f(M,m),f(e,C),I=!0,R||(S=[le(L,"click",A),le(m,"click",U)],R=!0)},p(h,v){t=h;const c={};v&208&&(c.file=t[22]),n.$set(c),(!I||v&208)&&o!==(o=t[22].name+"")&&fe(a,o),(!I||v&208)&&D!==(D=t[22].formattedDatetime+"")&&fe(E,D),(!I||v&208)&&V!==(V=t[22].formattedSize+"")&&fe(F,V),t[3]&&t[22].type!="dir"?g?g.p(t,v):(g=et(t),g.c(),g.m(M,O)):g&&(g.d(1),g=null)},i(h){I||(ie(n.$$.fragment,h),I=!0)},o(h){ae(n.$$.fragment,h),I=!1},d(h){h&&_(e),be(n),g&&g.d(),R=!1,Ue(S)}}}function et(t){let e,l="Load",n,r;function s(){return t[19](t[22])}return{c(){e=k("button"),e.textContent=l,this.h()},l(o){e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1ie7fpp"&&(e.textContent=l),this.h()},h(){i(e,"class","btn btn-link btn-sm p-0 no-underline text-accent")},m(o,a){q(o,e,a),n||(r=le(e,"click",s),n=!0)},p(o,a){t=o},d(o){o&&_(e),n=!1,r()}}}function tt(t){let e=["dir","image","video","json"].includes(t[22].fileType),l,n,r=e&&xe(t);return{c(){r&&r.c(),l=Te()},l(s){r&&r.l(s),l=Te()},m(s,o){r&&r.m(s,o),q(s,l,o),n=!0},p(s,o){o&208&&(e=["dir","image","video","json"].includes(s[22].fileType)),e?r?(r.p(s,o),o&208&&ie(r,1)):(r=xe(s),r.c(),ie(r,1),r.m(l.parentNode,l)):r&&(Be(),ae(r,1,1,()=>{r=null}),Ve())},i(s){n||(ie(r),n=!0)},o(s){ae(r),n=!1},d(s){s&&_(l),r&&r.d(s)}}}function lt(t){let e,l;function n(o,a){return o[5]?Bt:Ht}let r=n(t),s=r(t);return{c(){e=k("div"),l=k("span"),s.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var a=$(e);l=y(a,"SPAN",{class:!0});var d=$(l);s.l(d),d.forEach(_),a.forEach(_),this.h()},h(){i(l,"class","font-bold text-4xl"),i(e,"class","w-full h-full flex items-center justify-center")},m(o,a){q(o,e,a),f(e,l),s.m(l,null)},p(o,a){r!==(r=n(o))&&(s.d(1),s=r(o),s&&(s.c(),s.m(l,null)))},d(o){o&&_(e),s.d()}}}function Ht(t){let e;return{c(){e=se("Loading ...")},l(l){e=re(l,"Loading ...")},m(l,n){q(l,e,n)},d(l){l&&_(e)}}}function Bt(t){let e;return{c(){e=se("It's empty here.")},l(l){e=re(l,"It's empty here.")},m(l,n){q(l,e,n)},d(l){l&&_(e)}}}function Vt(t){let e,l,n,r,s="Root",o,a,d,p,D,E,j,T,V,F,W=de((t[0]||"").split("/")),M=[];for(let m=0;m<W.length;m+=1)M[m]=Xe(Qe(t,W,m));let O=de(t[4].filter(t[18]).slice(0,t[6])),L=[];for(let m=0;m<O.length;m+=1)L[m]=tt(Ke(t,O,m));const Y=m=>ae(L[m],1,1,()=>{L[m]=null});let N=t[4].length===0&&lt(t);return{c(){e=k("div"),l=k("ul"),n=k("li"),r=k("button"),r.textContent=s,o=J();for(let m=0;m<M.length;m+=1)M[m].c();a=J(),d=k("input"),p=J(),D=k("div");for(let m=0;m<L.length;m+=1)L[m].c();E=J(),N&&N.c(),j=Te(),this.h()},l(m){e=y(m,"DIV",{class:!0});var H=$(e);l=y(H,"UL",{class:!0});var C=$(l);n=y(C,"LI",{});var I=$(n);r=y(I,"BUTTON",{"data-svelte-h":!0}),ce(r)!=="svelte-1paj67z"&&(r.textContent=s),I.forEach(_),o=G(C);for(let S=0;S<M.length;S+=1)M[S].l(C);C.forEach(_),a=G(H),d=y(H,"INPUT",{type:!0,placeholder:!0,class:!0}),H.forEach(_),p=G(m),D=y(m,"DIV",{class:!0});var R=$(D);for(let S=0;S<L.length;S+=1)L[S].l(R);R.forEach(_),E=G(m),N&&N.l(m),j=Te(),this.h()},h(){i(l,"class","basis-3/4"),i(d,"type","text"),i(d,"placeholder","Filter by filename"),i(d,"class","input input-bordered w-full h-full rounded-none border-slate-600 text-sm basis-1/4"),i(e,"class","max-w-full text-sm breadcrumbs flex flex-row ml-4"),i(D,"class","grid grid-cols-4 lg:grid-cols-6 gap-2")},m(m,H){q(m,e,H),f(e,l),f(l,n),f(n,r),f(l,o);for(let C=0;C<M.length;C+=1)M[C]&&M[C].m(l,null);f(e,a),f(e,d),ye(d,t[2]),q(m,p,H),q(m,D,H);for(let C=0;C<L.length;C+=1)L[C]&&L[C].m(D,null);q(m,E,H),N&&N.m(m,H),q(m,j,H),T=!0,V||(F=[le(r,"click",t[15]),le(d,"input",t[17])],V=!0)},p(m,[H]){if(H&2049){W=de((m[0]||"").split("/"));let C;for(C=0;C<W.length;C+=1){const I=Qe(m,W,C);M[C]?M[C].p(I,H):(M[C]=Xe(I),M[C].c(),M[C].m(l,null))}for(;C<M.length;C+=1)M[C].d(1);M.length=W.length}if(H&4&&d.value!==m[2]&&ye(d,m[2]),H&2010){O=de(m[4].filter(m[18]).slice(0,m[6]));let C;for(C=0;C<O.length;C+=1){const I=Ke(m,O,C);L[C]?(L[C].p(I,H),ie(L[C],1)):(L[C]=tt(I),L[C].c(),ie(L[C],1),L[C].m(D,null))}for(Be(),C=O.length;C<L.length;C+=1)Y(C);Ve()}m[4].length===0?N?N.p(m,H):(N=lt(m),N.c(),N.m(j.parentNode,j)):N&&(N.d(1),N=null)},i(m){if(!T){for(let H=0;H<O.length;H+=1)ie(L[H]);T=!0}},o(m){L=L.filter(Boolean);for(let H=0;H<L.length;H+=1)ae(L[H]);T=!1},d(m){m&&(_(e),_(p),_(D),_(E),_(j)),$e(M,m),$e(L,m),N&&N.d(m),V=!1,Ue(F)}}}function At(t,e,l){let{comfyUrl:n}=e,{folderType:r}=e,{toast:s}=e,{folderPath:o}=e,a,d=[],p=!0,D=20,E="",j=new RegExp("");async function T(){l(5,p=!0),l(4,d=await Ae(r,n,o)),l(5,p=!0)}Fe(async()=>{l(3,a=window.top.app),l(0,o=""),window.addEventListener("scroll",()=>{l(6,D=gt(D,d.length))})});async function V(I){const R=await fetch(n+"/browser/collections",{method:"POST",body:JSON.stringify({filename:I.name,folder_path:I.folder_path,folder_type:r})});s.show(R.ok,"Added to Saves","Failed to add to Saves. Please check the ComfyUI server.")}async function F(I){if(!confirm("You want to delete this file? "+I.name))return;const S=await fetch(n+"/browser/files",{method:"DELETE",body:JSON.stringify({folder_type:r,filename:I.name,folder_path:I.folder_path})});s.show(S.ok,"Deleted the file "+I.name,"Failed to delete the file. Please check the ComfyUI server."),l(4,d=d.filter(g=>g!=I))}async function W(I){l(0,o=I.path)}async function M(I){if(I===-1){l(0,o="");return}l(0,o=o.split("/").slice(0,I+1).join("/"))}const O=()=>M(-1),L=I=>M(I);function Y(){E=this.value,l(2,E)}const N=I=>j.test(I.name.toLowerCase()),m=async I=>await wt(I,a,s),H=async I=>await V(I),C=async I=>await F(I);return t.$$set=I=>{"comfyUrl"in I&&l(12,n=I.comfyUrl),"folderType"in I&&l(13,r=I.folderType),"toast"in I&&l(1,s=I.toast),"folderPath"in I&&l(0,o=I.folderPath)},t.$$.update=()=>{if(t.$$.dirty&1&&o!=null&&T(),t.$$.dirty&4)try{l(7,j=new RegExp(E.toLowerCase()))}catch{l(7,j=new RegExp(""))}},[o,s,E,a,d,p,D,j,V,F,W,M,n,r,T,O,L,Y,N,m,H,C]}class yt extends Ee{constructor(e){super(),De(this,e,At,Vt,Ce,{comfyUrl:12,folderType:13,toast:1,folderPath:0,refresh:14})}get refresh(){return this.$$.ctx[14]}}function Ft(t){let e,l,n,r;e=new yt({props:{folderType:"outputs",comfyUrl:t[0],toast:t[1]}});let s={};return n=new ze({props:s}),t[2](n),{c(){_e(e.$$.fragment),l=J(),_e(n.$$.fragment)},l(o){pe(e.$$.fragment,o),l=G(o),pe(n.$$.fragment,o)},m(o,a){ve(e,o,a),q(o,l,a),ve(n,o,a),r=!0},p(o,[a]){const d={};a&1&&(d.comfyUrl=o[0]),a&2&&(d.toast=o[1]),e.$set(d);const p={};n.$set(p)},i(o){r||(ie(e.$$.fragment,o),ie(n.$$.fragment,o),r=!0)},o(o){ae(e.$$.fragment,o),ae(n.$$.fragment,o),r=!1},d(o){o&&_(l),be(e,o),t[2](null),be(n,o)}}}function zt(t,e,l){let{comfyUrl:n}=e,r;function s(o){Se[o?"unshift":"push"](()=>{r=o,l(1,r)})}return t.$$set=o=>{"comfyUrl"in o&&l(0,n=o.comfyUrl)},[n,r,s]}class Yt extends Ee{constructor(e){super(),De(this,e,zt,Ft,Ce,{comfyUrl:0})}}function nt(t,e,l){const n=t.slice();return n[30]=e[l],n}function st(t,e,l){const n=t.slice();return n[33]=e[l],n[35]=l,n}function rt(t){let e,l="Save",n,r;return{c(){e=k("button"),e.textContent=l,this.h()},l(s){e=y(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-vwqboa"&&(e.textContent=l),this.h()},h(){i(e,"class","btn btn-outline btn-accent")},m(s,o){q(s,e,o),n||(r=le(e,"click",t[11]),n=!0)},p:me,d(s){s&&_(e),n=!1,r()}}}function ot(t){let e,l,n=t[33]+"",r,s,o;function a(){return t[20](t[35])}return{c(){e=k("li"),l=k("button"),r=se(n)},l(d){e=y(d,"LI",{});var p=$(e);l=y(p,"BUTTON",{});var D=$(l);r=re(D,n),D.forEach(_),p.forEach(_)},m(d,p){q(d,e,p),f(e,l),f(l,r),s||(o=le(l,"click",a),s=!0)},p(d,p){t=d,p[0]&1&&n!==(n=t[33]+"")&&fe(r,n)},d(d){d&&_(e),s=!1,o()}}}function it(t){let e,l="Load",n,r;function s(){return t[24](t[30])}return{c(){e=k("button"),e.textContent=l,this.h()},l(o){e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1ie7fpp"&&(e.textContent=l),this.h()},h(){i(e,"class","btn btn-link btn-sm p-0 no-underline text-accent")},m(o,a){q(o,e,a),n||(r=le(e,"click",s),n=!0)},p(o,a){t=o},d(o){o&&_(e),n=!1,r()}}}function at(t){let e,l,n,r,s,o,a,d,p=t[30].formattedDatetime+"",D,E,j=t[30].formattedSize+"",T,V,F,W,M,O="Remove",L,Y,N,m,H,C,I,R;l=new kt({props:{file:t[30],styleClass:"w-36",onClickDir:t[15]}});function S(...h){return t[23](t[30],...h)}let g=t[2]&&t[30].type!="dir"&&it(t);function A(){return t[25](t[30])}function U(...h){return t[26](t[30],...h)}return{c(){e=k("li"),_e(l.$$.fragment),n=J(),r=k("div"),s=k("input"),a=J(),d=k("p"),D=se(p),E=se(" | "),T=se(j),V=J(),F=k("div"),g&&g.c(),W=J(),M=k("button"),M.textContent=O,L=J(),Y=k("div"),N=k("textarea"),H=J(),this.h()},l(h){e=y(h,"LI",{class:!0});var v=$(e);pe(l.$$.fragment,v),n=G(v),r=y(v,"DIV",{class:!0});var c=$(r);s=y(c,"INPUT",{type:!0,class:!0}),a=G(c),d=y(c,"P",{class:!0});var b=$(d);D=re(b,p),E=re(b," | "),T=re(b,j),b.forEach(_),V=G(c),F=y(c,"DIV",{class:!0});var P=$(F);g&&g.l(P),W=G(P),M=y(P,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(M)!=="svelte-1mhg6fb"&&(M.textContent=O),P.forEach(_),c.forEach(_),L=G(v),Y=y(v,"DIV",{});var u=$(Y);N=y(u,"TEXTAREA",{name:!0,rows:!0,placeholder:!0,class:!0}),$(N).forEach(_),u.forEach(_),H=G(v),v.forEach(_),this.h()},h(){i(s,"type","text"),i(s,"class","input-bordered font-bold w-full bg-base-100"),s.value=o=t[30].name,i(d,"class","text-gray-500 text-xs"),i(M,"class","btn btn-link btn-sm p-0 no-underline text-error"),i(F,"class","bottom-0 absolute"),i(r,"class","space-y-2 w-96 relative"),i(N,"name","notes"),i(N,"rows","4"),i(N,"placeholder","write some memos..."),i(N,"class","resize-none textarea hidden md:block md:w-72 max-w-72"),N.value=m=t[30].notes,i(e,"class","flex h-36 border-0 space-x-4 p-2 bg-info-content")},m(h,v){q(h,e,v),ve(l,e,null),f(e,n),f(e,r),f(r,s),f(r,a),f(r,d),f(d,D),f(d,E),f(d,T),f(r,V),f(r,F),g&&g.m(F,null),f(F,W),f(F,M),f(e,L),f(e,Y),f(Y,N),f(e,H),C=!0,I||(R=[le(s,"blur",S),le(M,"click",A),le(N,"blur",U)],I=!0)},p(h,v){t=h;const c={};v[0]&584&&(c.file=t[30]),l.$set(c),(!C||v[0]&584&&o!==(o=t[30].name)&&s.value!==o)&&(s.value=o),(!C||v[0]&584)&&p!==(p=t[30].formattedDatetime+"")&&fe(D,p),(!C||v[0]&584)&&j!==(j=t[30].formattedSize+"")&&fe(T,j),t[2]&&t[30].type!="dir"?g?g.p(t,v):(g=it(t),g.c(),g.m(F,W)):g&&(g.d(1),g=null),(!C||v[0]&584&&m!==(m=t[30].notes))&&(N.value=m)},i(h){C||(ie(l.$$.fragment,h),C=!0)},o(h){ae(l.$$.fragment,h),C=!1},d(h){h&&_(e),be(l),g&&g.d(),I=!1,Ue(R)}}}function ct(t){let e,l;function n(o,a){return o[8]?Wt:Rt}let r=n(t),s=r(t);return{c(){e=k("div"),l=k("span"),s.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var a=$(e);l=y(a,"SPAN",{class:!0});var d=$(l);s.l(d),d.forEach(_),a.forEach(_),this.h()},h(){i(l,"class","font-bold text-4xl"),i(e,"class","w-full h-full flex items-center justify-center")},m(o,a){q(o,e,a),f(e,l),s.m(l,null)},p(o,a){r!==(r=n(o))&&(s.d(1),s=r(o),s&&(s.c(),s.m(l,null)))},d(o){o&&_(e),s.d()}}}function Rt(t){let e;return{c(){e=se("Loading ...")},l(l){e=re(l,"Loading ...")},m(l,n){q(l,e,n)},d(l){l&&_(e)}}}function Wt(t){let e;return{c(){e=se("It's empty here.")},l(l){e=re(l,"It's empty here.")},m(l,n){q(l,e,n)},d(l){l&&_(e)}}}function Jt(t){var P;let e,l,n='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"></path></svg>',r,s,o,a,d,p="Sync",D,E,j,T,V,F="Root",W,M,O,L,Y,N,m,H,C,I,R,S=t[5]!=((P=t[4])==null?void 0:P.git_repo)&&rt(t),g=de((t[0]||"").split("/")),A=[];for(let u=0;u<g.length;u+=1)A[u]=ot(st(t,g,u));let U=de(t[3].filter(t[22]).slice(0,t[6])),h=[];for(let u=0;u<U.length;u+=1)h[u]=at(nt(t,U,u));const v=u=>ae(h[u],1,1,()=>{h[u]=null});let c=t[3].length===0&&ct(t),b={};return H=new ze({props:b}),t[27](H),{c(){e=k("div"),l=k("a"),l.innerHTML=n,r=J(),s=k("input"),o=J(),S&&S.c(),a=J(),d=k("button"),d.textContent=p,D=J(),E=k("div"),j=k("ul"),T=k("li"),V=k("button"),V.textContent=F,W=J();for(let u=0;u<A.length;u+=1)A[u].c();M=J(),O=k("input"),L=J(),Y=k("ul");for(let u=0;u<h.length;u+=1)h[u].c();N=J(),c&&c.c(),m=J(),_e(H.$$.fragment),this.h()},l(u){e=y(u,"DIV",{class:!0});var w=$(e);l=y(w,"A",{class:!0,target:!0,href:!0,"data-svelte-h":!0}),ce(l)!=="svelte-1nomjvc"&&(l.innerHTML=n),r=G(w),s=y(w,"INPUT",{type:!0,placeholder:!0,class:!0}),o=G(w),S&&S.l(w),a=G(w),d=y(w,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(d)!=="svelte-118xeor"&&(d.textContent=p),w.forEach(_),D=G(u),E=y(u,"DIV",{class:!0});var Z=$(E);j=y(Z,"UL",{class:!0});var X=$(j);T=y(X,"LI",{});var z=$(T);V=y(z,"BUTTON",{"data-svelte-h":!0}),ce(V)!=="svelte-1paj67z"&&(V.textContent=F),z.forEach(_),W=G(X);for(let K=0;K<A.length;K+=1)A[K].l(X);X.forEach(_),M=G(Z),O=y(Z,"INPUT",{type:!0,placeholder:!0,class:!0}),Z.forEach(_),L=G(u),Y=y(u,"UL",{class:!0});var x=$(Y);for(let K=0;K<h.length;K+=1)h[K].l(x);x.forEach(_),N=G(u),c&&c.l(u),m=G(u),pe(H.$$.fragment,u),this.h()},h(){i(l,"class","btn pr-2"),i(l,"target","_blank"),i(l,"href","https://github.com/talesofai/comfyui-browser/wiki/How-to-use-'Sync'-in-the-'Saves'"),i(s,"type","text"),i(s,"placeholder","Input your git repository address"),i(s,"class","input input-bordered w-full max-w-lg"),i(d,"class","btn btn-outline btn-accent"),i(e,"class","flex border-b border-base-content pb-2"),i(j,"class","basis-2/3"),i(O,"type","text"),i(O,"placeholder","Filter by filename or memos"),i(O,"class","input input-bordered border-slate-600 w-full h-full rounded-none text-sm basis-1/3"),i(E,"class","max-w-full text-sm breadcrumbs flex flex-row ml-4"),i(Y,"class","space-y-2")},m(u,w){q(u,e,w),f(e,l),f(e,r),f(e,s),ye(s,t[5]),f(e,o),S&&S.m(e,null),f(e,a),f(e,d),q(u,D,w),q(u,E,w),f(E,j),f(j,T),f(T,V),f(j,W);for(let Z=0;Z<A.length;Z+=1)A[Z]&&A[Z].m(j,null);f(E,M),f(E,O),ye(O,t[1]),q(u,L,w),q(u,Y,w);for(let Z=0;Z<h.length;Z+=1)h[Z]&&h[Z].m(Y,null);q(u,N,w),c&&c.m(u,w),q(u,m,w),ve(H,u,w),C=!0,I||(R=[le(s,"input",t[18]),le(d,"click",t[10]),le(V,"click",t[19]),le(O,"input",t[21])],I=!0)},p(u,w){var X;if(w[0]&32&&s.value!==u[5]&&ye(s,u[5]),u[5]!=((X=u[4])==null?void 0:X.git_repo)?S?S.p(u,w):(S=rt(u),S.c(),S.m(e,a)):S&&(S.d(1),S=null),w[0]&65537){g=de((u[0]||"").split("/"));let z;for(z=0;z<g.length;z+=1){const x=st(u,g,z);A[z]?A[z].p(x,w):(A[z]=ot(x),A[z].c(),A[z].m(j,null))}for(;z<A.length;z+=1)A[z].d(1);A.length=g.length}if(w[0]&2&&O.value!==u[1]&&ye(O,u[1]),w[0]&62156){U=de(u[3].filter(u[22]).slice(0,u[6]));let z;for(z=0;z<U.length;z+=1){const x=nt(u,U,z);h[z]?(h[z].p(x,w),ie(h[z],1)):(h[z]=at(x),h[z].c(),ie(h[z],1),h[z].m(Y,null))}for(Be(),z=U.length;z<h.length;z+=1)v(z);Ve()}u[3].length===0?c?c.p(u,w):(c=ct(u),c.c(),c.m(m.parentNode,m)):c&&(c.d(1),c=null);const Z={};H.$set(Z)},i(u){if(!C){for(let w=0;w<U.length;w+=1)ie(h[w]);ie(H.$$.fragment,u),C=!0}},o(u){h=h.filter(Boolean);for(let w=0;w<h.length;w+=1)ae(h[w]);ae(H.$$.fragment,u),C=!1},d(u){u&&(_(e),_(D),_(E),_(L),_(Y),_(N),_(m)),S&&S.d(),$e(A,u),$e(h,u),c&&c.d(u),t[27](null),be(H,u),I=!1,Ue(R)}}}const He="collections";function Gt(t,e,l){let{comfyUrl:n}=e,r,s=[],o={},a="",d=20,p,D,E=!1,j="",T=new RegExp("");Fe(async()=>{l(2,r=window.top.app),l(0,D=""),l(4,o=await V()||{}),l(5,a=o==null?void 0:o.git_repo),window.addEventListener("scroll",()=>{l(6,d=gt(d,s.length))})});async function V(){return await(await fetch(n+"/browser/config")).json()}async function F(c){const b=c.target;b.disabled=!0,b.innerHTML="Syncing...";const P=await fetch(n+"/browser/collections/sync",{method:"POST"});p.show(P.ok,"Synced","Failed to sync. Please check the ComfyUI server."),b.disabled=!1,b.innerHTML="Sync",l(0,D=""),l(3,s=await Ae(He,n))}async function W(){const c=await fetch(n+"/browser/config",{method:"PUT",body:JSON.stringify({git_repo:a})});p.show(c.ok,"Updated config","Failed to update config. Please check the ComfyUI server.")}async function M(c){if(!confirm("You want to delete this file? "+c.name))return;const P=await fetch(n+"/browser/files",{method:"DELETE",body:JSON.stringify({folder_type:He,filename:c.name,folder_path:c.folder_path})});p.show(P.ok,"Deleted the file "+c.name,"Failed to delete the file. Please check the ComfyUI server."),l(3,s=s.filter(u=>u!=c))}async function O(c,b){return(await fetch(n+"/browser/files",{method:"PUT",body:JSON.stringify({folder_type:He,folder_path:c.folder_path,filename:c.name,new_data:b})})).ok}async function L(c,b){const P=c.target.value;if(P===b.name)return;const u=await O(b,{filename:P,notes:b.notes||"",folder_path:b.folder_path});p.show(u,"Memos Updated","Failed to update. Please check the ComfyUI server.")}async function Y(c,b){const P=c.target.value;if(P==b.notes)return;const u=await O(b,{filename:b.name,notes:P,folder_path:b.folder_path});p.show(u,"Updated","Failed to update. Please check the ComfyUI server.")}async function N(c){l(0,D=c.path)}async function m(c){if(c===-1){l(0,D="");return}l(0,D=D.split("/").slice(0,c+1).join("/"))}function H(){a=this.value,l(5,a)}const C=()=>m(-1),I=c=>m(c);function R(){j=this.value,l(1,j)}const S=c=>T.test(c.name.toLowerCase())||T.test(c.notes.toLowerCase()),g=(c,b)=>L(b,c),A=async c=>await wt(c,r,p),U=async c=>await M(c),h=(c,b)=>Y(b,c);function v(c){Se[c?"unshift":"push"](()=>{p=c,l(7,p)})}return t.$$set=c=>{"comfyUrl"in c&&l(17,n=c.comfyUrl)},t.$$.update=()=>{if(t.$$.dirty[0]&131073&&D!=null&&Ae(He,n,D).then(c=>{l(3,s=c),l(8,E=!0)}),t.$$.dirty[0]&2)try{l(9,T=new RegExp(j.toLowerCase()))}catch{l(9,T=new RegExp(""))}},[D,j,r,s,o,a,d,p,E,T,F,W,M,L,Y,N,m,n,H,C,I,R,S,g,A,U,h,v]}class Zt extends Ee{constructor(e){super(),De(this,e,Gt,Jt,Ce,{comfyUrl:17},null,[-1,-1])}}function ut(t,e,l){const n=t.slice();return n[26]=e[l],n}function ft(t,e,l){const n=t.slice();return n[29]=e[l],n}function qt(t){let e,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-6 h-6 text-accent"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0 0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"></path></svg>';return{c(){e=k("div"),e.innerHTML=l,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1y0djwt"&&(e.innerHTML=l),this.h()},h(){i(e,"class","h-14 px-0.5 flex items-center justify-center")},m(n,r){q(n,e,r)},p:me,d(n){n&&_(e)}}}function Kt(t){let e,l,n,r;return{c(){e=k("a"),l=ge("svg"),n=ge("path"),this.h()},l(s){e=y(s,"A",{class:!0,href:!0,target:!0});var o=$(e);l=we(o,"svg",{class:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var a=$(l);n=we(a,"path",{d:!0}),$(n).forEach(_),a.forEach(_),o.forEach(_),this.h()},h(){i(n,"d","M15,3C8.373,3,3,8.373,3,15c0,5.623,3.872,10.328,9.092,11.63C12.036,26.468,12,26.28,12,26.047v-2.051 c-0.487,0-1.303,0-1.508,0c-0.821,0-1.551-0.353-1.905-1.009c-0.393-0.729-0.461-1.844-1.435-2.526 c-0.289-0.227-0.069-0.486,0.264-0.451c0.615,0.174,1.125,0.596,1.605,1.222c0.478,0.627,0.703,0.769,1.596,0.769 c0.433,0,1.081-0.025,1.691-0.121c0.328-0.833,0.895-1.6,1.588-1.962c-3.996-0.411-5.903-2.399-5.903-5.098 c0-1.162,0.495-2.286,1.336-3.233C9.053,10.647,8.706,8.73,9.435,8c1.798,0,2.885,1.166,3.146,1.481C13.477,9.174,14.461,9,15.495,9 c1.036,0,2.024,0.174,2.922,0.483C18.675,9.17,19.763,8,21.565,8c0.732,0.731,0.381,2.656,0.102,3.594 c0.836,0.945,1.328,2.066,1.328,3.226c0,2.697-1.904,4.684-5.894,5.097C18.199,20.49,19,22.1,19,23.313v2.734 c0,0.104-0.023,0.179-0.035,0.268C23.641,24.676,27,20.236,27,15C27,8.373,21.627,3,15,3z"),i(l,"class","w-6 h-6 fill-accent"),i(l,"xmlns","http://www.w3.org/2000/svg"),i(l,"x","0px"),i(l,"y","0px"),i(l,"width","100"),i(l,"height","100"),i(l,"viewBox","0 0 30 30"),i(e,"class","h-14 px-0.5 flex items-center justify-center"),i(e,"href",r=t[29].homepage),i(e,"target","_blank")},m(s,o){q(s,e,o),f(e,l),f(l,n)},p(s,o){o[0]&2&&r!==(r=s[29].homepage)&&i(e,"href",r)},d(s){s&&_(e)}}}function ht(t){let e,l,n,r,s=t[29].name+"",o,a,d,p,D,E,j,T,V,F;function W(N,m){return N[29].homepage?Kt:qt}let M=W(t),O=M(t);function L(){return t[16](t[29])}function Y(){return t[17](t[29])}return{c(){e=k("li"),O.c(),l=J(),n=k("button"),r=k("p"),o=se(s),d=J(),p=k("button"),D=ge("svg"),E=ge("path"),T=J(),this.h()},l(N){e=y(N,"LI",{class:!0});var m=$(e);O.l(m),l=G(m),n=y(m,"BUTTON",{class:!0});var H=$(n);r=y(H,"P",{class:!0});var C=$(r);o=re(C,s),C.forEach(_),H.forEach(_),d=G(m),p=y(m,"BUTTON",{class:!0});var I=$(p);D=we(I,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var R=$(D);E=we(R,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(E).forEach(_),R.forEach(_),I.forEach(_),T=G(m),m.forEach(_),this.h()},h(){i(r,"class","w-40 truncate whitespace-normal"),i(n,"class",a="pl-2 h-14 line-clamp-2 overflow-hidden "+(t[29].name==t[6].split("/")[0]?"active":"")),i(E,"stroke-linecap","round"),i(E,"stroke-linejoin","round"),i(E,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"),i(D,"xmlns","http://www.w3.org/2000/svg"),i(D,"fill","none"),i(D,"viewBox","0 0 24 24"),i(D,"stroke-width","1.5"),i(D,"stroke","currentColor"),i(D,"class",j=(t[9]==t[29]?"text-accent":"")+" w-6 h-6"),i(p,"class","h-14 right-0 fixed flex items-center justify-center"),i(e,"class","h-14")},m(N,m){q(N,e,m),O.m(e,null),f(e,l),f(e,n),f(n,r),f(r,o),f(e,d),f(e,p),f(p,D),f(D,E),f(e,T),V||(F=[le(n,"click",L),le(p,"click",Y)],V=!0)},p(N,m){t=N,M===(M=W(t))&&O?O.p(t,m):(O.d(1),O=M(t),O&&(O.c(),O.m(e,l))),m[0]&2&&s!==(s=t[29].name+"")&&fe(o,s),m[0]&66&&a!==(a="pl-2 h-14 line-clamp-2 overflow-hidden "+(t[29].name==t[6].split("/")[0]?"active":""))&&i(n,"class",a),m[0]&514&&j!==(j=(t[9]==t[29]?"text-accent":"")+" w-6 h-6")&&i(D,"class",j)},d(N){N&&_(e),O.d(),V=!1,Ue(F)}}}function dt(t){let e,l='<span class="font-bold text-4xl">Loading ...</span>';return{c(){e=k("div"),e.innerHTML=l,this.h()},l(n){e=y(n,"DIV",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-ovpcuu"&&(e.innerHTML=l),this.h()},h(){i(e,"class","w-full h-full flex items-center justify-center")},m(n,r){q(n,e,r)},d(n){n&&_(e)}}}function mt(t){let e,l,n,r,s,o,a,d,p=t[26].author+"",D,E,j=t[26].title+"",T,V,F,W,M,O=t[26].url+"",L,Y,N,m,H,C=t[26].description+"",I,R,S,g,A=t[5]===t[26].url?"Subscribing...":"Subscribe",U,h,v,c,b;function P(){return t[21](t[26])}return{c(){e=k("li"),l=k("img"),s=J(),o=k("div"),a=k("a"),d=k("p"),D=se(p),E=se("/"),T=se(j),F=J(),W=k("a"),M=k("p"),L=se(O),N=J(),m=k("div"),H=k("p"),I=se(C),R=J(),S=k("div"),g=k("button"),U=se(A),v=J(),this.h()},l(u){e=y(u,"LI",{class:!0});var w=$(e);l=y(w,"IMG",{src:!0,alt:!0}),s=G(w),o=y(w,"DIV",{class:!0});var Z=$(o);a=y(Z,"A",{class:!0,href:!0,target:!0});var X=$(a);d=y(X,"P",{});var z=$(d);D=re(z,p),E=re(z,"/"),T=re(z,j),z.forEach(_),X.forEach(_),F=G(Z),W=y(Z,"A",{href:!0,target:!0});var x=$(W);M=y(x,"P",{class:!0});var K=$(M);L=re(K,O),K.forEach(_),x.forEach(_),Z.forEach(_),N=G(w),m=y(w,"DIV",{class:!0});var he=$(m);H=y(he,"P",{});var ne=$(H);I=re(ne,C),ne.forEach(_),he.forEach(_),R=G(w),S=y(w,"DIV",{class:!0});var ue=$(S);g=y(ue,"BUTTON",{class:!0});var Q=$(g);U=re(Q,A),Q.forEach(_),ue.forEach(_),v=G(w),w.forEach(_),this.h()},h(){Le(l.src,n=`https://github.com/${t[26].author}.png`)||i(l,"src",n),i(l,"alt",r=t[26].author),i(a,"class","link link-warning text-lg no-underline"),i(a,"href",V=t[26].url),i(a,"target","_blank"),i(M,"class","text-xs text-gray-500"),i(W,"href",Y=t[26].url),i(W,"target","_blank"),i(o,"class","w-80"),i(m,"class","w-72 grow"),i(g,"class","btn btn-outline btn-primary no-underline text-accent"),g.disabled=h=t[5].length>0,i(S,"class","flex items-center justify-center"),i(e,"class","flex flex-nowrap space-x-2 h-20 border-b border-b-base-content")},m(u,w){q(u,e,w),f(e,l),f(e,s),f(e,o),f(o,a),f(a,d),f(d,D),f(d,E),f(d,T),f(o,F),f(o,W),f(W,M),f(M,L),f(e,N),f(e,m),f(m,H),f(H,I),f(e,R),f(e,S),f(S,g),f(g,U),f(e,v),c||(b=le(g,"click",P),c=!0)},p(u,w){t=u,w[0]&128&&!Le(l.src,n=`https://github.com/${t[26].author}.png`)&&i(l,"src",n),w[0]&128&&r!==(r=t[26].author)&&i(l,"alt",r),w[0]&128&&p!==(p=t[26].author+"")&&fe(D,p),w[0]&128&&j!==(j=t[26].title+"")&&fe(T,j),w[0]&128&&V!==(V=t[26].url)&&i(a,"href",V),w[0]&128&&O!==(O=t[26].url+"")&&fe(L,O),w[0]&128&&Y!==(Y=t[26].url)&&i(W,"href",Y),w[0]&128&&C!==(C=t[26].description+"")&&fe(I,C),w[0]&160&&A!==(A=t[5]===t[26].url?"Subscribing...":"Subscribe")&&fe(U,A),w[0]&32&&h!==(h=t[5].length>0)&&(g.disabled=h)},d(u){u&&_(e),c=!1,b()}}}function Qt(t){let e,l,n,r,s,o,a,d,p,D,E,j=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>
          Add new source`,T,V,F,W,M,O,L,Y,N,m,H=t[5]===t[4]&&t[4]?"Subscribing...":"Subscribe",C,I,R,S,g,A,U,h,v=`You could open
      <a class="text-accent" target="_blank" href="https://github.com/talesofai/comfyui-browser/edit/main/data/sources.json">a pull request</a>
      or submit
      <a class="text-accent" target="_blank" href="https://github.com/talesofai/comfyui-browser/issues/new?assignees=tzwm&amp;labels=workflow-repo&amp;projects=&amp;template=new-workflow-repository.md&amp;title=New+workflow+repo%3A">an issue</a>
      to add your workflow repository here.<br/>
      Thank you to everyone who contributes to the open community!`,c,b,P="<button>close</button>",u,w,Z;function X(B){t[14](B)}let z={folderType:"sources",comfyUrl:t[0],toast:t[2]};t[6]!==void 0&&(z.folderPath=t[6]),s=new yt({props:z}),Se.push(()=>pt(s,"folderPath",X)),t[15](s);let x=de(t[1]),K=[];for(let B=0;B<x.length;B+=1)K[B]=ht(ft(t,x,B));let he={};F=new ze({props:he}),t[18](F);let ne=t[7].length===0&&dt(),ue=de(t[7]),Q=[];for(let B=0;B<ue.length;B+=1)Q[B]=mt(ut(t,ue,B));return{c(){e=k("div"),l=k("input"),n=J(),r=k("div"),_e(s.$$.fragment),a=J(),d=k("div"),p=k("ul"),D=k("li"),E=k("button"),E.innerHTML=j,T=J();for(let B=0;B<K.length;B+=1)K[B].c();V=J(),_e(F.$$.fragment),W=J(),M=k("dialog"),O=k("div"),L=k("div"),Y=k("input"),N=J(),m=k("button"),C=se(H),R=J(),S=k("div"),ne&&ne.c(),g=J(),A=k("ul");for(let B=0;B<Q.length;B+=1)Q[B].c();U=J(),h=k("p"),h.innerHTML=v,c=J(),b=k("form"),b.innerHTML=P,this.h()},l(B){e=y(B,"DIV",{class:!0});var te=$(e);l=y(te,"INPUT",{type:!0,class:!0}),n=G(te),r=y(te,"DIV",{class:!0});var oe=$(r);pe(s.$$.fragment,oe),oe.forEach(_),a=G(te),d=y(te,"DIV",{class:!0});var Oe=$(d);p=y(Oe,"UL",{class:!0});var ee=$(p);D=y(ee,"LI",{class:!0});var ke=$(D);E=y(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(E)!=="svelte-yijvz1"&&(E.innerHTML=j),ke.forEach(_),T=G(ee);for(let Me=0;Me<K.length;Me+=1)K[Me].l(ee);ee.forEach(_),Oe.forEach(_),te.forEach(_),V=G(B),pe(F.$$.fragment,B),W=G(B),M=y(B,"DIALOG",{class:!0});var je=$(M);O=y(je,"DIV",{class:!0});var Ie=$(O);L=y(Ie,"DIV",{class:!0});var Pe=$(L);Y=y(Pe,"INPUT",{type:!0,placeholder:!0,class:!0}),N=G(Pe),m=y(Pe,"BUTTON",{class:!0});var Ye=$(m);C=re(Ye,H),Ye.forEach(_),Pe.forEach(_),R=G(Ie),S=y(Ie,"DIV",{});var Ne=$(S);ne&&ne.l(Ne),g=G(Ne),A=y(Ne,"UL",{class:!0});var Re=$(A);for(let Me=0;Me<Q.length;Me+=1)Q[Me].l(Re);Re.forEach(_),Ne.forEach(_),U=G(Ie),h=y(Ie,"P",{class:!0,"data-svelte-h":!0}),ce(h)!=="svelte-n5ogsw"&&(h.innerHTML=v),Ie.forEach(_),c=G(je),b=y(je,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),ce(b)!=="svelte-povsts"&&(b.innerHTML=P),je.forEach(_),this.h()},h(){i(l,"type","checkbox"),i(l,"class","drawer-toggle"),i(r,"class","drawer-content flex flex-col pl-2"),i(E,"class","pl-2 btn-outline btn-accent"),i(D,"class","h-10"),i(p,"class","menu bg-base-200 w-56 p-0 [&_li>*]:rounded-none"),i(d,"class","drawer-side border-r border-base-content pr-2"),i(e,"class","drawer md:drawer-open"),i(Y,"type","text"),i(Y,"placeholder","https://github.com/comfyanonymous/ComfyUI_examples"),i(Y,"class","grow input input-bordered"),i(m,"class","btn btn-outline btn-primary"),m.disabled=I=t[5].length>0||!t[4],i(L,"class","mb-2 flex space-x-2"),i(A,"class","space-y-1"),i(h,"class","mt-1 text-xs text-gray-500"),i(O,"class","modal-box w-5/6 max-w-5xl"),i(b,"method","dialog"),i(b,"class","modal-backdrop"),i(M,"class","modal")},m(B,te){q(B,e,te),f(e,l),f(e,n),f(e,r),ve(s,r,null),f(e,a),f(e,d),f(d,p),f(p,D),f(D,E),f(p,T);for(let oe=0;oe<K.length;oe+=1)K[oe]&&K[oe].m(p,null);q(B,V,te),ve(F,B,te),q(B,W,te),q(B,M,te),f(M,O),f(O,L),f(L,Y),ye(Y,t[4]),f(L,N),f(L,m),f(m,C),f(O,R),f(O,S),ne&&ne.m(S,null),f(S,g),f(S,A);for(let oe=0;oe<Q.length;oe+=1)Q[oe]&&Q[oe].m(A,null);f(O,U),f(O,h),f(M,c),f(M,b),t[22](M),u=!0,w||(Z=[le(E,"click",t[12]),le(Y,"input",t[19]),le(m,"click",t[20])],w=!0)},p(B,te){const oe={};if(te[0]&1&&(oe.comfyUrl=B[0]),te[0]&4&&(oe.toast=B[2]),!o&&te[0]&64&&(o=!0,oe.folderPath=B[6],_t(()=>o=!1)),s.$set(oe),te[0]&3650){x=de(B[1]);let ee;for(ee=0;ee<x.length;ee+=1){const ke=ft(B,x,ee);K[ee]?K[ee].p(ke,te):(K[ee]=ht(ke),K[ee].c(),K[ee].m(p,null))}for(;ee<K.length;ee+=1)K[ee].d(1);K.length=x.length}const Oe={};if(F.$set(Oe),te[0]&16&&Y.value!==B[4]&&ye(Y,B[4]),(!u||te[0]&48)&&H!==(H=B[5]===B[4]&&B[4]?"Subscribing...":"Subscribe")&&fe(C,H),(!u||te[0]&48&&I!==(I=B[5].length>0||!B[4]))&&(m.disabled=I),B[7].length===0?ne||(ne=dt(),ne.c(),ne.m(S,g)):ne&&(ne.d(1),ne=null),te[0]&8352){ue=de(B[7]);let ee;for(ee=0;ee<ue.length;ee+=1){const ke=ut(B,ue,ee);Q[ee]?Q[ee].p(ke,te):(Q[ee]=mt(ke),Q[ee].c(),Q[ee].m(A,null))}for(;ee<Q.length;ee+=1)Q[ee].d(1);Q.length=ue.length}},i(B){u||(ie(s.$$.fragment,B),ie(F.$$.fragment,B),u=!0)},o(B){ae(s.$$.fragment,B),ae(F.$$.fragment,B),u=!1},d(B){B&&(_(e),_(V),_(W),_(M)),t[15](null),be(s),$e(K,B),t[18](null),be(F,B),ne&&ne.d(),$e(Q,B),t[22](null),w=!1,Ue(Z)}}}function Xt(t,e,l){let{comfyUrl:n}=e,r=[],s,o,a,d="",p="",D=[],E,j;async function T(){const A=await(await fetch(n+"/browser/sources")).json();l(1,r=A.sources.map(U=>(U.homepage="",U.url.startsWith("https://")&&(U.homepage=U.url,U.homepage.endsWith(".git")&&(U.homepage=U.homepage.slice(0,-4))),U)))}Fe(async()=>{T(),O()});function V(g){console.log(p),l(6,p=g.name)}async function F(g){l(9,j=g);const A=await fetch(n+`/browser/sources/sync/${g.name}`,{method:"POST"});l(9,j=null),A.ok&&(T(),E.refresh()),s.show(A.ok,"Synced "+[g.author,g.name].join("/"),"Failed to sync this source. Please check the ComfyUI server.")}function W(){o.showModal()}async function M(g){if(!g){s.show(!1,"","missing Git URL");return}l(5,d=g);const A=await fetch(n+"/browser/sources",{method:"POST",body:JSON.stringify({repo_url:g})});l(5,d=""),A.ok&&(T(),E.refresh()),s.show(A.ok,"Added a new source","Failed to add a new source. Please check the ComfyUI server."),o.close()}async function O(){const A=await(await fetch(n+"/browser/sources/all")).json();l(7,D=A.sources)}function L(g){p=g,l(6,p)}function Y(g){Se[g?"unshift":"push"](()=>{E=g,l(8,E)})}const N=g=>V(g),m=g=>F(g);function H(g){Se[g?"unshift":"push"](()=>{s=g,l(2,s)})}function C(){a=this.value,l(4,a)}const I=()=>M(a),R=g=>M(g.url);function S(g){Se[g?"unshift":"push"](()=>{o=g,l(3,o)})}return t.$$set=g=>{"comfyUrl"in g&&l(0,n=g.comfyUrl)},[n,r,s,o,a,d,p,D,E,j,V,F,W,M,L,Y,N,m,H,C,I,R,S]}class xt extends Ee{constructor(e){super(),De(this,e,Xt,Qt,Ce,{comfyUrl:0},null,[-1,-1])}}function el(t){let e,l;return e=new xt({props:{comfyUrl:t[1]}}),{c(){_e(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ve(e,n,r),l=!0},p:me,i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){ae(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function tl(t){let e,l;return e=new Yt({props:{comfyUrl:t[1]}}),{c(){_e(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ve(e,n,r),l=!0},p:me,i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){ae(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function ll(t){let e,l;return e=new Zt({props:{comfyUrl:t[1]}}),{c(){_e(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ve(e,n,r),l=!0},p:me,i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){ae(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function nl(t){let e,l,n,r,s,o,a;function d(T){t[3](T)}let p={};t[0]!==void 0&&(p.activeTab=t[0]),e=new Et({props:p}),Se.push(()=>pt(e,"activeTab",d));const D=[ll,tl,el],E=[];function j(T,V){return T[0]==="collections"?0:T[0]==="outputs"?1:2}return r=j(t),s=E[r]=D[r](t),{c(){_e(e.$$.fragment),n=J(),s.c(),o=Te()},l(T){pe(e.$$.fragment,T),n=G(T),s.l(T),o=Te()},m(T,V){ve(e,T,V),q(T,n,V),E[r].m(T,V),q(T,o,V),a=!0},p(T,[V]){const F={};!l&&V&1&&(l=!0,F.activeTab=T[0],_t(()=>l=!1)),e.$set(F);let W=r;r=j(T),r===W?E[r].p(T,V):(Be(),ae(E[W],1,1,()=>{E[W]=null}),Ve(),s=E[r],s?s.p(T,V):(s=E[r]=D[r](T),s.c()),ie(s,1),s.m(o.parentNode,o))},i(T){a||(ie(e.$$.fragment,T),ie(s),a=!0)},o(T){ae(e.$$.fragment,T),ae(s),a=!1},d(T){T&&(_(n),_(o)),be(e,T),E[r].d(T)}}}function sl(t,e,l){let{data:n}=e;const{comfyUrl:r}=n;let s="outputs";function o(a){s=a,l(0,s)}return t.$$set=a=>{"data"in a&&l(2,n=a.data)},[s,r,n,o]}class il extends Ee{constructor(e){super(),De(this,e,sl,nl,Ce,{data:2})}}export{il as component};
