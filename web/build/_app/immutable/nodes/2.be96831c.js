import{s as _e,n as ne,r as ke,f as ye,o as Ae,b as Ce,h as Ze}from"../chunks/scheduler.89bf212d.js";import{S as pe,i as be,g as U,m as ee,s as B,h as I,j as V,n as te,f as M,c as A,k as v,a as W,x as T,y as x,l as Me,z as le,e as me,o as he,r as ae,u as oe,v as ce,d as q,p as Te,b as De,t as Z,A as ze,w as ue,B as Oe,C as Ke}from"../chunks/index.911dd7e6.js";function $e(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function Qe(s){let e,t,n,r,l,i,c,f,o,_;return{c(){e=U("div"),t=U("button"),n=ee("Outputs"),l=B(),i=U("button"),c=ee("Collections"),this.h()},l(p){e=I(p,"DIV",{role:!0,class:!0});var $=V(e);t=I($,"BUTTON",{role:!0,class:!0});var b=V(t);n=te(b,"Outputs"),b.forEach(M),l=A($),i=I($,"BUTTON",{role:!0,class:!0});var h=V(i);c=te(h,"Collections"),h.forEach(M),$.forEach(M),this.h()},h(){v(t,"role","tab"),v(t,"class",r="tab "+s[0]("outputs")),v(i,"role","tab"),v(i,"class",f="tab "+s[0]("collections")),v(e,"role","tablist"),v(e,"class","tabs tabs-boxed sticky top-0")},m(p,$){W(p,e,$),T(e,t),T(t,n),T(e,l),T(e,i),T(i,c),o||(_=[x(t,"click",s[3]),x(i,"click",s[4])],o=!0)},p(p,[$]){$&1&&r!==(r="tab "+p[0]("outputs"))&&v(t,"class",r),$&1&&f!==(f="tab "+p[0]("collections"))&&v(i,"class",f)},i:ne,o:ne,d(p){p&&M(e),o=!1,ke(_)}}}function Xe(s,e,t){let n,{activeTab:r="outputs"}=e;function l(f){t(2,r=f)}const i=()=>l("outputs"),c=()=>l("collections");return s.$$set=f=>{"activeTab"in f&&t(2,r=f.activeTab)},s.$$.update=()=>{s.$$.dirty&4&&t(0,n=function(f){return f===r?"tab-active":""})},[n,l,r,i,c]}class xe extends pe{constructor(e){super(),be(this,e,Xe,Qe,_e,{activeTab:2})}}var et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tt(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Je={exports:{}};(function(s,e){(function(t,n){s.exports=n()})(et,function(){var t=1e3,n=6e4,r=36e5,l="millisecond",i="second",c="minute",f="hour",o="day",_="week",p="month",$="quarter",b="year",h="date",N="Invalid Date",O=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var u=["th","st","nd","rd"],a=D%100;return"["+D+(u[(a-20)%10]||u[a]||u[0])+"]"}},z=function(D,u,a){var m=String(D);return!m||m.length>=u?D:""+Array(u+1-m.length).join(a)+D},g={s:z,z:function(D){var u=-D.utcOffset(),a=Math.abs(u),m=Math.floor(a/60),d=a%60;return(u<=0?"+":"-")+z(m,2,"0")+":"+z(d,2,"0")},m:function D(u,a){if(u.date()<a.date())return-D(a,u);var m=12*(a.year()-u.year())+(a.month()-u.month()),d=u.clone().add(m,p),k=a-d<0,C=u.clone().add(m+(k?-1:1),p);return+(-(m+(a-d)/(k?d-C:C-d))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:p,y:b,w:_,d:o,D:h,h:f,m:c,s:i,ms:l,Q:$}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},y="en",L={};L[y]=Q;var S="$isDayjsObject",w=function(D){return D instanceof E||!(!D||!D[S])},F=function D(u,a,m){var d;if(!u)return y;if(typeof u=="string"){var k=u.toLowerCase();L[k]&&(d=k),a&&(L[k]=a,d=k);var C=u.split("-");if(!d&&C.length>1)return D(C[0])}else{var P=u.name;L[P]=u,d=P}return!m&&d&&(y=d),d||!m&&y},H=function(D,u){if(w(D))return D.clone();var a=typeof u=="object"?u:{};return a.date=D,a.args=arguments,new E(a)},j=g;j.l=F,j.i=w,j.w=function(D,u){return H(D,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var E=function(){function D(a){this.$L=F(a.locale,null,!0),this.parse(a),this.$x=this.$x||a.x||{},this[S]=!0}var u=D.prototype;return u.parse=function(a){this.$d=function(m){var d=m.date,k=m.utc;if(d===null)return new Date(NaN);if(j.u(d))return new Date;if(d instanceof Date)return new Date(d);if(typeof d=="string"&&!/Z$/i.test(d)){var C=d.match(O);if(C){var P=C[2]-1||0,J=(C[7]||"0").substring(0,3);return k?new Date(Date.UTC(C[1],P,C[3]||1,C[4]||0,C[5]||0,C[6]||0,J)):new Date(C[1],P,C[3]||1,C[4]||0,C[5]||0,C[6]||0,J)}}return new Date(d)}(a),this.init()},u.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},u.$utils=function(){return j},u.isValid=function(){return this.$d.toString()!==N},u.isSame=function(a,m){var d=H(a);return this.startOf(m)<=d&&d<=this.endOf(m)},u.isAfter=function(a,m){return H(a)<this.startOf(m)},u.isBefore=function(a,m){return this.endOf(m)<H(a)},u.$g=function(a,m,d){return j.u(a)?this[m]:this.set(d,a)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(a,m){var d=this,k=!!j.u(m)||m,C=j.p(a),P=function(ie,K){var se=j.w(d.$u?Date.UTC(d.$y,K,ie):new Date(d.$y,K,ie),d);return k?se:se.endOf(o)},J=function(ie,K){return j.w(d.toDate()[ie].apply(d.toDate("s"),(k?[0,0,0,0]:[23,59,59,999]).slice(K)),d)},G=this.$W,R=this.$M,X=this.$D,de="set"+(this.$u?"UTC":"");switch(C){case b:return k?P(1,0):P(31,11);case p:return k?P(1,R):P(0,R+1);case _:var re=this.$locale().weekStart||0,ve=(G<re?G+7:G)-re;return P(k?X-ve:X+(6-ve),R);case o:case h:return J(de+"Hours",0);case f:return J(de+"Minutes",1);case c:return J(de+"Seconds",2);case i:return J(de+"Milliseconds",3);default:return this.clone()}},u.endOf=function(a){return this.startOf(a,!1)},u.$set=function(a,m){var d,k=j.p(a),C="set"+(this.$u?"UTC":""),P=(d={},d[o]=C+"Date",d[h]=C+"Date",d[p]=C+"Month",d[b]=C+"FullYear",d[f]=C+"Hours",d[c]=C+"Minutes",d[i]=C+"Seconds",d[l]=C+"Milliseconds",d)[k],J=k===o?this.$D+(m-this.$W):m;if(k===p||k===b){var G=this.clone().set(h,1);G.$d[P](J),G.init(),this.$d=G.set(h,Math.min(this.$D,G.daysInMonth())).$d}else P&&this.$d[P](J);return this.init(),this},u.set=function(a,m){return this.clone().$set(a,m)},u.get=function(a){return this[j.p(a)]()},u.add=function(a,m){var d,k=this;a=Number(a);var C=j.p(m),P=function(R){var X=H(k);return j.w(X.date(X.date()+Math.round(R*a)),k)};if(C===p)return this.set(p,this.$M+a);if(C===b)return this.set(b,this.$y+a);if(C===o)return P(1);if(C===_)return P(7);var J=(d={},d[c]=n,d[f]=r,d[i]=t,d)[C]||1,G=this.$d.getTime()+a*J;return j.w(G,this)},u.subtract=function(a,m){return this.add(-1*a,m)},u.format=function(a){var m=this,d=this.$locale();if(!this.isValid())return d.invalidDate||N;var k=a||"YYYY-MM-DDTHH:mm:ssZ",C=j.z(this),P=this.$H,J=this.$m,G=this.$M,R=d.weekdays,X=d.months,de=d.meridiem,re=function(K,se,ge,we){return K&&(K[se]||K(m,k))||ge[se].slice(0,we)},ve=function(K){return j.s(P%12||12,K,"0")},ie=de||function(K,se,ge){var we=K<12?"AM":"PM";return ge?we.toLowerCase():we};return k.replace(Y,function(K,se){return se||function(ge){switch(ge){case"YY":return String(m.$y).slice(-2);case"YYYY":return j.s(m.$y,4,"0");case"M":return G+1;case"MM":return j.s(G+1,2,"0");case"MMM":return re(d.monthsShort,G,X,3);case"MMMM":return re(X,G);case"D":return m.$D;case"DD":return j.s(m.$D,2,"0");case"d":return String(m.$W);case"dd":return re(d.weekdaysMin,m.$W,R,2);case"ddd":return re(d.weekdaysShort,m.$W,R,3);case"dddd":return R[m.$W];case"H":return String(P);case"HH":return j.s(P,2,"0");case"h":return ve(1);case"hh":return ve(2);case"a":return ie(P,J,!0);case"A":return ie(P,J,!1);case"m":return String(J);case"mm":return j.s(J,2,"0");case"s":return String(m.$s);case"ss":return j.s(m.$s,2,"0");case"SSS":return j.s(m.$ms,3,"0");case"Z":return C}return null}(K)||C.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(a,m,d){var k,C=this,P=j.p(m),J=H(a),G=(J.utcOffset()-this.utcOffset())*n,R=this-J,X=function(){return j.m(C,J)};switch(P){case b:k=X()/12;break;case p:k=X();break;case $:k=X()/3;break;case _:k=(R-G)/6048e5;break;case o:k=(R-G)/864e5;break;case f:k=R/r;break;case c:k=R/n;break;case i:k=R/t;break;default:k=R}return d?k:j.a(k)},u.daysInMonth=function(){return this.endOf(p).$D},u.$locale=function(){return L[this.$L]},u.locale=function(a,m){if(!a)return this.$L;var d=this.clone(),k=F(a,m,!0);return k&&(d.$L=k),d},u.clone=function(){return j.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},D}(),fe=E.prototype;return H.prototype=fe,[["$ms",l],["$s",i],["$m",c],["$H",f],["$W",o],["$M",p],["$y",b],["$D",h]].forEach(function(D){fe[D[1]]=function(u){return this.$g(u,D[0],D[1])}}),H.extend=function(D,u){return D.$i||(D(u,E,H),D.$i=!0),H},H.locale=F,H.isDayjs=w,H.unix=function(D){return H(1e3*D)},H.en=L[y],H.Ls=L,H.p={},H})})(Je);var nt=Je.exports;const st=tt(nt);async function Se(s,e){let r=(await(await fetch(e+"/browser/"+s)).json()).files;return r.forEach(l=>{const i=l.name.split(".").pop().toLowerCase();l.fileType="json",["png","webp","jpeg","jpg","gif"].includes(i)&&(l.fileType="image"),["mp4","webm","mov","avi","mkv"].includes(i)&&(l.fileType="video"),s==="collections"?l.url=`${e}/browser/collections/view?filename=${l.name}`:l.url=`${e}/view?filename=${l.name}`;const c=st.unix(l.created_at);l.formattedDatetime=c.format("YYYY-MM-DD HH-mm-ss"),l.bytes/1024/1024>1?l.formattedSize=(l.bytes/1024/1024).toFixed(2)+" MB":l.formattedSize=Math.round(l.bytes/1024)+" KB"}),r}function We(s,e){if(s>=e)return s;const t=document.documentElement.scrollHeight;return window.innerHeight+window.scrollY>=t?s+10:s}async function Ge(s,e,t){const n=await fetch(s.url),r=await n.blob(),l=new File([r],s.name,{type:n.headers.get("Content-Type")||""}),i=e.loadGraphData.bind(e);e.loadGraphData=async function(c){var o;const f=(o=window.top)==null?void 0:o.document.getElementById("comfy-browser-dialog");f&&(f.style.display="none"),await i(c)},await e.handleFile(l),t.show(!1,"Loaded","No workflow found here",1e3)}function Ee(s){let e,t='<span class="font-bold text-xl">JSON</span>';return{c(){e=U("div"),e.innerHTML=t,this.h()},l(n){e=I(n,"DIV",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1b6iij2"&&(e.innerHTML=t),this.h()},h(){v(e,"class","w-full h-full flex items-center justify-center")},m(n,r){W(n,e,r)},d(n){n&&M(e)}}}function Ue(s){let e,t,n;return{c(){e=U("img"),this.h()},l(r){e=I(r,"IMG",{class:!0,loading:!0,src:!0,alt:!0}),this.h()},h(){v(e,"class","h-full w-full object-contain"),v(e,"loading","lazy"),ye(e.src,t=s[0].url)||v(e,"src",t),v(e,"alt",n=s[0].name)},m(r,l){W(r,e,l)},p(r,l){l&1&&!ye(e.src,t=r[0].url)&&v(e,"src",t),l&1&&n!==(n=r[0].name)&&v(e,"alt",n)},d(r){r&&M(e)}}}function Ie(s){let e,t,n;return{c(){e=U("video"),t=U("track"),this.h()},l(r){e=I(r,"VIDEO",{class:!0,src:!0});var l=V(e);t=I(l,"TRACK",{kind:!0}),l.forEach(M),this.h()},h(){v(t,"kind","captions"),v(e,"class","h-full w-full object-contain pb-0.5 border-0.5 border-black"),ye(e.src,n=s[0].url)||v(e,"src",n),e.loop=!0,e.autoplay=!0,e.muted=!0},m(r,l){W(r,e,l),T(e,t)},p(r,l){l&1&&!ye(e.src,n=r[0].url)&&v(e,"src",n)},d(r){r&&M(e)}}}function lt(s){let e,t,n,r,l,i=s[0].fileType==="json"&&Ee(),c=s[0].fileType==="image"&&Ue(s),f=s[0].fileType==="video"&&Ie(s);return{c(){e=U("div"),t=U("a"),i&&i.c(),n=B(),c&&c.c(),r=B(),f&&f.c(),this.h()},l(o){e=I(o,"DIV",{class:!0});var _=V(e);t=I(_,"A",{href:!0,target:!0,style:!0});var p=V(t);i&&i.l(p),n=A(p),c&&c.l(p),r=A(p),f&&f.l(p),p.forEach(M),_.forEach(M),this.h()},h(){v(t,"href",l=s[0].url),v(t,"target","_blank"),Me(t,"height","inherit"),Me(t,"width","inherit"),v(e,"class",s[1])},m(o,_){W(o,e,_),T(e,t),i&&i.m(t,null),T(t,n),c&&c.m(t,null),T(t,r),f&&f.m(t,null)},p(o,[_]){o[0].fileType==="json"?i||(i=Ee(),i.c(),i.m(t,n)):i&&(i.d(1),i=null),o[0].fileType==="image"?c?c.p(o,_):(c=Ue(o),c.c(),c.m(t,r)):c&&(c.d(1),c=null),o[0].fileType==="video"?f?f.p(o,_):(f=Ie(o),f.c(),f.m(t,null)):f&&(f.d(1),f=null),_&1&&l!==(l=o[0].url)&&v(t,"href",l),_&2&&v(e,"class",o[1])},i:ne,o:ne,d(o){o&&M(e),i&&i.d(),c&&c.d(),f&&f.d()}}}function rt(s,e,t){let{file:n}=e,{styleClass:r}=e;return s.$$set=l=>{"file"in l&&t(0,n=l.file),"styleClass"in l&&t(1,r=l.styleClass)},[n,r]}class qe extends pe{constructor(e){super(),be(this,e,rt,lt,_e,{file:0,styleClass:1})}}function Ne(s){let e,t,n,r,l;return{c(){e=U("div"),t=U("div"),n=U("span"),r=ee(s[2]),this.h()},l(i){e=I(i,"DIV",{class:!0});var c=V(e);t=I(c,"DIV",{class:!0});var f=V(t);n=I(f,"SPAN",{});var o=V(n);r=te(o,s[2]),o.forEach(M),f.forEach(M),c.forEach(M),this.h()},h(){v(t,"class",l="alert "+(s[1]?"alert-success":"alert-error")),v(e,"class","toast toast-center")},m(i,c){W(i,e,c),T(e,t),T(t,n),T(n,r)},p(i,c){c&4&&he(r,i[2]),c&2&&l!==(l="alert "+(i[1]?"alert-success":"alert-error"))&&v(t,"class",l)},d(i){i&&M(e)}}}function it(s){let e,t=s[0]&&Ne(s);return{c(){t&&t.c(),e=me()},l(n){t&&t.l(n),e=me()},m(n,r){t&&t.m(n,r),W(n,e,r)},p(n,[r]){n[0]?t?t.p(n,r):(t=Ne(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ne,o:ne,d(n){n&&M(e),t&&t.d(n)}}}function at(s,e,t){let{showToast:n=!1}=e,{toastSuccess:r=!0}=e,{toastText:l=""}=e;function i(c,f,o,_=2e3){t(1,r=c),t(2,l=c?f:o),t(0,n=!0),setTimeout(()=>t(0,n=!1),_)}return s.$$set=c=>{"showToast"in c&&t(0,n=c.showToast),"toastSuccess"in c&&t(1,r=c.toastSuccess),"toastText"in c&&t(2,l=c.toastText)},[n,r,l,i]}class Re extends pe{constructor(e){super(),be(this,e,at,it,_e,{showToast:0,toastSuccess:1,toastText:2,show:3})}get show(){return this.$$.ctx[3]}}function Le(s,e,t){const n=s.slice();return n[11]=e[t],n}function je(s){let e,t,n,r,l,i=s[11].name+"",c,f,o,_=s[11].formattedDatetime+"",p,$,b,h=s[11].formattedSize+"",N,O,Y,Q,z,g="Collect",y,L,S="Delete",w,F,H,j;n=new qe({props:{file:s[11],styleClass:"w-full h-36"}});let E=s[0]&&Pe(s);function fe(){return s[8](s[11])}function D(){return s[9](s[11])}return{c(){e=U("div"),t=U("div"),ae(n.$$.fragment),r=B(),l=U("p"),c=ee(i),f=B(),o=U("p"),p=ee(_),$=B(),b=U("p"),N=ee(h),O=B(),Y=U("div"),E&&E.c(),Q=B(),z=U("button"),z.textContent=g,y=B(),L=U("button"),L.textContent=S,w=B(),this.h()},l(u){e=I(u,"DIV",{class:!0});var a=V(e);t=I(a,"DIV",{class:!0});var m=V(t);oe(n.$$.fragment,m),m.forEach(M),r=A(a),l=I(a,"P",{class:!0});var d=V(l);c=te(d,i),d.forEach(M),f=A(a),o=I(a,"P",{class:!0});var k=V(o);p=te(k,_),k.forEach(M),$=A(a),b=I(a,"P",{class:!0});var C=V(b);N=te(C,h),C.forEach(M),O=A(a),Y=I(a,"DIV",{class:!0});var P=V(Y);E&&E.l(P),Q=A(P),z=I(P,"BUTTON",{class:!0,"data-svelte-h":!0}),le(z)!=="svelte-jct3zc"&&(z.textContent=g),y=A(P),L=I(P,"BUTTON",{class:!0,"data-svelte-h":!0}),le(L)!=="svelte-1t0nfha"&&(L.textContent=S),P.forEach(M),w=A(a),a.forEach(M),this.h()},h(){v(t,"class","flex items-center"),v(l,"class","font-bold max-h-12 leading-6 overflow-auto"),v(o,"class","text-gray-500"),v(b,"class","text-gray-500"),v(z,"class","btn btn-link btn-sm p-0 no-underline text-accent"),v(L,"class","btn btn-link btn-sm p-0 no-underline text-error"),v(Y,"class",""),v(e,"class","bg-base-100")},m(u,a){W(u,e,a),T(e,t),ce(n,t,null),T(e,r),T(e,l),T(l,c),T(e,f),T(e,o),T(o,p),T(e,$),T(e,b),T(b,N),T(e,O),T(e,Y),E&&E.m(Y,null),T(Y,Q),T(Y,z),T(Y,y),T(Y,L),T(e,w),F=!0,H||(j=[x(z,"click",fe),x(L,"click",D)],H=!0)},p(u,a){s=u;const m={};a&6&&(m.file=s[11]),n.$set(m),(!F||a&6)&&i!==(i=s[11].name+"")&&he(c,i),(!F||a&6)&&_!==(_=s[11].formattedDatetime+"")&&he(p,_),(!F||a&6)&&h!==(h=s[11].formattedSize+"")&&he(N,h),s[0]?E?E.p(s,a):(E=Pe(s),E.c(),E.m(Y,Q)):E&&(E.d(1),E=null)},i(u){F||(q(n.$$.fragment,u),F=!0)},o(u){Z(n.$$.fragment,u),F=!1},d(u){u&&M(e),ue(n),E&&E.d(),H=!1,ke(j)}}}function Pe(s){let e,t="Load",n,r;function l(){return s[7](s[11])}return{c(){e=U("button"),e.textContent=t,this.h()},l(i){e=I(i,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1ie7fpp"&&(e.textContent=t),this.h()},h(){v(e,"class","btn btn-link btn-sm p-0 no-underline text-accent")},m(i,c){W(i,e,c),n||(r=x(e,"click",l),n=!0)},p(i,c){s=i},d(i){i&&M(e),n=!1,r()}}}function He(s){let e=["image","video"].includes(s[11].fileType),t,n,r=e&&je(s);return{c(){r&&r.c(),t=me()},l(l){r&&r.l(l),t=me()},m(l,i){r&&r.m(l,i),W(l,t,i),n=!0},p(l,i){i&6&&(e=["image","video"].includes(l[11].fileType)),e?r?(r.p(l,i),i&6&&q(r,1)):(r=je(l),r.c(),q(r,1),r.m(t.parentNode,t)):r&&(Te(),Z(r,1,1,()=>{r=null}),De())},i(l){n||(q(r),n=!0)},o(l){Z(r),n=!1},d(l){l&&M(t),r&&r.d(l)}}}function ot(s){let e,t,n,r,l=$e(s[1].slice(0,s[2])),i=[];for(let o=0;o<l.length;o+=1)i[o]=He(Le(s,l,o));const c=o=>Z(i[o],1,1,()=>{i[o]=null});let f={};return n=new Re({props:f}),s[10](n),{c(){e=U("div");for(let o=0;o<i.length;o+=1)i[o].c();t=B(),ae(n.$$.fragment),this.h()},l(o){e=I(o,"DIV",{class:!0});var _=V(e);for(let p=0;p<i.length;p+=1)i[p].l(_);_.forEach(M),t=A(o),oe(n.$$.fragment,o),this.h()},h(){v(e,"class","grid grid-cols-4 lg:grid-cols-6 gap-2 bg-base-300")},m(o,_){W(o,e,_);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(e,null);W(o,t,_),ce(n,o,_),r=!0},p(o,[_]){if(_&63){l=$e(o[1].slice(0,o[2]));let $;for($=0;$<l.length;$+=1){const b=Le(o,l,$);i[$]?(i[$].p(b,_),q(i[$],1)):(i[$]=He(b),i[$].c(),q(i[$],1),i[$].m(e,null))}for(Te(),$=l.length;$<i.length;$+=1)c($);De()}const p={};n.$set(p)},i(o){if(!r){for(let _=0;_<l.length;_+=1)q(i[_]);q(n.$$.fragment,o),r=!0}},o(o){i=i.filter(Boolean);for(let _=0;_<i.length;_+=1)Z(i[_]);Z(n.$$.fragment,o),r=!1},d(o){o&&(M(e),M(t)),ze(i,o),s[10](null),ue(n,o)}}}function ct(s,e,t){let{comfyUrl:n}=e,r,l=[],i=20,c;Ae(async()=>{t(0,r=window.top.app),t(1,l=await Se("files",n)),window.addEventListener("scroll",()=>{t(2,i=We(i,l.length))})});async function f(h){const N=await fetch(n+"/browser/collections",{method:"POST",body:JSON.stringify({filename:h.name,folder_path:h.folder_path})});c.show(N.ok,"Added to collections","Failed to add to collections. Please check the ComfyUI server.")}async function o(h){if(!confirm("You will delete this file? "+h.name))return;const O=await fetch(n+"/browser/files",{method:"DELETE",body:JSON.stringify({type:"files",filename:h.name,folder_path:h.folder_path})});c.show(O.ok,"Deleted the file "+h.name,"Failed to delete the file. Please check the ComfyUI server."),t(1,l=l.filter(Y=>Y!=h))}const _=async h=>await Ge(h,r,c),p=async h=>await f(h),$=async h=>await o(h);function b(h){Ce[h?"unshift":"push"](()=>{c=h,t(3,c)})}return s.$$set=h=>{"comfyUrl"in h&&t(6,n=h.comfyUrl)},[r,l,i,c,f,o,n,_,p,$,b]}class ut extends pe{constructor(e){super(),be(this,e,ct,ot,_e,{comfyUrl:6})}}function Fe(s,e,t){const n=s.slice();return n[20]=e[t],n}function Ye(s){let e,t="Save",n,r;return{c(){e=U("button"),e.textContent=t,this.h()},l(l){e=I(l,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-vwqboa"&&(e.textContent=t),this.h()},h(){v(e,"class","btn btn-outline btn-accent")},m(l,i){W(l,e,i),n||(r=x(e,"click",s[7]),n=!0)},p:ne,d(l){l&&M(e),n=!1,r()}}}function Ve(s){let e,t="Load",n,r;function l(){return s[14](s[20])}return{c(){e=U("button"),e.textContent=t,this.h()},l(i){e=I(i,"BUTTON",{class:!0,"data-svelte-h":!0}),le(e)!=="svelte-1ie7fpp"&&(e.textContent=t),this.h()},h(){v(e,"class","btn btn-link btn-sm p-0 no-underline text-accent")},m(i,c){W(i,e,c),n||(r=x(e,"click",l),n=!0)},p(i,c){s=i},d(i){i&&M(e),n=!1,r()}}}function Be(s){let e,t,n,r,l,i,c,f,o=s[20].formattedDatetime+"",_,p,$=s[20].formattedSize+"",b,h,N,O,Y,Q="Remove",z,g,y,L,S,w,F,H;t=new qe({props:{file:s[20],styleClass:"w-36"}});function j(...u){return s[13](s[20],...u)}let E=s[0]&&Ve(s);function fe(){return s[15](s[20])}function D(...u){return s[16](s[20],...u)}return{c(){e=U("li"),ae(t.$$.fragment),n=B(),r=U("div"),l=U("input"),c=B(),f=U("p"),_=ee(o),p=ee(" | "),b=ee($),h=B(),N=U("div"),E&&E.c(),O=B(),Y=U("button"),Y.textContent=Q,z=B(),g=U("div"),y=U("textarea"),S=B(),this.h()},l(u){e=I(u,"LI",{class:!0});var a=V(e);oe(t.$$.fragment,a),n=A(a),r=I(a,"DIV",{class:!0});var m=V(r);l=I(m,"INPUT",{type:!0,class:!0}),c=A(m),f=I(m,"P",{class:!0});var d=V(f);_=te(d,o),p=te(d," | "),b=te(d,$),d.forEach(M),h=A(m),N=I(m,"DIV",{});var k=V(N);E&&E.l(k),O=A(k),Y=I(k,"BUTTON",{class:!0,"data-svelte-h":!0}),le(Y)!=="svelte-1mhg6fb"&&(Y.textContent=Q),k.forEach(M),m.forEach(M),z=A(a),g=I(a,"DIV",{});var C=V(g);y=I(C,"TEXTAREA",{name:!0,cols:!0,rows:!0,placeholder:!0,class:!0}),V(y).forEach(M),C.forEach(M),S=A(a),a.forEach(M),this.h()},h(){v(l,"type","text"),v(l,"class","input-bordered font-bold w-full bg-base-100"),l.value=i=s[20].name,v(f,"class","text-gray-500"),v(Y,"class","btn btn-link btn-sm p-0 no-underline text-error"),v(r,"class","space-y-2 w-72"),v(y,"name","notes"),v(y,"cols","40"),v(y,"rows","4"),v(y,"placeholder","write some memos..."),v(y,"class","resize-none textarea"),y.value=L=s[20].notes,v(e,"class","flex h-36 border-0 space-x-4 bg-base-100")},m(u,a){W(u,e,a),ce(t,e,null),T(e,n),T(e,r),T(r,l),T(r,c),T(r,f),T(f,_),T(f,p),T(f,b),T(r,h),T(r,N),E&&E.m(N,null),T(N,O),T(N,Y),T(e,z),T(e,g),T(g,y),T(e,S),w=!0,F||(H=[x(l,"blur",j),x(Y,"click",fe),x(y,"blur",D)],F=!0)},p(u,a){s=u;const m={};a&18&&(m.file=s[20]),t.$set(m),(!w||a&18&&i!==(i=s[20].name)&&l.value!==i)&&(l.value=i),(!w||a&18)&&o!==(o=s[20].formattedDatetime+"")&&he(_,o),(!w||a&18)&&$!==($=s[20].formattedSize+"")&&he(b,$),s[0]?E?E.p(s,a):(E=Ve(s),E.c(),E.m(N,O)):E&&(E.d(1),E=null),(!w||a&18&&L!==(L=s[20].notes))&&(y.value=L)},i(u){w||(q(t.$$.fragment,u),w=!0)},o(u){Z(t.$$.fragment,u),w=!1},d(u){u&&M(e),ue(t),E&&E.d(),F=!1,ke(H)}}}function ft(s){var z;let e,t,n,r,l,i="Sync",c,f,o,_,p,$,b,h=s[3]!=((z=s[2])==null?void 0:z.git_repo)&&Ye(s),N=$e(s[1].slice(0,s[4])),O=[];for(let g=0;g<N.length;g+=1)O[g]=Be(Fe(s,N,g));const Y=g=>Z(O[g],1,1,()=>{O[g]=null});let Q={};return _=new Re({props:Q}),s[17](_),{c(){e=U("div"),t=U("input"),n=B(),h&&h.c(),r=B(),l=U("button"),l.textContent=i,c=B(),f=U("ul");for(let g=0;g<O.length;g+=1)O[g].c();o=B(),ae(_.$$.fragment),this.h()},l(g){e=I(g,"DIV",{});var y=V(e);t=I(y,"INPUT",{type:!0,placeholder:!0,class:!0}),n=A(y),h&&h.l(y),r=A(y),l=I(y,"BUTTON",{class:!0,"data-svelte-h":!0}),le(l)!=="svelte-118xeor"&&(l.textContent=i),y.forEach(M),c=A(g),f=I(g,"UL",{class:!0});var L=V(f);for(let S=0;S<O.length;S+=1)O[S].l(L);L.forEach(M),o=A(g),oe(_.$$.fragment,g),this.h()},h(){v(t,"type","text"),v(t,"placeholder","Input your git repository address"),v(t,"class","input input-bordered w-full max-w-lg"),v(l,"class","btn btn-outline btn-accent"),v(f,"class","space-y-2 bg-base-300")},m(g,y){W(g,e,y),T(e,t),Oe(t,s[3]),T(e,n),h&&h.m(e,null),T(e,r),T(e,l),W(g,c,y),W(g,f,y);for(let L=0;L<O.length;L+=1)O[L]&&O[L].m(f,null);W(g,o,y),ce(_,g,y),p=!0,$||(b=[x(t,"input",s[12]),x(l,"click",s[6])],$=!0)},p(g,[y]){var S;if(y&8&&t.value!==g[3]&&Oe(t,g[3]),g[3]!=((S=g[2])==null?void 0:S.git_repo)?h?h.p(g,y):(h=Ye(g),h.c(),h.m(e,r)):h&&(h.d(1),h=null),y&1843){N=$e(g[1].slice(0,g[4]));let w;for(w=0;w<N.length;w+=1){const F=Fe(g,N,w);O[w]?(O[w].p(F,y),q(O[w],1)):(O[w]=Be(F),O[w].c(),q(O[w],1),O[w].m(f,null))}for(Te(),w=N.length;w<O.length;w+=1)Y(w);De()}const L={};_.$set(L)},i(g){if(!p){for(let y=0;y<N.length;y+=1)q(O[y]);q(_.$$.fragment,g),p=!0}},o(g){O=O.filter(Boolean);for(let y=0;y<O.length;y+=1)Z(O[y]);Z(_.$$.fragment,g),p=!1},d(g){g&&(M(e),M(c),M(f),M(o)),h&&h.d(),ze(O,g),s[17](null),ue(_,g),$=!1,ke(b)}}}function dt(s,e,t){let{comfyUrl:n}=e,r,l=[],i={},c="",f=20,o;Ae(async()=>{t(0,r=window.top.app),t(1,l=await Se("collections",n)),t(2,i=await _()||{}),t(3,c=i==null?void 0:i.git_repo),window.addEventListener("scroll",()=>{t(4,f=We(f,l.length))})});async function _(){return await(await fetch(n+"/browser/config")).json()}async function p(S){const w=S.target;w.disabled=!0,w.innerHTML="Syncing...";const F=await fetch(n+"/browser/collections/sync",{method:"POST"});o.show(F.ok,"Synced","Failed to sync. Please check the ComfyUI server."),w.disabled=!1,w.innerHTML="Sync",t(1,l=await Se("collections",n))}async function $(){const S=await fetch(n+"/browser/config",{method:"PUT",body:JSON.stringify({git_repo:c})});o.show(S.ok,"Updated config","Failed to update config. Please check the ComfyUI server.")}async function b(S){if(!confirm("You will delete this file? "+S.name))return;const F=await fetch(n+"/browser/files",{method:"DELETE",body:JSON.stringify({type:"collections",filename:S.name,folder_path:S.folder_path})});o.show(F.ok,"Deleted the file "+S.name,"Failed to delete the file. Please check the ComfyUI server."),t(1,l=l.filter(H=>H!=S))}async function h(S,w){return(await fetch(n+"/browser/collections/"+S.name,{method:"PUT",body:JSON.stringify(w)})).ok}async function N(S,w){const F=S.target.value;if(F===w.name)return;const H=await h(w,{filename:F,notes:w.notes||"",folder_path:w.folder_path});o.show(H,"Updated","Failed to update. Please check the ComfyUI server.")}async function O(S,w){const F=S.target.value;if(F==w.notes)return;const H=await h(w,{filename:w.name,notes:F,folder_path:w.folder_path});o.show(H,"Updated","Failed to update. Please check the ComfyUI server.")}function Y(){c=this.value,t(3,c)}const Q=(S,w)=>N(w,S),z=async S=>await Ge(S,r,o),g=async S=>await b(S),y=(S,w)=>O(w,S);function L(S){Ce[S?"unshift":"push"](()=>{o=S,t(5,o)})}return s.$$set=S=>{"comfyUrl"in S&&t(11,n=S.comfyUrl)},[r,l,i,c,f,o,p,$,b,N,O,n,Y,Q,z,g,y,L]}class ht extends pe{constructor(e){super(),be(this,e,dt,ft,_e,{comfyUrl:11})}}function mt(s){let e,t;return e=new ut({props:{comfyUrl:s[1]}}),{c(){ae(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,r){ce(e,n,r),t=!0},p:ne,i(n){t||(q(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function _t(s){let e,t;return e=new ht({props:{comfyUrl:s[1]}}),{c(){ae(e.$$.fragment)},l(n){oe(e.$$.fragment,n)},m(n,r){ce(e,n,r),t=!0},p:ne,i(n){t||(q(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function pt(s){let e,t,n,r,l,i,c;function f(b){s[3](b)}let o={};s[0]!==void 0&&(o.activeTab=s[0]),e=new xe({props:o}),Ce.push(()=>Ke(e,"activeTab",f));const _=[_t,mt],p=[];function $(b,h){return b[0]==="collections"?0:1}return r=$(s),l=p[r]=_[r](s),{c(){ae(e.$$.fragment),n=B(),l.c(),i=me()},l(b){oe(e.$$.fragment,b),n=A(b),l.l(b),i=me()},m(b,h){ce(e,b,h),W(b,n,h),p[r].m(b,h),W(b,i,h),c=!0},p(b,[h]){const N={};!t&&h&1&&(t=!0,N.activeTab=b[0],Ze(()=>t=!1)),e.$set(N);let O=r;r=$(b),r===O?p[r].p(b,h):(Te(),Z(p[O],1,1,()=>{p[O]=null}),De(),l=p[r],l?l.p(b,h):(l=p[r]=_[r](b),l.c()),q(l,1),l.m(i.parentNode,i))},i(b){c||(q(e.$$.fragment,b),q(l),c=!0)},o(b){Z(e.$$.fragment,b),Z(l),c=!1},d(b){b&&(M(n),M(i)),ue(e,b),p[r].d(b)}}}function bt(s,e,t){let{data:n}=e;const{comfyUrl:r}=n;let l="outputs";function i(c){l=c,t(0,l)}return s.$$set=c=>{"data"in c&&t(2,n=c.data)},[l,r,n,i]}class wt extends pe{constructor(e){super(),be(this,e,bt,pt,_e,{data:2})}}export{wt as component};
