import{s as Ee,n as me,r as Ie,f as ye,o as Be,b as Ue,h as gt}from"../chunks/scheduler.89bf212d.js";import{S as Se,i as De,g as w,y as ge,m as se,s as W,h as k,j as O,z as we,f as p,n as re,c as G,A as ce,k as i,a as Z,x as f,B as le,e as Ce,o as fe,l as Je,C as Te,d as ie,p as Ve,b as Fe,t as ae,D as Le,r as _e,u as pe,v as ve,w as be,E as wt}from"../chunks/index.6b8f49fb.js";function de(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}var Ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function It(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kt={exports:{}};(function(t,e){(function(l,n){t.exports=n()})(Ut,function(){var l=1e3,n=6e4,r=36e5,s="millisecond",o="second",a="minute",h="hour",m="day",E="week",C="month",P="quarter",y="year",V="date",A="Invalid Date",J=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,j={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var d=["th","st","nd","rd"],v=M%100;return"["+M+(d[(v-20)%10]||d[v]||d[0])+"]"}},U=function(M,d,v){var u=String(M);return!u||u.length>=d?M:""+Array(d+1-u.length).join(v)+M},R={s:U,z:function(M){var d=-M.utcOffset(),v=Math.abs(d),u=Math.floor(v/60),b=v%60;return(d<=0?"+":"-")+U(u,2,"0")+":"+U(b,2,"0")},m:function M(d,v){if(d.date()<v.date())return-M(v,d);var u=12*(v.year()-d.year())+(v.month()-d.month()),b=d.clone().add(u,C),L=v-b<0,c=d.clone().add(u+(L?-1:1),C);return+(-(u+(v-b)/(L?b-c:c-b))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:C,y,w:E,d:m,D:V,h,m:a,s:o,ms:s,Q:P}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},N="en",_={};_[N]=j;var H="$isDayjsObject",T=function(M){return M instanceof g||!(!M||!M[H])},I=function M(d,v,u){var b;if(!d)return N;if(typeof d=="string"){var L=d.toLowerCase();_[L]&&(b=L),v&&(_[L]=v,b=L);var c=d.split("-");if(!b&&c.length>1)return M(c[0])}else{var $=d.name;_[$]=d,b=$}return!u&&b&&(N=b),b||!u&&N},z=function(M,d){if(T(M))return M.clone();var v=typeof d=="object"?d:{};return v.date=M,v.args=arguments,new g(v)},D=R;D.l=I,D.i=T,D.w=function(M,d){return z(M,{locale:d.$L,utc:d.$u,x:d.$x,$offset:d.$offset})};var g=function(){function M(v){this.$L=I(v.locale,null,!0),this.parse(v),this.$x=this.$x||v.x||{},this[H]=!0}var d=M.prototype;return d.parse=function(v){this.$d=function(u){var b=u.date,L=u.utc;if(b===null)return new Date(NaN);if(D.u(b))return new Date;if(b instanceof Date)return new Date(b);if(typeof b=="string"&&!/Z$/i.test(b)){var c=b.match(J);if(c){var $=c[2]-1||0,q=(c[7]||"0").substring(0,3);return L?new Date(Date.UTC(c[1],$,c[3]||1,c[4]||0,c[5]||0,c[6]||0,q)):new Date(c[1],$,c[3]||1,c[4]||0,c[5]||0,c[6]||0,q)}}return new Date(b)}(v),this.init()},d.init=function(){var v=this.$d;this.$y=v.getFullYear(),this.$M=v.getMonth(),this.$D=v.getDate(),this.$W=v.getDay(),this.$H=v.getHours(),this.$m=v.getMinutes(),this.$s=v.getSeconds(),this.$ms=v.getMilliseconds()},d.$utils=function(){return D},d.isValid=function(){return this.$d.toString()!==A},d.isSame=function(v,u){var b=z(v);return this.startOf(u)<=b&&b<=this.endOf(u)},d.isAfter=function(v,u){return z(v)<this.startOf(u)},d.isBefore=function(v,u){return this.endOf(u)<z(v)},d.$g=function(v,u,b){return D.u(v)?this[u]:this.set(b,v)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(v,u){var b=this,L=!!D.u(u)||u,c=D.p(v),$=function(ue,Q){var B=D.w(b.$u?Date.UTC(b.$y,Q,ue):new Date(b.$y,Q,ue),b);return L?B:B.endOf(m)},q=function(ue,Q){return D.w(b.toDate()[ue].apply(b.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(Q)),b)},K=this.$W,Y=this.$M,x=this.$D,X="set"+(this.$u?"UTC":"");switch(c){case y:return L?$(1,0):$(31,11);case C:return L?$(1,Y):$(0,Y+1);case E:var he=this.$locale().weekStart||0,ne=(K<he?K+7:K)-he;return $(L?x-ne:x+(6-ne),Y);case m:case V:return q(X+"Hours",0);case h:return q(X+"Minutes",1);case a:return q(X+"Seconds",2);case o:return q(X+"Milliseconds",3);default:return this.clone()}},d.endOf=function(v){return this.startOf(v,!1)},d.$set=function(v,u){var b,L=D.p(v),c="set"+(this.$u?"UTC":""),$=(b={},b[m]=c+"Date",b[V]=c+"Date",b[C]=c+"Month",b[y]=c+"FullYear",b[h]=c+"Hours",b[a]=c+"Minutes",b[o]=c+"Seconds",b[s]=c+"Milliseconds",b)[L],q=L===m?this.$D+(u-this.$W):u;if(L===C||L===y){var K=this.clone().set(V,1);K.$d[$](q),K.init(),this.$d=K.set(V,Math.min(this.$D,K.daysInMonth())).$d}else $&&this.$d[$](q);return this.init(),this},d.set=function(v,u){return this.clone().$set(v,u)},d.get=function(v){return this[D.p(v)]()},d.add=function(v,u){var b,L=this;v=Number(v);var c=D.p(u),$=function(Y){var x=z(L);return D.w(x.date(x.date()+Math.round(Y*v)),L)};if(c===C)return this.set(C,this.$M+v);if(c===y)return this.set(y,this.$y+v);if(c===m)return $(1);if(c===E)return $(7);var q=(b={},b[a]=n,b[h]=r,b[o]=l,b)[c]||1,K=this.$d.getTime()+v*q;return D.w(K,this)},d.subtract=function(v,u){return this.add(-1*v,u)},d.format=function(v){var u=this,b=this.$locale();if(!this.isValid())return b.invalidDate||A;var L=v||"YYYY-MM-DDTHH:mm:ssZ",c=D.z(this),$=this.$H,q=this.$m,K=this.$M,Y=b.weekdays,x=b.months,X=b.meridiem,he=function(Q,B,te,oe){return Q&&(Q[B]||Q(u,L))||te[B].slice(0,oe)},ne=function(Q){return D.s($%12||12,Q,"0")},ue=X||function(Q,B,te){var oe=Q<12?"AM":"PM";return te?oe.toLowerCase():oe};return L.replace(S,function(Q,B){return B||function(te){switch(te){case"YY":return String(u.$y).slice(-2);case"YYYY":return D.s(u.$y,4,"0");case"M":return K+1;case"MM":return D.s(K+1,2,"0");case"MMM":return he(b.monthsShort,K,x,3);case"MMMM":return he(x,K);case"D":return u.$D;case"DD":return D.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return he(b.weekdaysMin,u.$W,Y,2);case"ddd":return he(b.weekdaysShort,u.$W,Y,3);case"dddd":return Y[u.$W];case"H":return String($);case"HH":return D.s($,2,"0");case"h":return ne(1);case"hh":return ne(2);case"a":return ue($,q,!0);case"A":return ue($,q,!1);case"m":return String(q);case"mm":return D.s(q,2,"0");case"s":return String(u.$s);case"ss":return D.s(u.$s,2,"0");case"SSS":return D.s(u.$ms,3,"0");case"Z":return c}return null}(Q)||c.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(v,u,b){var L,c=this,$=D.p(u),q=z(v),K=(q.utcOffset()-this.utcOffset())*n,Y=this-q,x=function(){return D.m(c,q)};switch($){case y:L=x()/12;break;case C:L=x();break;case P:L=x()/3;break;case E:L=(Y-K)/6048e5;break;case m:L=(Y-K)/864e5;break;case h:L=Y/r;break;case a:L=Y/n;break;case o:L=Y/l;break;default:L=Y}return b?L:D.a(L)},d.daysInMonth=function(){return this.endOf(C).$D},d.$locale=function(){return _[this.$L]},d.locale=function(v,u){if(!v)return this.$L;var b=this.clone(),L=I(v,u,!0);return L&&(b.$L=L),b},d.clone=function(){return D.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},M}(),F=g.prototype;return z.prototype=F,[["$ms",s],["$s",o],["$m",a],["$H",h],["$W",m],["$M",C],["$y",y],["$D",V]].forEach(function(M){F[M[1]]=function(d){return this.$g(d,M[0],M[1])}}),z.extend=function(M,d){return M.$i||(M(d,g,z),M.$i=!0),z},z.locale=I,z.isDayjs=T,z.unix=function(M){return z(1e3*M)},z.en=_[N],z.Ls=_,z.p={},z})})(kt);var $t=kt.exports;const yt=It($t),We=["png","webp","jpeg","jpg","gif"],Ge=["mp4","webm","mov","avi","mkv"],qe=["json"],Tt="comfyui-browser";function Ze(t,e,l){let n=t.split(".");return n.pop(),n=n.join("."),l.find(r=>{const s=r.name.split("."),o=s.pop().toLowerCase();return s.join(".")===n&&e.includes(o)})}function Lt(t,e,l,n){const r=t.name.split(".").pop().toLowerCase();if(qe.includes(r)&&(t.fileType="json",Ze(t.name,We.concat(Ge),n))||(We.includes(r)&&(t.fileType="image"),Ge.includes(r)&&(t.fileType="video"),!t.fileType))return;if(t.url=`${l}/browser/files/view?folder_type=${e}&filename=${t.name}&folder_path=${t.folder_path}`,["image","video"].includes(t.fileType)){t.previewUrl=`${l}/browser/files/view?folder_type=${e}&filename=${t.name}&folder_path=${t.folder_path}`;let o=Ze(t.name,qe,n);o&&(t.url=`${l}/browser/files/view?folder_type=${e}&filename=${o.name}&folder_path=${o.folder_path}`)}const s=yt.unix(t.created_at);return t.formattedDatetime=s.format("YYYY-MM-DD HH-mm-ss"),t.bytes/1024/1024>1?t.formattedSize=(t.bytes/1024/1024).toFixed(2)+" MB":t.formattedSize=Math.round(t.bytes/1024)+" KB",t}function Ot(t){t.fileType="dir";const e=t.folder_path?`${t.folder_path}/${t.name}`:t.name;t.path=e;const l=yt.unix(t.created_at);return t.formattedDatetime=l.format("YYYY-MM-DD HH-mm-ss"),t.formattedSize="0 KB",t}async function Ae(t,e,l){let n=e+"/browser/files?folder_type="+t;l&&(n=n+`&folder_path=${l}&`);let o=(await(await fetch(n)).json()).files,a=[];return o.forEach(h=>{let m;h.type==="dir"?m=Ot(h):m=Lt(h,t,e,o),m&&a.push(m)}),a}function Ct(t,e){if(t>=e)return t;const l=document.documentElement.scrollHeight;return window.innerHeight+window.scrollY>=l?t+10:t}async function Et(t,e,l){const n=await fetch(t.url),r=await n.blob(),s=new File([r],t.name,{type:n.headers.get("Content-Type")||""}),o=e.loadGraphData.bind(e);e.loadGraphData=async function(a){var m;const h=(m=window.top)==null?void 0:m.document.getElementById("comfy-browser-dialog");h&&(h.style.display="none"),await o(a)},await e.handleFile(s),l.show(!1,"Loaded","No workflow found here")}function St(){let t=localStorage.getItem(Tt),e={};return t&&(e=JSON.parse(t)),e}function jt(t,e){let l=St();l[t]=e,localStorage.setItem(Tt,JSON.stringify(l))}function Nt(t){let e,l,n,r,s,o,a,h,m,E,C,P,y,V,A,J,S,j,U,R,N,_,H,T,I='<a href="https://github.com/talesofai/comfyui-browser" target="_blank"><img src="https://img.shields.io/github/stars/talesofai/comfyui-browser?style=social" alt="stars - comfyui-browser"/></a>',z,D;return{c(){e=w("div"),l=w("ul"),n=w("li"),r=w("button"),s=ge("svg"),o=ge("path"),a=se(`
        Outputs`),m=W(),E=w("li"),C=w("button"),P=ge("svg"),y=ge("path"),V=se(`
        Saves`),J=W(),S=w("li"),j=w("button"),U=ge("svg"),R=ge("path"),N=se(`
        Sources`),H=W(),T=w("div"),T.innerHTML=I,this.h()},l(g){e=k(g,"DIV",{class:!0});var F=O(e);l=k(F,"UL",{class:!0});var M=O(l);n=k(M,"LI",{});var d=O(n);r=k(d,"BUTTON",{class:!0});var v=O(r);s=we(v,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var u=O(s);o=we(u,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),O(o).forEach(p),u.forEach(p),a=re(v,`
        Outputs`),v.forEach(p),d.forEach(p),m=G(M),E=k(M,"LI",{});var b=O(E);C=k(b,"BUTTON",{class:!0});var L=O(C);P=we(L,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=O(P);y=we(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),O(y).forEach(p),c.forEach(p),V=re(L,`
        Saves`),L.forEach(p),b.forEach(p),J=G(M),S=k(M,"LI",{});var $=O(S);j=k($,"BUTTON",{class:!0});var q=O(j);U=we(q,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var K=O(U);R=we(K,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),O(R).forEach(p),K.forEach(p),N=re(q,`
        Sources`),q.forEach(p),$.forEach(p),M.forEach(p),H=G(F),T=k(F,"DIV",{class:!0,"data-svelte-h":!0}),ce(T)!=="svelte-1ihc90r"&&(T.innerHTML=I),F.forEach(p),this.h()},h(){i(o,"stroke-linecap","round"),i(o,"stroke-linejoin","round"),i(o,"d","M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"),i(s,"xmlns","http://www.w3.org/2000/svg"),i(s,"fill","none"),i(s,"viewBox","0 0 24 24"),i(s,"stroke-width","1.5"),i(s,"stroke","currentColor"),i(s,"class","w-5 h-5"),i(r,"class",h=t[0]("outputs")),i(y,"stroke-linecap","round"),i(y,"stroke-linejoin","round"),i(y,"d","M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"),i(P,"xmlns","http://www.w3.org/2000/svg"),i(P,"fill","none"),i(P,"viewBox","0 0 24 24"),i(P,"stroke-width","1.5"),i(P,"stroke","currentColor"),i(P,"class","w-5 h-5"),i(C,"class",A=t[0]("collections")),i(R,"stroke-linecap","round"),i(R,"stroke-linejoin","round"),i(R,"d","M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"),i(U,"xmlns","http://www.w3.org/2000/svg"),i(U,"fill","none"),i(U,"viewBox","0 0 24 24"),i(U,"stroke-width","1.5"),i(U,"stroke","currentColor"),i(U,"class","w-5 h-5"),i(j,"class",_=t[0]("sources")),i(l,"class","menu menu-horizontal bg-base-200 rounded-box flex-1"),i(T,"class","hidden sm:flex flex-0 items-center justify-center p-2"),i(e,"class","flex")},m(g,F){Z(g,e,F),f(e,l),f(l,n),f(n,r),f(r,s),f(s,o),f(r,a),f(l,m),f(l,E),f(E,C),f(C,P),f(P,y),f(C,V),f(l,J),f(l,S),f(S,j),f(j,U),f(U,R),f(j,N),f(e,H),f(e,T),z||(D=[le(r,"click",t[3]),le(C,"click",t[4]),le(j,"click",t[5])],z=!0)},p(g,[F]){F&1&&h!==(h=g[0]("outputs"))&&i(r,"class",h),F&1&&A!==(A=g[0]("collections"))&&i(C,"class",A),F&1&&_!==(_=g[0]("sources"))&&i(j,"class",_)},i:me,o:me,d(g){g&&p(e),z=!1,Ie(D)}}}function Pt(t,e,l){let n,{activeTab:r="outputs"}=e;async function s(m){l(2,r=m),jt("lastTab",m)}const o=()=>s("outputs"),a=()=>s("collections"),h=()=>s("sources");return t.$$set=m=>{"activeTab"in m&&l(2,r=m.activeTab)},t.$$.update=()=>{t.$$.dirty&4&&l(0,n=function(m){return m===r?"active":""})},[n,s,r,o,a,h]}class Ht extends Se{constructor(e){super(),De(this,e,Pt,Nt,Ee,{activeTab:2})}}function Ke(t){let e,l,n,r,s;return{c(){e=w("div"),l=w("div"),n=w("span"),r=se(t[2]),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=O(e);l=k(a,"DIV",{class:!0});var h=O(l);n=k(h,"SPAN",{});var m=O(n);r=re(m,t[2]),m.forEach(p),h.forEach(p),a.forEach(p),this.h()},h(){i(l,"class",s="alert "+(t[1]?"alert-success":"alert-error")),i(e,"class","toast toast-center")},m(o,a){Z(o,e,a),f(e,l),f(l,n),f(n,r)},p(o,a){a&4&&fe(r,o[2]),a&2&&s!==(s="alert "+(o[1]?"alert-success":"alert-error"))&&i(l,"class",s)},d(o){o&&p(e)}}}function Bt(t){let e,l=t[0]&&Ke(t);return{c(){l&&l.c(),e=Ce()},l(n){l&&l.l(n),e=Ce()},m(n,r){l&&l.m(n,r),Z(n,e,r)},p(n,[r]){n[0]?l?l.p(n,r):(l=Ke(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:me,o:me,d(n){n&&p(e),l&&l.d(n)}}}function Vt(t,e,l){let{showToast:n=!1}=e,{toastSuccess:r=!0}=e,{toastText:s=""}=e;function o(a,h,m,E=2e3){l(1,r=a),l(2,s=a?h:m),l(0,n=!0),setTimeout(()=>l(0,n=!1),E)}return t.$$set=a=>{"showToast"in a&&l(0,n=a.showToast),"toastSuccess"in a&&l(1,r=a.toastSuccess),"toastText"in a&&l(2,s=a.toastText)},[n,r,s,o]}class ze extends Se{constructor(e){super(),De(this,e,Vt,Bt,Ee,{showToast:0,toastSuccess:1,toastText:2,show:3})}get show(){return this.$$.ctx[3]}}function Ft(t){let e,l,n,r,s=t[0].fileType==="json"&&Xe(),o=t[0].fileType==="image"&&Qe(t),a=t[0].fileType==="video"&&xe(t);return{c(){e=w("a"),s&&s.c(),l=W(),o&&o.c(),n=W(),a&&a.c(),this.h()},l(h){e=k(h,"A",{href:!0,target:!0,style:!0});var m=O(e);s&&s.l(m),l=G(m),o&&o.l(m),n=G(m),a&&a.l(m),m.forEach(p),this.h()},h(){i(e,"href",r=t[0].url),i(e,"target","_blank"),Je(e,"height","inherit"),Je(e,"width","inherit")},m(h,m){Z(h,e,m),s&&s.m(e,null),f(e,l),o&&o.m(e,null),f(e,n),a&&a.m(e,null)},p(h,m){h[0].fileType==="json"?s||(s=Xe(),s.c(),s.m(e,l)):s&&(s.d(1),s=null),h[0].fileType==="image"?o?o.p(h,m):(o=Qe(h),o.c(),o.m(e,n)):o&&(o.d(1),o=null),h[0].fileType==="video"?a?a.p(h,m):(a=xe(h),a.c(),a.m(e,null)):a&&(a.d(1),a=null),m&1&&r!==(r=h[0].url)&&i(e,"href",r)},d(h){h&&p(e),s&&s.d(),o&&o.d(),a&&a.d()}}}function At(t){let e,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"></path></svg>',n,r;return{c(){e=w("button"),e.innerHTML=l,this.h()},l(s){e=k(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-fq6lbl"&&(e.innerHTML=l),this.h()},h(){i(e,"class","w-full h-full flex items-center justify-center")},m(s,o){Z(s,e,o),n||(r=le(e,"click",t[3]),n=!0)},p:me,d(s){s&&p(e),n=!1,r()}}}function Xe(t){let e,l='<span class="font-bold text-xl">JSON</span>';return{c(){e=w("div"),e.innerHTML=l,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-opd4jy"&&(e.innerHTML=l),this.h()},h(){i(e,"class","w-full h-full flex items-center justify-center")},m(n,r){Z(n,e,r)},d(n){n&&p(e)}}}function Qe(t){let e,l,n;return{c(){e=w("img"),this.h()},l(r){e=k(r,"IMG",{class:!0,loading:!0,src:!0,alt:!0}),this.h()},h(){i(e,"class","h-full w-full object-contain"),i(e,"loading","lazy"),ye(e.src,l=t[0].previewUrl)||i(e,"src",l),i(e,"alt",n=t[0].name)},m(r,s){Z(r,e,s)},p(r,s){s&1&&!ye(e.src,l=r[0].previewUrl)&&i(e,"src",l),s&1&&n!==(n=r[0].name)&&i(e,"alt",n)},d(r){r&&p(e)}}}function xe(t){let e,l,n;return{c(){e=w("video"),l=w("track"),this.h()},l(r){e=k(r,"VIDEO",{class:!0,src:!0});var s=O(e);l=k(s,"TRACK",{kind:!0}),s.forEach(p),this.h()},h(){i(l,"kind","captions"),i(e,"class","h-full w-full object-contain pb-0.5 border-0.5 border-black"),ye(e.src,n=t[0].previewUrl)||i(e,"src",n),e.loop=!0,e.autoplay=!0,e.muted=!0},m(r,s){Z(r,e,s),f(e,l)},p(r,s){s&1&&!ye(e.src,n=r[0].previewUrl)&&i(e,"src",n)},d(r){r&&p(e)}}}function zt(t){let e;function l(s,o){return s[0].type==="dir"?At:Ft}let n=l(t),r=n(t);return{c(){e=w("div"),r.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=O(e);r.l(o),o.forEach(p),this.h()},h(){i(e,"class",t[1])},m(s,o){Z(s,e,o),r.m(e,null)},p(s,[o]){n===(n=l(s))&&r?r.p(s,o):(r.d(1),r=n(s),r&&(r.c(),r.m(e,null))),o&2&&i(e,"class",s[1])},i:me,o:me,d(s){s&&p(e),r.d()}}}function Yt(t,e,l){let{file:n}=e,{styleClass:r}=e,{onClickDir:s}=e;const o=()=>s(n);return t.$$set=a=>{"file"in a&&l(0,n=a.file),"styleClass"in a&&l(1,r=a.styleClass),"onClickDir"in a&&l(2,s=a.onClickDir)},[n,r,s,o]}class Dt extends Se{constructor(e){super(),De(this,e,Yt,zt,Ee,{file:0,styleClass:1,onClickDir:2})}}function et(t,e,l){const n=t.slice();return n[22]=e[l],n}function tt(t,e,l){const n=t.slice();return n[25]=e[l],n[27]=l,n}function lt(t){let e,l,n=t[25]+"",r,s,o;function a(){return t[16](t[27])}return{c(){e=w("li"),l=w("button"),r=se(n)},l(h){e=k(h,"LI",{});var m=O(e);l=k(m,"BUTTON",{});var E=O(l);r=re(E,n),E.forEach(p),m.forEach(p)},m(h,m){Z(h,e,m),f(e,l),f(l,r),s||(o=le(l,"click",a),s=!0)},p(h,m){t=h,m&1&&n!==(n=t[25]+"")&&fe(r,n)},d(h){h&&p(e),s=!1,o()}}}function nt(t){let e,l,n,r,s,o=t[22].name+"",a,h,m,E=t[22].formattedDatetime+"",C,P,y,V=t[22].formattedSize+"",A,J,S,j,U,R="Save",N,_,H="Delete",T,I,z,D;n=new Dt({props:{file:t[22],styleClass:"w-full h-16 sm:h-36",onClickDir:t[10]}});let g=t[3]&&t[22].type!="dir"&&st(t);function F(){return t[20](t[22])}function M(){return t[21](t[22])}return{c(){e=w("div"),l=w("div"),_e(n.$$.fragment),r=W(),s=w("p"),a=se(o),h=W(),m=w("p"),C=se(E),P=W(),y=w("p"),A=se(V),J=W(),S=w("div"),g&&g.c(),j=W(),U=w("button"),U.textContent=R,N=W(),_=w("button"),_.textContent=H,T=W(),this.h()},l(d){e=k(d,"DIV",{class:!0});var v=O(e);l=k(v,"DIV",{class:!0});var u=O(l);pe(n.$$.fragment,u),u.forEach(p),r=G(v),s=k(v,"P",{class:!0});var b=O(s);a=re(b,o),b.forEach(p),h=G(v),m=k(v,"P",{class:!0});var L=O(m);C=re(L,E),L.forEach(p),P=G(v),y=k(v,"P",{class:!0});var c=O(y);A=re(c,V),c.forEach(p),J=G(v),S=k(v,"DIV",{class:!0});var $=O(S);g&&g.l($),j=G($),U=k($,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(U)!=="svelte-19fo4xl"&&(U.textContent=R),N=G($),_=k($,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(_)!=="svelte-1t0nfha"&&(_.textContent=H),$.forEach(p),T=G(v),v.forEach(p),this.h()},h(){i(l,"class","flex items-center"),i(s,"class","font-bold max-h-12 leading-6 overflow-auto mt-1"),i(m,"class","hidden sm:block text-gray-500 text-xs"),i(y,"class","hidden sm:block text-gray-500 text-xs"),i(U,"class","btn btn-link btn-sm p-0 no-underline text-accent"),i(_,"class","btn btn-link btn-sm p-0 no-underline text-error"),i(S,"class",""),i(e,"class","p-2 bg-info-content")},m(d,v){Z(d,e,v),f(e,l),ve(n,l,null),f(e,r),f(e,s),f(s,a),f(e,h),f(e,m),f(m,C),f(e,P),f(e,y),f(y,A),f(e,J),f(e,S),g&&g.m(S,null),f(S,j),f(S,U),f(S,N),f(S,_),f(e,T),I=!0,z||(D=[le(U,"click",F),le(_,"click",M)],z=!0)},p(d,v){t=d;const u={};v&208&&(u.file=t[22]),n.$set(u),(!I||v&208)&&o!==(o=t[22].name+"")&&fe(a,o),(!I||v&208)&&E!==(E=t[22].formattedDatetime+"")&&fe(C,E),(!I||v&208)&&V!==(V=t[22].formattedSize+"")&&fe(A,V),t[3]&&t[22].type!="dir"?g?g.p(t,v):(g=st(t),g.c(),g.m(S,j)):g&&(g.d(1),g=null)},i(d){I||(ie(n.$$.fragment,d),I=!0)},o(d){ae(n.$$.fragment,d),I=!1},d(d){d&&p(e),be(n),g&&g.d(),z=!1,Ie(D)}}}function st(t){let e,l="Load",n,r;function s(){return t[19](t[22])}return{c(){e=w("button"),e.textContent=l,this.h()},l(o){e=k(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1ie7fpp"&&(e.textContent=l),this.h()},h(){i(e,"class","btn btn-link btn-sm p-0 no-underline text-accent")},m(o,a){Z(o,e,a),n||(r=le(e,"click",s),n=!0)},p(o,a){t=o},d(o){o&&p(e),n=!1,r()}}}function rt(t){let e=["dir","image","video","json"].includes(t[22].fileType),l,n,r=e&&nt(t);return{c(){r&&r.c(),l=Ce()},l(s){r&&r.l(s),l=Ce()},m(s,o){r&&r.m(s,o),Z(s,l,o),n=!0},p(s,o){o&208&&(e=["dir","image","video","json"].includes(s[22].fileType)),e?r?(r.p(s,o),o&208&&ie(r,1)):(r=nt(s),r.c(),ie(r,1),r.m(l.parentNode,l)):r&&(Ve(),ae(r,1,1,()=>{r=null}),Fe())},i(s){n||(ie(r),n=!0)},o(s){ae(r),n=!1},d(s){s&&p(l),r&&r.d(s)}}}function ot(t){let e,l;function n(o,a){return o[5]?Jt:Rt}let r=n(t),s=r(t);return{c(){e=w("div"),l=w("span"),s.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=O(e);l=k(a,"SPAN",{class:!0});var h=O(l);s.l(h),h.forEach(p),a.forEach(p),this.h()},h(){i(l,"class","font-bold text-4xl"),i(e,"class","w-full h-full flex items-center justify-center")},m(o,a){Z(o,e,a),f(e,l),s.m(l,null)},p(o,a){r!==(r=n(o))&&(s.d(1),s=r(o),s&&(s.c(),s.m(l,null)))},d(o){o&&p(e),s.d()}}}function Rt(t){let e;return{c(){e=se("Loading ...")},l(l){e=re(l,"Loading ...")},m(l,n){Z(l,e,n)},d(l){l&&p(e)}}}function Jt(t){let e;return{c(){e=se("It's empty here.")},l(l){e=re(l,"It's empty here.")},m(l,n){Z(l,e,n)},d(l){l&&p(e)}}}function Wt(t){let e,l,n,r,s="Root",o,a,h,m,E,C,P,y,V,A,J=de((t[0]||"").split("/")),S=[];for(let _=0;_<J.length;_+=1)S[_]=lt(tt(t,J,_));let j=de(t[4].filter(t[18]).slice(0,t[6])),U=[];for(let _=0;_<j.length;_+=1)U[_]=rt(et(t,j,_));const R=_=>ae(U[_],1,1,()=>{U[_]=null});let N=t[4].length===0&&ot(t);return{c(){e=w("div"),l=w("ul"),n=w("li"),r=w("button"),r.textContent=s,o=W();for(let _=0;_<S.length;_+=1)S[_].c();a=W(),h=w("input"),m=W(),E=w("div");for(let _=0;_<U.length;_+=1)U[_].c();C=W(),N&&N.c(),P=Ce(),this.h()},l(_){e=k(_,"DIV",{class:!0});var H=O(e);l=k(H,"UL",{class:!0});var T=O(l);n=k(T,"LI",{});var I=O(n);r=k(I,"BUTTON",{"data-svelte-h":!0}),ce(r)!=="svelte-1paj67z"&&(r.textContent=s),I.forEach(p),o=G(T);for(let D=0;D<S.length;D+=1)S[D].l(T);T.forEach(p),a=G(H),h=k(H,"INPUT",{type:!0,placeholder:!0,class:!0}),H.forEach(p),m=G(_),E=k(_,"DIV",{class:!0});var z=O(E);for(let D=0;D<U.length;D+=1)U[D].l(z);z.forEach(p),C=G(_),N&&N.l(_),P=Ce(),this.h()},h(){i(l,"class","basis-3/4"),i(h,"type","text"),i(h,"placeholder","Filter by filename"),i(h,"class","input input-bordered w-full h-full rounded-none border-slate-600 text-sm basis-1/4"),i(e,"class","max-w-full text-sm breadcrumbs flex flex-row ml-4"),i(E,"class","grid grid-cols-4 lg:grid-cols-6 gap-2")},m(_,H){Z(_,e,H),f(e,l),f(l,n),f(n,r),f(l,o);for(let T=0;T<S.length;T+=1)S[T]&&S[T].m(l,null);f(e,a),f(e,h),Te(h,t[2]),Z(_,m,H),Z(_,E,H);for(let T=0;T<U.length;T+=1)U[T]&&U[T].m(E,null);Z(_,C,H),N&&N.m(_,H),Z(_,P,H),y=!0,V||(A=[le(r,"click",t[15]),le(h,"input",t[17])],V=!0)},p(_,[H]){if(H&2049){J=de((_[0]||"").split("/"));let T;for(T=0;T<J.length;T+=1){const I=tt(_,J,T);S[T]?S[T].p(I,H):(S[T]=lt(I),S[T].c(),S[T].m(l,null))}for(;T<S.length;T+=1)S[T].d(1);S.length=J.length}if(H&4&&h.value!==_[2]&&Te(h,_[2]),H&2010){j=de(_[4].filter(_[18]).slice(0,_[6]));let T;for(T=0;T<j.length;T+=1){const I=et(_,j,T);U[T]?(U[T].p(I,H),ie(U[T],1)):(U[T]=rt(I),U[T].c(),ie(U[T],1),U[T].m(E,null))}for(Ve(),T=j.length;T<U.length;T+=1)R(T);Fe()}_[4].length===0?N?N.p(_,H):(N=ot(_),N.c(),N.m(P.parentNode,P)):N&&(N.d(1),N=null)},i(_){if(!y){for(let H=0;H<j.length;H+=1)ie(U[H]);y=!0}},o(_){U=U.filter(Boolean);for(let H=0;H<U.length;H+=1)ae(U[H]);y=!1},d(_){_&&(p(e),p(m),p(E),p(C),p(P)),Le(S,_),Le(U,_),N&&N.d(_),V=!1,Ie(A)}}}function Gt(t,e,l){let{comfyUrl:n}=e,{folderType:r}=e,{toast:s}=e,{folderPath:o}=e,a,h=[],m=!0,E=20,C="",P=new RegExp("");async function y(){l(5,m=!0),l(4,h=await Ae(r,n,o)),l(5,m=!0)}Be(async()=>{l(3,a=window.top.app),l(0,o=""),window.addEventListener("scroll",()=>{l(6,E=Ct(E,h.length))})});async function V(I){const z=await fetch(n+"/browser/collections",{method:"POST",body:JSON.stringify({filename:I.name,folder_path:I.folder_path,folder_type:r})});s.show(z.ok,"Added to Saves","Failed to add to Saves. Please check the ComfyUI server.")}async function A(I){if(!confirm("You want to delete this file? "+I.name))return;const D=await fetch(n+"/browser/files",{method:"DELETE",body:JSON.stringify({folder_type:r,filename:I.name,folder_path:I.folder_path})});s.show(D.ok,"Deleted the file "+I.name,"Failed to delete the file. Please check the ComfyUI server."),l(4,h=h.filter(g=>g!=I))}async function J(I){l(0,o=I.path)}async function S(I){if(I===-1){l(0,o="");return}l(0,o=o.split("/").slice(0,I+1).join("/"))}const j=()=>S(-1),U=I=>S(I);function R(){C=this.value,l(2,C)}const N=I=>P.test(I.name.toLowerCase()),_=async I=>await Et(I,a,s),H=async I=>await V(I),T=async I=>await A(I);return t.$$set=I=>{"comfyUrl"in I&&l(12,n=I.comfyUrl),"folderType"in I&&l(13,r=I.folderType),"toast"in I&&l(1,s=I.toast),"folderPath"in I&&l(0,o=I.folderPath)},t.$$.update=()=>{if(t.$$.dirty&1&&o!=null&&y(),t.$$.dirty&4)try{l(7,P=new RegExp(C.toLowerCase()))}catch{l(7,P=new RegExp(""))}},[o,s,C,a,h,m,E,P,V,A,J,S,n,r,y,j,U,R,N,_,H,T]}class Mt extends Se{constructor(e){super(),De(this,e,Gt,Wt,Ee,{comfyUrl:12,folderType:13,toast:1,folderPath:0,refresh:14})}get refresh(){return this.$$.ctx[14]}}function qt(t){let e,l,n,r;e=new Mt({props:{folderType:"outputs",comfyUrl:t[0],toast:t[1]}});let s={};return n=new ze({props:s}),t[2](n),{c(){_e(e.$$.fragment),l=W(),_e(n.$$.fragment)},l(o){pe(e.$$.fragment,o),l=G(o),pe(n.$$.fragment,o)},m(o,a){ve(e,o,a),Z(o,l,a),ve(n,o,a),r=!0},p(o,[a]){const h={};a&1&&(h.comfyUrl=o[0]),a&2&&(h.toast=o[1]),e.$set(h);const m={};n.$set(m)},i(o){r||(ie(e.$$.fragment,o),ie(n.$$.fragment,o),r=!0)},o(o){ae(e.$$.fragment,o),ae(n.$$.fragment,o),r=!1},d(o){o&&p(l),be(e,o),t[2](null),be(n,o)}}}function Zt(t,e,l){let{comfyUrl:n}=e,r;function s(o){Ue[o?"unshift":"push"](()=>{r=o,l(1,r)})}return t.$$set=o=>{"comfyUrl"in o&&l(0,n=o.comfyUrl)},[n,r,s]}class Kt extends Se{constructor(e){super(),De(this,e,Zt,qt,Ee,{comfyUrl:0})}}function it(t,e,l){const n=t.slice();return n[30]=e[l],n}function at(t,e,l){const n=t.slice();return n[33]=e[l],n[35]=l,n}function ct(t){let e,l="Save",n,r;return{c(){e=w("button"),e.textContent=l,this.h()},l(s){e=k(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-vwqboa"&&(e.textContent=l),this.h()},h(){i(e,"class","btn btn-outline btn-accent")},m(s,o){Z(s,e,o),n||(r=le(e,"click",t[11]),n=!0)},p:me,d(s){s&&p(e),n=!1,r()}}}function ut(t){let e,l,n=t[33]+"",r,s,o;function a(){return t[20](t[35])}return{c(){e=w("li"),l=w("button"),r=se(n)},l(h){e=k(h,"LI",{});var m=O(e);l=k(m,"BUTTON",{});var E=O(l);r=re(E,n),E.forEach(p),m.forEach(p)},m(h,m){Z(h,e,m),f(e,l),f(l,r),s||(o=le(l,"click",a),s=!0)},p(h,m){t=h,m[0]&1&&n!==(n=t[33]+"")&&fe(r,n)},d(h){h&&p(e),s=!1,o()}}}function ft(t){let e,l="Load",n,r;function s(){return t[24](t[30])}return{c(){e=w("button"),e.textContent=l,this.h()},l(o){e=k(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1ie7fpp"&&(e.textContent=l),this.h()},h(){i(e,"class","btn btn-link btn-sm p-0 no-underline text-accent")},m(o,a){Z(o,e,a),n||(r=le(e,"click",s),n=!0)},p(o,a){t=o},d(o){o&&p(e),n=!1,r()}}}function ht(t){let e,l,n,r,s,o,a,h,m=t[30].formattedDatetime+"",E,C,P=t[30].formattedSize+"",y,V,A,J,S,j="Remove",U,R,N,_,H,T,I,z;l=new Dt({props:{file:t[30],styleClass:"w-16 sm:w-28",onClickDir:t[15]}});function D(...d){return t[23](t[30],...d)}let g=t[2]&&t[30].type!="dir"&&ft(t);function F(){return t[25](t[30])}function M(...d){return t[26](t[30],...d)}return{c(){e=w("li"),_e(l.$$.fragment),n=W(),r=w("div"),s=w("input"),a=W(),h=w("p"),E=se(m),C=se(" | "),y=se(P),V=W(),A=w("div"),g&&g.c(),J=W(),S=w("button"),S.textContent=j,U=W(),R=w("div"),N=w("textarea"),H=W(),this.h()},l(d){e=k(d,"LI",{class:!0});var v=O(e);pe(l.$$.fragment,v),n=G(v),r=k(v,"DIV",{class:!0});var u=O(r);s=k(u,"INPUT",{type:!0,class:!0}),a=G(u),h=k(u,"P",{class:!0});var b=O(h);E=re(b,m),C=re(b," | "),y=re(b,P),b.forEach(p),V=G(u),A=k(u,"DIV",{class:!0});var L=O(A);g&&g.l(L),J=G(L),S=k(L,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(S)!=="svelte-1mhg6fb"&&(S.textContent=j),L.forEach(p),u.forEach(p),U=G(v),R=k(v,"DIV",{});var c=O(R);N=k(c,"TEXTAREA",{name:!0,placeholder:!0,class:!0}),O(N).forEach(p),c.forEach(p),H=G(v),v.forEach(p),this.h()},h(){i(s,"type","text"),i(s,"class","input-bordered font-bold w-full bg-base-100"),s.value=o=t[30].name,i(h,"class","text-gray-500 text-xs hidden sm:block"),i(S,"class","btn btn-link btn-sm p-0 no-underline text-error"),i(A,"class","bottom-0 absolute"),i(r,"class","space-y-2 w-96 relative"),i(N,"name","notes"),i(N,"placeholder","write some memos..."),i(N,"class","resize-none textarea hidden md:block md:w-72 max-w-72 h-14 sm:h-24"),N.value=_=t[30].notes,i(e,"class","flex h-16 sm:h-28 border-0 space-x-4 p-2 bg-info-content")},m(d,v){Z(d,e,v),ve(l,e,null),f(e,n),f(e,r),f(r,s),f(r,a),f(r,h),f(h,E),f(h,C),f(h,y),f(r,V),f(r,A),g&&g.m(A,null),f(A,J),f(A,S),f(e,U),f(e,R),f(R,N),f(e,H),T=!0,I||(z=[le(s,"blur",D),le(S,"click",F),le(N,"blur",M)],I=!0)},p(d,v){t=d;const u={};v[0]&584&&(u.file=t[30]),l.$set(u),(!T||v[0]&584&&o!==(o=t[30].name)&&s.value!==o)&&(s.value=o),(!T||v[0]&584)&&m!==(m=t[30].formattedDatetime+"")&&fe(E,m),(!T||v[0]&584)&&P!==(P=t[30].formattedSize+"")&&fe(y,P),t[2]&&t[30].type!="dir"?g?g.p(t,v):(g=ft(t),g.c(),g.m(A,J)):g&&(g.d(1),g=null),(!T||v[0]&584&&_!==(_=t[30].notes))&&(N.value=_)},i(d){T||(ie(l.$$.fragment,d),T=!0)},o(d){ae(l.$$.fragment,d),T=!1},d(d){d&&p(e),be(l),g&&g.d(),I=!1,Ie(z)}}}function dt(t){let e,l;function n(o,a){return o[8]?Qt:Xt}let r=n(t),s=r(t);return{c(){e=w("div"),l=w("span"),s.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var a=O(e);l=k(a,"SPAN",{class:!0});var h=O(l);s.l(h),h.forEach(p),a.forEach(p),this.h()},h(){i(l,"class","font-bold text-4xl"),i(e,"class","w-full h-full flex items-center justify-center")},m(o,a){Z(o,e,a),f(e,l),s.m(l,null)},p(o,a){r!==(r=n(o))&&(s.d(1),s=r(o),s&&(s.c(),s.m(l,null)))},d(o){o&&p(e),s.d()}}}function Xt(t){let e;return{c(){e=se("Loading ...")},l(l){e=re(l,"Loading ...")},m(l,n){Z(l,e,n)},d(l){l&&p(e)}}}function Qt(t){let e;return{c(){e=se("It's empty here.")},l(l){e=re(l,"It's empty here.")},m(l,n){Z(l,e,n)},d(l){l&&p(e)}}}function xt(t){var L;let e,l,n='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"></path></svg>',r,s,o,a,h,m="Sync",E,C,P,y,V,A="Root",J,S,j,U,R,N,_,H,T,I,z,D=t[5]!=((L=t[4])==null?void 0:L.git_repo)&&ct(t),g=de((t[0]||"").split("/")),F=[];for(let c=0;c<g.length;c+=1)F[c]=ut(at(t,g,c));let M=de(t[3].filter(t[22]).slice(0,t[6])),d=[];for(let c=0;c<M.length;c+=1)d[c]=ht(it(t,M,c));const v=c=>ae(d[c],1,1,()=>{d[c]=null});let u=t[3].length===0&&dt(t),b={};return H=new ze({props:b}),t[27](H),{c(){e=w("div"),l=w("a"),l.innerHTML=n,r=W(),s=w("input"),o=W(),D&&D.c(),a=W(),h=w("button"),h.textContent=m,E=W(),C=w("div"),P=w("ul"),y=w("li"),V=w("button"),V.textContent=A,J=W();for(let c=0;c<F.length;c+=1)F[c].c();S=W(),j=w("input"),U=W(),R=w("ul");for(let c=0;c<d.length;c+=1)d[c].c();N=W(),u&&u.c(),_=W(),_e(H.$$.fragment),this.h()},l(c){e=k(c,"DIV",{class:!0});var $=O(e);l=k($,"A",{class:!0,target:!0,href:!0,"data-svelte-h":!0}),ce(l)!=="svelte-1nomjvc"&&(l.innerHTML=n),r=G($),s=k($,"INPUT",{type:!0,placeholder:!0,class:!0}),o=G($),D&&D.l($),a=G($),h=k($,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(h)!=="svelte-118xeor"&&(h.textContent=m),$.forEach(p),E=G(c),C=k(c,"DIV",{class:!0});var q=O(C);P=k(q,"UL",{class:!0});var K=O(P);y=k(K,"LI",{});var Y=O(y);V=k(Y,"BUTTON",{"data-svelte-h":!0}),ce(V)!=="svelte-1paj67z"&&(V.textContent=A),Y.forEach(p),J=G(K);for(let X=0;X<F.length;X+=1)F[X].l(K);K.forEach(p),S=G(q),j=k(q,"INPUT",{type:!0,placeholder:!0,class:!0}),q.forEach(p),U=G(c),R=k(c,"UL",{class:!0});var x=O(R);for(let X=0;X<d.length;X+=1)d[X].l(x);x.forEach(p),N=G(c),u&&u.l(c),_=G(c),pe(H.$$.fragment,c),this.h()},h(){i(l,"class","btn pr-2"),i(l,"target","_blank"),i(l,"href","https://github.com/talesofai/comfyui-browser/wiki/How-to-use-'Sync'-in-the-'Saves'"),i(s,"type","text"),i(s,"placeholder","Input your git repository address"),i(s,"class","input input-bordered w-full max-w-lg"),i(h,"class","btn btn-outline btn-accent"),i(e,"class","flex border-b border-base-content pb-2"),i(P,"class","basis-2/3"),i(j,"type","text"),i(j,"placeholder","Filter by filename or memos"),i(j,"class","input input-bordered border-slate-600 w-full h-full rounded-none text-sm basis-1/3"),i(C,"class","max-w-full text-sm breadcrumbs flex flex-row ml-4"),i(R,"class","space-y-2")},m(c,$){Z(c,e,$),f(e,l),f(e,r),f(e,s),Te(s,t[5]),f(e,o),D&&D.m(e,null),f(e,a),f(e,h),Z(c,E,$),Z(c,C,$),f(C,P),f(P,y),f(y,V),f(P,J);for(let q=0;q<F.length;q+=1)F[q]&&F[q].m(P,null);f(C,S),f(C,j),Te(j,t[1]),Z(c,U,$),Z(c,R,$);for(let q=0;q<d.length;q+=1)d[q]&&d[q].m(R,null);Z(c,N,$),u&&u.m(c,$),Z(c,_,$),ve(H,c,$),T=!0,I||(z=[le(s,"input",t[18]),le(h,"click",t[10]),le(V,"click",t[19]),le(j,"input",t[21])],I=!0)},p(c,$){var K;if($[0]&32&&s.value!==c[5]&&Te(s,c[5]),c[5]!=((K=c[4])==null?void 0:K.git_repo)?D?D.p(c,$):(D=ct(c),D.c(),D.m(e,a)):D&&(D.d(1),D=null),$[0]&65537){g=de((c[0]||"").split("/"));let Y;for(Y=0;Y<g.length;Y+=1){const x=at(c,g,Y);F[Y]?F[Y].p(x,$):(F[Y]=ut(x),F[Y].c(),F[Y].m(P,null))}for(;Y<F.length;Y+=1)F[Y].d(1);F.length=g.length}if($[0]&2&&j.value!==c[1]&&Te(j,c[1]),$[0]&62156){M=de(c[3].filter(c[22]).slice(0,c[6]));let Y;for(Y=0;Y<M.length;Y+=1){const x=it(c,M,Y);d[Y]?(d[Y].p(x,$),ie(d[Y],1)):(d[Y]=ht(x),d[Y].c(),ie(d[Y],1),d[Y].m(R,null))}for(Ve(),Y=M.length;Y<d.length;Y+=1)v(Y);Fe()}c[3].length===0?u?u.p(c,$):(u=dt(c),u.c(),u.m(_.parentNode,_)):u&&(u.d(1),u=null);const q={};H.$set(q)},i(c){if(!T){for(let $=0;$<M.length;$+=1)ie(d[$]);ie(H.$$.fragment,c),T=!0}},o(c){d=d.filter(Boolean);for(let $=0;$<d.length;$+=1)ae(d[$]);ae(H.$$.fragment,c),T=!1},d(c){c&&(p(e),p(E),p(C),p(U),p(R),p(N),p(_)),D&&D.d(),Le(F,c),Le(d,c),u&&u.d(c),t[27](null),be(H,c),I=!1,Ie(z)}}}const He="collections";function el(t,e,l){let{comfyUrl:n}=e,r,s=[],o={},a="",h=20,m,E,C=!1,P="",y=new RegExp("");Be(async()=>{l(2,r=window.top.app),l(0,E=""),l(4,o=await V()||{}),l(5,a=o==null?void 0:o.git_repo),window.addEventListener("scroll",()=>{l(6,h=Ct(h,s.length))})});async function V(){return await(await fetch(n+"/browser/config")).json()}async function A(u){const b=u.target;b.disabled=!0,b.innerHTML="Syncing...";const L=await fetch(n+"/browser/collections/sync",{method:"POST"});m.show(L.ok,"Synced","Failed to sync. Please check the ComfyUI server."),b.disabled=!1,b.innerHTML="Sync",l(0,E=""),l(3,s=await Ae(He,n))}async function J(){const u=await fetch(n+"/browser/config",{method:"PUT",body:JSON.stringify({git_repo:a})});m.show(u.ok,"Updated config","Failed to update config. Please check the ComfyUI server.")}async function S(u){if(!confirm("You want to delete this file? "+u.name))return;const L=await fetch(n+"/browser/files",{method:"DELETE",body:JSON.stringify({folder_type:He,filename:u.name,folder_path:u.folder_path})});m.show(L.ok,"Deleted the file "+u.name,"Failed to delete the file. Please check the ComfyUI server."),l(3,s=s.filter(c=>c!=u))}async function j(u,b){return(await fetch(n+"/browser/files",{method:"PUT",body:JSON.stringify({folder_type:He,folder_path:u.folder_path,filename:u.name,new_data:b})})).ok}async function U(u,b){const L=u.target.value;if(L===b.name)return;const c=await j(b,{filename:L,notes:b.notes||"",folder_path:b.folder_path});m.show(c,"Memos Updated","Failed to update. Please check the ComfyUI server.")}async function R(u,b){const L=u.target.value;if(L==b.notes)return;const c=await j(b,{filename:b.name,notes:L,folder_path:b.folder_path});m.show(c,"Updated","Failed to update. Please check the ComfyUI server.")}async function N(u){l(0,E=u.path)}async function _(u){if(u===-1){l(0,E="");return}l(0,E=E.split("/").slice(0,u+1).join("/"))}function H(){a=this.value,l(5,a)}const T=()=>_(-1),I=u=>_(u);function z(){P=this.value,l(1,P)}const D=u=>y.test(u.name.toLowerCase())||y.test(u.notes.toLowerCase()),g=(u,b)=>U(b,u),F=async u=>await Et(u,r,m),M=async u=>await S(u),d=(u,b)=>R(b,u);function v(u){Ue[u?"unshift":"push"](()=>{m=u,l(7,m)})}return t.$$set=u=>{"comfyUrl"in u&&l(17,n=u.comfyUrl)},t.$$.update=()=>{if(t.$$.dirty[0]&131073&&E!=null&&Ae(He,n,E).then(u=>{l(3,s=u),l(8,C=!0)}),t.$$.dirty[0]&2)try{l(9,y=new RegExp(P.toLowerCase()))}catch{l(9,y=new RegExp(""))}},[E,P,r,s,o,a,h,m,C,y,A,J,S,U,R,N,_,n,H,T,I,z,D,g,F,M,d,v]}class tl extends Se{constructor(e){super(),De(this,e,el,xt,Ee,{comfyUrl:17},null,[-1,-1])}}function mt(t,e,l){const n=t.slice();return n[26]=e[l],n}function _t(t,e,l){const n=t.slice();return n[29]=e[l],n}function ll(t){let e,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-6 h-6 text-accent"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0 0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"></path></svg>';return{c(){e=w("div"),e.innerHTML=l,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1y0djwt"&&(e.innerHTML=l),this.h()},h(){i(e,"class","h-14 px-0.5 flex items-center justify-center")},m(n,r){Z(n,e,r)},p:me,d(n){n&&p(e)}}}function nl(t){let e,l,n,r;return{c(){e=w("a"),l=ge("svg"),n=ge("path"),this.h()},l(s){e=k(s,"A",{class:!0,href:!0,target:!0});var o=O(e);l=we(o,"svg",{class:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var a=O(l);n=we(a,"path",{d:!0}),O(n).forEach(p),a.forEach(p),o.forEach(p),this.h()},h(){i(n,"d","M15,3C8.373,3,3,8.373,3,15c0,5.623,3.872,10.328,9.092,11.63C12.036,26.468,12,26.28,12,26.047v-2.051 c-0.487,0-1.303,0-1.508,0c-0.821,0-1.551-0.353-1.905-1.009c-0.393-0.729-0.461-1.844-1.435-2.526 c-0.289-0.227-0.069-0.486,0.264-0.451c0.615,0.174,1.125,0.596,1.605,1.222c0.478,0.627,0.703,0.769,1.596,0.769 c0.433,0,1.081-0.025,1.691-0.121c0.328-0.833,0.895-1.6,1.588-1.962c-3.996-0.411-5.903-2.399-5.903-5.098 c0-1.162,0.495-2.286,1.336-3.233C9.053,10.647,8.706,8.73,9.435,8c1.798,0,2.885,1.166,3.146,1.481C13.477,9.174,14.461,9,15.495,9 c1.036,0,2.024,0.174,2.922,0.483C18.675,9.17,19.763,8,21.565,8c0.732,0.731,0.381,2.656,0.102,3.594 c0.836,0.945,1.328,2.066,1.328,3.226c0,2.697-1.904,4.684-5.894,5.097C18.199,20.49,19,22.1,19,23.313v2.734 c0,0.104-0.023,0.179-0.035,0.268C23.641,24.676,27,20.236,27,15C27,8.373,21.627,3,15,3z"),i(l,"class","w-6 h-6 fill-accent"),i(l,"xmlns","http://www.w3.org/2000/svg"),i(l,"x","0px"),i(l,"y","0px"),i(l,"width","100"),i(l,"height","100"),i(l,"viewBox","0 0 30 30"),i(e,"class","h-14 px-0.5 flex items-center justify-center"),i(e,"href",r=t[29].homepage),i(e,"target","_blank")},m(s,o){Z(s,e,o),f(e,l),f(l,n)},p(s,o){o[0]&2&&r!==(r=s[29].homepage)&&i(e,"href",r)},d(s){s&&p(e)}}}function pt(t){let e,l,n,r,s=t[29].name+"",o,a,h,m,E,C,P,y,V,A;function J(N,_){return N[29].homepage?nl:ll}let S=J(t),j=S(t);function U(){return t[16](t[29])}function R(){return t[17](t[29])}return{c(){e=w("li"),j.c(),l=W(),n=w("button"),r=w("p"),o=se(s),h=W(),m=w("button"),E=ge("svg"),C=ge("path"),y=W(),this.h()},l(N){e=k(N,"LI",{class:!0});var _=O(e);j.l(_),l=G(_),n=k(_,"BUTTON",{class:!0});var H=O(n);r=k(H,"P",{class:!0});var T=O(r);o=re(T,s),T.forEach(p),H.forEach(p),h=G(_),m=k(_,"BUTTON",{class:!0});var I=O(m);E=we(I,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var z=O(E);C=we(z,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),O(C).forEach(p),z.forEach(p),I.forEach(p),y=G(_),_.forEach(p),this.h()},h(){i(r,"class","w-40 truncate whitespace-normal"),i(n,"class",a="pl-2 h-14 line-clamp-2 overflow-hidden "+(t[29].name==t[6].split("/")[0]?"active":"")),i(C,"stroke-linecap","round"),i(C,"stroke-linejoin","round"),i(C,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"),i(E,"xmlns","http://www.w3.org/2000/svg"),i(E,"fill","none"),i(E,"viewBox","0 0 24 24"),i(E,"stroke-width","1.5"),i(E,"stroke","currentColor"),i(E,"class",P=(t[9]==t[29]?"text-accent":"")+" w-6 h-6"),i(m,"class","h-14 right-0 fixed flex items-center justify-center"),i(e,"class","h-14")},m(N,_){Z(N,e,_),j.m(e,null),f(e,l),f(e,n),f(n,r),f(r,o),f(e,h),f(e,m),f(m,E),f(E,C),f(e,y),V||(A=[le(n,"click",U),le(m,"click",R)],V=!0)},p(N,_){t=N,S===(S=J(t))&&j?j.p(t,_):(j.d(1),j=S(t),j&&(j.c(),j.m(e,l))),_[0]&2&&s!==(s=t[29].name+"")&&fe(o,s),_[0]&66&&a!==(a="pl-2 h-14 line-clamp-2 overflow-hidden "+(t[29].name==t[6].split("/")[0]?"active":""))&&i(n,"class",a),_[0]&514&&P!==(P=(t[9]==t[29]?"text-accent":"")+" w-6 h-6")&&i(E,"class",P)},d(N){N&&p(e),j.d(),V=!1,Ie(A)}}}function vt(t){let e,l='<span class="font-bold text-4xl">Loading ...</span>';return{c(){e=w("div"),e.innerHTML=l,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-ovpcuu"&&(e.innerHTML=l),this.h()},h(){i(e,"class","w-full h-full flex items-center justify-center")},m(n,r){Z(n,e,r)},d(n){n&&p(e)}}}function bt(t){let e,l,n,r,s,o,a,h,m=t[26].author+"",E,C,P=t[26].title+"",y,V,A,J,S,j,U,R,N,_,H=t[26].description+"",T,I,z,D,g=t[5]===t[26].url?"Subscribing...":"Subscribe",F,M,d,v,u;function b(){return t[21](t[26])}return{c(){e=w("li"),l=w("img"),s=W(),o=w("div"),a=w("a"),h=w("p"),E=se(m),C=se("/"),y=se(P),A=W(),J=w("a"),S=w("img"),R=W(),N=w("div"),_=w("p"),T=se(H),I=W(),z=w("div"),D=w("button"),F=se(g),d=W(),this.h()},l(L){e=k(L,"LI",{class:!0});var c=O(e);l=k(c,"IMG",{src:!0,alt:!0}),s=G(c),o=k(c,"DIV",{class:!0});var $=O(o);a=k($,"A",{class:!0,href:!0,target:!0});var q=O(a);h=k(q,"P",{});var K=O(h);E=re(K,m),C=re(K,"/"),y=re(K,P),K.forEach(p),q.forEach(p),A=G($),J=k($,"A",{href:!0,target:!0});var Y=O(J);S=k(Y,"IMG",{src:!0,alt:!0}),Y.forEach(p),$.forEach(p),R=G(c),N=k(c,"DIV",{class:!0});var x=O(N);_=k(x,"P",{});var X=O(_);T=re(X,H),X.forEach(p),x.forEach(p),I=G(c),z=k(c,"DIV",{class:!0});var he=O(z);D=k(he,"BUTTON",{class:!0});var ne=O(D);F=re(ne,g),ne.forEach(p),he.forEach(p),d=G(c),c.forEach(p),this.h()},h(){ye(l.src,n=`https://github.com/${t[26].author}.png`)||i(l,"src",n),i(l,"alt",r=t[26].author),i(a,"class","link link-warning text-lg no-underline"),i(a,"href",V=t[26].url),i(a,"target","_blank"),ye(S.src,j=`https://img.shields.io/github/stars${new URL(t[26].url).pathname}?style=flat-square`)||i(S,"src",j),i(S,"alt","stars"),i(J,"href",U=t[26].url),i(J,"target","_blank"),i(o,"class","w-80"),i(N,"class","w-72 grow"),i(D,"class","btn btn-outline btn-primary no-underline text-accent"),D.disabled=M=t[5].length>0,i(z,"class","flex items-center justify-center"),i(e,"class","flex flex-nowrap space-x-2 h-20 border-b border-b-base-content")},m(L,c){Z(L,e,c),f(e,l),f(e,s),f(e,o),f(o,a),f(a,h),f(h,E),f(h,C),f(h,y),f(o,A),f(o,J),f(J,S),f(e,R),f(e,N),f(N,_),f(_,T),f(e,I),f(e,z),f(z,D),f(D,F),f(e,d),v||(u=le(D,"click",b),v=!0)},p(L,c){t=L,c[0]&128&&!ye(l.src,n=`https://github.com/${t[26].author}.png`)&&i(l,"src",n),c[0]&128&&r!==(r=t[26].author)&&i(l,"alt",r),c[0]&128&&m!==(m=t[26].author+"")&&fe(E,m),c[0]&128&&P!==(P=t[26].title+"")&&fe(y,P),c[0]&128&&V!==(V=t[26].url)&&i(a,"href",V),c[0]&128&&!ye(S.src,j=`https://img.shields.io/github/stars${new URL(t[26].url).pathname}?style=flat-square`)&&i(S,"src",j),c[0]&128&&U!==(U=t[26].url)&&i(J,"href",U),c[0]&128&&H!==(H=t[26].description+"")&&fe(T,H),c[0]&160&&g!==(g=t[5]===t[26].url?"Subscribing...":"Subscribe")&&fe(F,g),c[0]&32&&M!==(M=t[5].length>0)&&(D.disabled=M)},d(L){L&&p(e),v=!1,u()}}}function sl(t){let e,l,n,r,s,o,a,h,m,E,C,P=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>
          Add new source`,y,V,A,J,S,j,U,R,N,_,H=t[5]===t[4]&&t[4]?"Subscribing...":"Subscribe",T,I,z,D,g,F,M,d,v=`You could open
      <a class="text-accent" target="_blank" href="https://github.com/talesofai/comfyui-browser/edit/main/data/sources.json">a pull request</a>
      or submit
      <a class="text-accent" target="_blank" href="https://github.com/talesofai/comfyui-browser/issues/new?assignees=tzwm&amp;labels=workflow-repo&amp;projects=&amp;template=new-workflow-repository.md&amp;title=New+workflow+repo%3A">an issue</a>
      to add your workflow repository here.<br/>
      Thank you to everyone who contributes to the open community!`,u,b,L="<button>close</button>",c,$,q;function K(B){t[14](B)}let Y={folderType:"sources",comfyUrl:t[0],toast:t[2]};t[6]!==void 0&&(Y.folderPath=t[6]),s=new Mt({props:Y}),Ue.push(()=>wt(s,"folderPath",K)),t[15](s);let x=de(t[1]),X=[];for(let B=0;B<x.length;B+=1)X[B]=pt(_t(t,x,B));let he={};A=new ze({props:he}),t[18](A);let ne=t[7].length===0&&vt(),ue=de(t[7]),Q=[];for(let B=0;B<ue.length;B+=1)Q[B]=bt(mt(t,ue,B));return{c(){e=w("div"),l=w("input"),n=W(),r=w("div"),_e(s.$$.fragment),a=W(),h=w("div"),m=w("ul"),E=w("li"),C=w("button"),C.innerHTML=P,y=W();for(let B=0;B<X.length;B+=1)X[B].c();V=W(),_e(A.$$.fragment),J=W(),S=w("dialog"),j=w("div"),U=w("div"),R=w("input"),N=W(),_=w("button"),T=se(H),z=W(),D=w("div"),ne&&ne.c(),g=W(),F=w("ul");for(let B=0;B<Q.length;B+=1)Q[B].c();M=W(),d=w("p"),d.innerHTML=v,u=W(),b=w("form"),b.innerHTML=L,this.h()},l(B){e=k(B,"DIV",{class:!0});var te=O(e);l=k(te,"INPUT",{type:!0,class:!0}),n=G(te),r=k(te,"DIV",{class:!0});var oe=O(r);pe(s.$$.fragment,oe),oe.forEach(p),a=G(te),h=k(te,"DIV",{class:!0});var Oe=O(h);m=k(Oe,"UL",{class:!0});var ee=O(m);E=k(ee,"LI",{class:!0});var ke=O(E);C=k(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(C)!=="svelte-yijvz1"&&(C.innerHTML=P),ke.forEach(p),y=G(ee);for(let Me=0;Me<X.length;Me+=1)X[Me].l(ee);ee.forEach(p),Oe.forEach(p),te.forEach(p),V=G(B),pe(A.$$.fragment,B),J=G(B),S=k(B,"DIALOG",{class:!0});var je=O(S);j=k(je,"DIV",{class:!0});var $e=O(j);U=k($e,"DIV",{class:!0});var Ne=O(U);R=k(Ne,"INPUT",{type:!0,placeholder:!0,class:!0}),N=G(Ne),_=k(Ne,"BUTTON",{class:!0});var Ye=O(_);T=re(Ye,H),Ye.forEach(p),Ne.forEach(p),z=G($e),D=k($e,"DIV",{});var Pe=O(D);ne&&ne.l(Pe),g=G(Pe),F=k(Pe,"UL",{class:!0});var Re=O(F);for(let Me=0;Me<Q.length;Me+=1)Q[Me].l(Re);Re.forEach(p),Pe.forEach(p),M=G($e),d=k($e,"P",{class:!0,"data-svelte-h":!0}),ce(d)!=="svelte-n5ogsw"&&(d.innerHTML=v),$e.forEach(p),u=G(je),b=k(je,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),ce(b)!=="svelte-povsts"&&(b.innerHTML=L),je.forEach(p),this.h()},h(){i(l,"type","checkbox"),i(l,"class","drawer-toggle"),i(r,"class","drawer-content flex flex-col pl-2"),i(C,"class","pl-2 btn-outline btn-accent"),i(E,"class","h-10"),i(m,"class","menu bg-base-200 w-56 p-0 [&_li>*]:rounded-none"),i(h,"class","drawer-side border-r border-base-content pr-2"),i(e,"class","drawer md:drawer-open"),i(R,"type","text"),i(R,"placeholder","https://github.com/comfyanonymous/ComfyUI_examples"),i(R,"class","grow input input-bordered"),i(_,"class","btn btn-outline btn-primary"),_.disabled=I=t[5].length>0||!t[4],i(U,"class","mb-2 flex space-x-2"),i(F,"class","space-y-1"),i(d,"class","mt-1 text-xs text-gray-500"),i(j,"class","modal-box w-5/6 max-w-5xl"),i(b,"method","dialog"),i(b,"class","modal-backdrop"),i(S,"class","modal")},m(B,te){Z(B,e,te),f(e,l),f(e,n),f(e,r),ve(s,r,null),f(e,a),f(e,h),f(h,m),f(m,E),f(E,C),f(m,y);for(let oe=0;oe<X.length;oe+=1)X[oe]&&X[oe].m(m,null);Z(B,V,te),ve(A,B,te),Z(B,J,te),Z(B,S,te),f(S,j),f(j,U),f(U,R),Te(R,t[4]),f(U,N),f(U,_),f(_,T),f(j,z),f(j,D),ne&&ne.m(D,null),f(D,g),f(D,F);for(let oe=0;oe<Q.length;oe+=1)Q[oe]&&Q[oe].m(F,null);f(j,M),f(j,d),f(S,u),f(S,b),t[22](S),c=!0,$||(q=[le(C,"click",t[12]),le(R,"input",t[19]),le(_,"click",t[20])],$=!0)},p(B,te){const oe={};if(te[0]&1&&(oe.comfyUrl=B[0]),te[0]&4&&(oe.toast=B[2]),!o&&te[0]&64&&(o=!0,oe.folderPath=B[6],gt(()=>o=!1)),s.$set(oe),te[0]&3650){x=de(B[1]);let ee;for(ee=0;ee<x.length;ee+=1){const ke=_t(B,x,ee);X[ee]?X[ee].p(ke,te):(X[ee]=pt(ke),X[ee].c(),X[ee].m(m,null))}for(;ee<X.length;ee+=1)X[ee].d(1);X.length=x.length}const Oe={};if(A.$set(Oe),te[0]&16&&R.value!==B[4]&&Te(R,B[4]),(!c||te[0]&48)&&H!==(H=B[5]===B[4]&&B[4]?"Subscribing...":"Subscribe")&&fe(T,H),(!c||te[0]&48&&I!==(I=B[5].length>0||!B[4]))&&(_.disabled=I),B[7].length===0?ne||(ne=vt(),ne.c(),ne.m(D,g)):ne&&(ne.d(1),ne=null),te[0]&8352){ue=de(B[7]);let ee;for(ee=0;ee<ue.length;ee+=1){const ke=mt(B,ue,ee);Q[ee]?Q[ee].p(ke,te):(Q[ee]=bt(ke),Q[ee].c(),Q[ee].m(F,null))}for(;ee<Q.length;ee+=1)Q[ee].d(1);Q.length=ue.length}},i(B){c||(ie(s.$$.fragment,B),ie(A.$$.fragment,B),c=!0)},o(B){ae(s.$$.fragment,B),ae(A.$$.fragment,B),c=!1},d(B){B&&(p(e),p(V),p(J),p(S)),t[15](null),be(s),Le(X,B),t[18](null),be(A,B),ne&&ne.d(),Le(Q,B),t[22](null),$=!1,Ie(q)}}}function rl(t,e,l){let{comfyUrl:n}=e,r=[],s,o,a,h="",m="",E=[],C,P;async function y(){const F=await(await fetch(n+"/browser/sources")).json();l(1,r=F.sources.map(M=>(M.homepage="",M.url.startsWith("https://")&&(M.homepage=M.url,M.homepage.endsWith(".git")&&(M.homepage=M.homepage.slice(0,-4))),M)))}Be(async()=>{y(),j()});function V(g){console.log(m),l(6,m=g.name)}async function A(g){l(9,P=g);const F=await fetch(n+`/browser/sources/sync/${g.name}`,{method:"POST"});l(9,P=null),F.ok&&(y(),C.refresh()),s.show(F.ok,"Synced "+[g.author,g.name].join("/"),"Failed to sync this source. Please check the ComfyUI server.")}function J(){o.showModal()}async function S(g){if(!g){s.show(!1,"","missing Git URL");return}l(5,h=g);const F=await fetch(n+"/browser/sources",{method:"POST",body:JSON.stringify({repo_url:g})});l(5,h=""),F.ok&&(y(),C.refresh()),s.show(F.ok,"Added a new source","Failed to add a new source. Please check the ComfyUI server."),o.close()}async function j(){const F=await(await fetch(n+"/browser/sources/all")).json();l(7,E=F.sources)}function U(g){m=g,l(6,m)}function R(g){Ue[g?"unshift":"push"](()=>{C=g,l(8,C)})}const N=g=>V(g),_=g=>A(g);function H(g){Ue[g?"unshift":"push"](()=>{s=g,l(2,s)})}function T(){a=this.value,l(4,a)}const I=()=>S(a),z=g=>S(g.url);function D(g){Ue[g?"unshift":"push"](()=>{o=g,l(3,o)})}return t.$$set=g=>{"comfyUrl"in g&&l(0,n=g.comfyUrl)},[n,r,s,o,a,h,m,E,C,P,V,A,J,S,U,R,N,_,H,T,I,z,D]}class ol extends Se{constructor(e){super(),De(this,e,rl,sl,Ee,{comfyUrl:0},null,[-1,-1])}}function il(t){let e,l;return e=new Kt({props:{comfyUrl:t[1]}}),{c(){_e(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ve(e,n,r),l=!0},p:me,i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){ae(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function al(t){let e,l;return e=new ol({props:{comfyUrl:t[1]}}),{c(){_e(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ve(e,n,r),l=!0},p:me,i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){ae(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function cl(t){let e,l;return e=new tl({props:{comfyUrl:t[1]}}),{c(){_e(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ve(e,n,r),l=!0},p:me,i(n){l||(ie(e.$$.fragment,n),l=!0)},o(n){ae(e.$$.fragment,n),l=!1},d(n){be(e,n)}}}function ul(t){let e,l,n,r,s,o,a;function h(y){t[3](y)}let m={};t[0]!==void 0&&(m.activeTab=t[0]),e=new Ht({props:m}),Ue.push(()=>wt(e,"activeTab",h));const E=[cl,al,il],C=[];function P(y,V){return y[0]==="collections"?0:y[0]==="sources"?1:2}return r=P(t),s=C[r]=E[r](t),{c(){_e(e.$$.fragment),n=W(),s.c(),o=Ce()},l(y){pe(e.$$.fragment,y),n=G(y),s.l(y),o=Ce()},m(y,V){ve(e,y,V),Z(y,n,V),C[r].m(y,V),Z(y,o,V),a=!0},p(y,[V]){const A={};!l&&V&1&&(l=!0,A.activeTab=y[0],gt(()=>l=!1)),e.$set(A);let J=r;r=P(y),r===J?C[r].p(y,V):(Ve(),ae(C[J],1,1,()=>{C[J]=null}),Fe(),s=C[r],s?s.p(y,V):(s=C[r]=E[r](y),s.c()),ie(s,1),s.m(o.parentNode,o))},i(y){a||(ie(e.$$.fragment,y),ie(s),a=!0)},o(y){ae(e.$$.fragment,y),ae(s),a=!1},d(y){y&&(p(n),p(o)),be(e,y),C[r].d(y)}}}function fl(t,e,l){let{data:n}=e;const{comfyUrl:r}=n;let s="outputs";Be(()=>{const a=St();a.lastTab&&l(0,s=a.lastTab)});function o(a){s=a,l(0,s)}return t.$$set=a=>{"data"in a&&l(2,n=a.data)},[s,r,n,o]}class ml extends Se{constructor(e){super(),De(this,e,fl,ul,Ee,{data:2})}}export{ml as component};
