import{s as ve,n as se,r as ye,f as $e,o as Ie,b as Te,h as ot}from"../chunks/scheduler.89bf212d.js";import{S as ge,i as we,g as T,m as x,s as J,h as D,j as A,n as ee,f as g,c as W,k as b,a as z,x as w,y as Z,e as be,o as _e,l as Le,z as ne,A as pe,d as K,p as Ce,b as Ee,t as X,B as De,r as ae,u as ce,v as ue,w as fe,C as it}from"../chunks/index.73c73f89.js";function me(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function at(n){let e,t,l,r,s,o,a,u,d,y,S,P,k,F;return{c(){e=T("div"),t=T("button"),l=x("Outputs"),s=J(),o=T("button"),a=x("Collections"),d=J(),y=T("button"),S=x("Sources"),this.h()},l(O){e=D(O,"DIV",{role:!0,class:!0});var U=A(e);t=D(U,"BUTTON",{role:!0,class:!0});var M=A(t);l=ee(M,"Outputs"),M.forEach(g),s=W(U),o=D(U,"BUTTON",{role:!0,class:!0});var Y=A(o);a=ee(Y,"Collections"),Y.forEach(g),d=W(U),y=D(U,"BUTTON",{role:!0,class:!0});var $=A(y);S=ee($,"Sources"),$.forEach(g),U.forEach(g),this.h()},h(){b(t,"role","tab"),b(t,"class",r="tab "+n[0]("outputs")),b(o,"role","tab"),b(o,"class",u="tab "+n[0]("collections")),b(y,"role","tab"),b(y,"class",P="tab "+n[0]("sources")),b(e,"role","tablist"),b(e,"class","tabs tabs-boxed sticky top-0 z-10")},m(O,U){z(O,e,U),w(e,t),w(t,l),w(e,s),w(e,o),w(o,a),w(e,d),w(e,y),w(y,S),k||(F=[Z(t,"click",n[3]),Z(o,"click",n[4]),Z(y,"click",n[5])],k=!0)},p(O,[U]){U&1&&r!==(r="tab "+O[0]("outputs"))&&b(t,"class",r),U&1&&u!==(u="tab "+O[0]("collections"))&&b(o,"class",u),U&1&&P!==(P="tab "+O[0]("sources"))&&b(y,"class",P)},i:se,o:se,d(O){O&&g(e),k=!1,ye(F)}}}function ct(n,e,t){let l,{activeTab:r="outputs"}=e;async function s(d){t(2,r=d)}const o=()=>s("outputs"),a=()=>s("collections"),u=()=>s("sources");return n.$$set=d=>{"activeTab"in d&&t(2,r=d.activeTab)},n.$$.update=()=>{n.$$.dirty&4&&t(0,l=function(d){return d===r?"tab-active":""})},[l,s,r,o,a,u]}class ut extends ge{constructor(e){super(),we(this,e,ct,at,ve,{activeTab:2})}}function Ne(n){let e,t,l,r,s;return{c(){e=T("div"),t=T("div"),l=T("span"),r=x(n[2]),this.h()},l(o){e=D(o,"DIV",{class:!0});var a=A(e);t=D(a,"DIV",{class:!0});var u=A(t);l=D(u,"SPAN",{});var d=A(l);r=ee(d,n[2]),d.forEach(g),u.forEach(g),a.forEach(g),this.h()},h(){b(t,"class",s="alert "+(n[1]?"alert-success":"alert-error")),b(e,"class","toast toast-center")},m(o,a){z(o,e,a),w(e,t),w(t,l),w(l,r)},p(o,a){a&4&&_e(r,o[2]),a&2&&s!==(s="alert "+(o[1]?"alert-success":"alert-error"))&&b(t,"class",s)},d(o){o&&g(e)}}}function ft(n){let e,t=n[0]&&Ne(n);return{c(){t&&t.c(),e=be()},l(l){t&&t.l(l),e=be()},m(l,r){t&&t.m(l,r),z(l,e,r)},p(l,[r]){l[0]?t?t.p(l,r):(t=Ne(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:se,o:se,d(l){l&&g(e),t&&t.d(l)}}}function dt(n,e,t){let{showToast:l=!1}=e,{toastSuccess:r=!0}=e,{toastText:s=""}=e;function o(a,u,d,y=2e3){t(1,r=a),t(2,s=a?u:d),t(0,l=!0),setTimeout(()=>t(0,l=!1),y)}return n.$$set=a=>{"showToast"in a&&t(0,l=a.showToast),"toastSuccess"in a&&t(1,r=a.toastSuccess),"toastText"in a&&t(2,s=a.toastText)},[l,r,s,o]}class Oe extends ge{constructor(e){super(),we(this,e,dt,ft,ve,{showToast:0,toastSuccess:1,toastText:2,show:3})}get show(){return this.$$.ctx[3]}}var ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var et={exports:{}};(function(n,e){(function(t,l){n.exports=l()})(ht,function(){var t=1e3,l=6e4,r=36e5,s="millisecond",o="second",a="minute",u="hour",d="day",y="week",S="month",P="quarter",k="year",F="date",O="Invalid Date",U=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,M=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(E){var p=["th","st","nd","rd"],f=E%100;return"["+E+(p[(f-20)%10]||p[f]||p[0])+"]"}},$=function(E,p,f){var i=String(E);return!i||i.length>=p?E:""+Array(p+1-i.length).join(f)+E},I={s:$,z:function(E){var p=-E.utcOffset(),f=Math.abs(p),i=Math.floor(f/60),c=f%60;return(p<=0?"+":"-")+$(i,2,"0")+":"+$(c,2,"0")},m:function E(p,f){if(p.date()<f.date())return-E(f,p);var i=12*(f.year()-p.year())+(f.month()-p.month()),c=p.clone().add(i,S),v=f-c<0,L=p.clone().add(i+(v?-1:1),S);return+(-(i+(f-c)/(v?c-L:L-c))||0)},a:function(E){return E<0?Math.ceil(E)||0:Math.floor(E)},p:function(E){return{M:S,y:k,w:y,d,D:F,h:u,m:a,s:o,ms:s,Q:P}[E]||String(E||"").toLowerCase().replace(/s$/,"")},u:function(E){return E===void 0}},H="en",_={};_[H]=Y;var B="$isDayjsObject",h=function(E){return E instanceof C||!(!E||!E[B])},R=function E(p,f,i){var c;if(!p)return H;if(typeof p=="string"){var v=p.toLowerCase();_[v]&&(c=v),f&&(_[v]=f,c=v);var L=p.split("-");if(!c&&L.length>1)return E(L[0])}else{var m=p.name;_[m]=p,c=m}return!i&&c&&(H=c),c||!i&&H},N=function(E,p){if(h(E))return E.clone();var f=typeof p=="object"?p:{};return f.date=E,f.args=arguments,new C(f)},j=I;j.l=R,j.i=h,j.w=function(E,p){return N(E,{locale:p.$L,utc:p.$u,x:p.$x,$offset:p.$offset})};var C=function(){function E(f){this.$L=R(f.locale,null,!0),this.parse(f),this.$x=this.$x||f.x||{},this[B]=!0}var p=E.prototype;return p.parse=function(f){this.$d=function(i){var c=i.date,v=i.utc;if(c===null)return new Date(NaN);if(j.u(c))return new Date;if(c instanceof Date)return new Date(c);if(typeof c=="string"&&!/Z$/i.test(c)){var L=c.match(U);if(L){var m=L[2]-1||0,V=(L[7]||"0").substring(0,3);return v?new Date(Date.UTC(L[1],m,L[3]||1,L[4]||0,L[5]||0,L[6]||0,V)):new Date(L[1],m,L[3]||1,L[4]||0,L[5]||0,L[6]||0,V)}}return new Date(c)}(f),this.init()},p.init=function(){var f=this.$d;this.$y=f.getFullYear(),this.$M=f.getMonth(),this.$D=f.getDate(),this.$W=f.getDay(),this.$H=f.getHours(),this.$m=f.getMinutes(),this.$s=f.getSeconds(),this.$ms=f.getMilliseconds()},p.$utils=function(){return j},p.isValid=function(){return this.$d.toString()!==O},p.isSame=function(f,i){var c=N(f);return this.startOf(i)<=c&&c<=this.endOf(i)},p.isAfter=function(f,i){return N(f)<this.startOf(i)},p.isBefore=function(f,i){return this.endOf(i)<N(f)},p.$g=function(f,i,c){return j.u(f)?this[i]:this.set(c,f)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(f,i){var c=this,v=!!j.u(i)||i,L=j.p(f),m=function(oe,te){var ie=j.w(c.$u?Date.UTC(c.$y,te,oe):new Date(c.$y,te,oe),c);return v?ie:ie.endOf(d)},V=function(oe,te){return j.w(c.toDate()[oe].apply(c.toDate("s"),(v?[0,0,0,0]:[23,59,59,999]).slice(te)),c)},q=this.$W,Q=this.$M,G=this.$D,re="set"+(this.$u?"UTC":"");switch(L){case k:return v?m(1,0):m(31,11);case S:return v?m(1,Q):m(0,Q+1);case y:var de=this.$locale().weekStart||0,he=(q<de?q+7:q)-de;return m(v?G-he:G+(6-he),Q);case d:case F:return V(re+"Hours",0);case u:return V(re+"Minutes",1);case a:return V(re+"Seconds",2);case o:return V(re+"Milliseconds",3);default:return this.clone()}},p.endOf=function(f){return this.startOf(f,!1)},p.$set=function(f,i){var c,v=j.p(f),L="set"+(this.$u?"UTC":""),m=(c={},c[d]=L+"Date",c[F]=L+"Date",c[S]=L+"Month",c[k]=L+"FullYear",c[u]=L+"Hours",c[a]=L+"Minutes",c[o]=L+"Seconds",c[s]=L+"Milliseconds",c)[v],V=v===d?this.$D+(i-this.$W):i;if(v===S||v===k){var q=this.clone().set(F,1);q.$d[m](V),q.init(),this.$d=q.set(F,Math.min(this.$D,q.daysInMonth())).$d}else m&&this.$d[m](V);return this.init(),this},p.set=function(f,i){return this.clone().$set(f,i)},p.get=function(f){return this[j.p(f)]()},p.add=function(f,i){var c,v=this;f=Number(f);var L=j.p(i),m=function(Q){var G=N(v);return j.w(G.date(G.date()+Math.round(Q*f)),v)};if(L===S)return this.set(S,this.$M+f);if(L===k)return this.set(k,this.$y+f);if(L===d)return m(1);if(L===y)return m(7);var V=(c={},c[a]=l,c[u]=r,c[o]=t,c)[L]||1,q=this.$d.getTime()+f*V;return j.w(q,this)},p.subtract=function(f,i){return this.add(-1*f,i)},p.format=function(f){var i=this,c=this.$locale();if(!this.isValid())return c.invalidDate||O;var v=f||"YYYY-MM-DDTHH:mm:ssZ",L=j.z(this),m=this.$H,V=this.$m,q=this.$M,Q=c.weekdays,G=c.months,re=c.meridiem,de=function(te,ie,ke,Me){return te&&(te[ie]||te(i,v))||ke[ie].slice(0,Me)},he=function(te){return j.s(m%12||12,te,"0")},oe=re||function(te,ie,ke){var Me=te<12?"AM":"PM";return ke?Me.toLowerCase():Me};return v.replace(M,function(te,ie){return ie||function(ke){switch(ke){case"YY":return String(i.$y).slice(-2);case"YYYY":return j.s(i.$y,4,"0");case"M":return q+1;case"MM":return j.s(q+1,2,"0");case"MMM":return de(c.monthsShort,q,G,3);case"MMMM":return de(G,q);case"D":return i.$D;case"DD":return j.s(i.$D,2,"0");case"d":return String(i.$W);case"dd":return de(c.weekdaysMin,i.$W,Q,2);case"ddd":return de(c.weekdaysShort,i.$W,Q,3);case"dddd":return Q[i.$W];case"H":return String(m);case"HH":return j.s(m,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return oe(m,V,!0);case"A":return oe(m,V,!1);case"m":return String(V);case"mm":return j.s(V,2,"0");case"s":return String(i.$s);case"ss":return j.s(i.$s,2,"0");case"SSS":return j.s(i.$ms,3,"0");case"Z":return L}return null}(te)||L.replace(":","")})},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(f,i,c){var v,L=this,m=j.p(i),V=N(f),q=(V.utcOffset()-this.utcOffset())*l,Q=this-V,G=function(){return j.m(L,V)};switch(m){case k:v=G()/12;break;case S:v=G();break;case P:v=G()/3;break;case y:v=(Q-q)/6048e5;break;case d:v=(Q-q)/864e5;break;case u:v=Q/r;break;case a:v=Q/l;break;case o:v=Q/t;break;default:v=Q}return c?v:j.a(v)},p.daysInMonth=function(){return this.endOf(S).$D},p.$locale=function(){return _[this.$L]},p.locale=function(f,i){if(!f)return this.$L;var c=this.clone(),v=R(f,i,!0);return v&&(c.$L=v),c},p.clone=function(){return j.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},E}(),le=C.prototype;return N.prototype=le,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",d],["$M",S],["$y",k],["$D",F]].forEach(function(E){le[E[1]]=function(p){return this.$g(p,E[0],E[1])}}),N.extend=function(E,p){return E.$i||(E(p,C,N),E.$i=!0),N},N.locale=R,N.isDayjs=h,N.unix=function(E){return N(1e3*E)},N.en=_[H],N.Ls=_,N.p={},N})})(et);var _t=et.exports;const tt=mt(_t);function pt(n,e,t){const l=n.name.split(".").pop().toLowerCase();n.fileType="json",["png","webp","jpeg","jpg","gif"].includes(l)&&(n.fileType="image"),["mp4","webm","mov","avi","mkv"].includes(l)&&(n.fileType="video"),n.url=`${t}/browser/files/view?folder_type=${e}&filename=${n.name}&folder_path=${n.folder_path}`;const r=tt.unix(n.created_at);return n.formattedDatetime=r.format("YYYY-MM-DD HH-mm-ss"),n.bytes/1024/1024>1?n.formattedSize=(n.bytes/1024/1024).toFixed(2)+" MB":n.formattedSize=Math.round(n.bytes/1024)+" KB",n}function bt(n){n.fileType="dir";const e=n.folder_path?`${n.folder_path}/${n.name}`:n.name;n.path=e;const t=tt.unix(n.created_at);return n.formattedDatetime=t.format("YYYY-MM-DD HH-mm-ss"),n.formattedSize="0 KB",n}async function Ue(n,e,t){let l=e+"/browser/files?folder_type="+n;t&&(l=l+`&folder_path=${t}&`);let o=(await(await fetch(l)).json()).files;return o.forEach(a=>{a.type==="dir"?a=bt(a):a=pt(a,n,e)}),o}function nt(n,e){if(n>=e)return n;const t=document.documentElement.scrollHeight;return window.innerHeight+window.scrollY>=t?n+10:n}async function lt(n,e,t){const l=await fetch(n.url),r=await l.blob(),s=new File([r],n.name,{type:l.headers.get("Content-Type")||""}),o=e.loadGraphData.bind(e);e.loadGraphData=async function(a){var d;const u=(d=window.top)==null?void 0:d.document.getElementById("comfy-browser-dialog");u&&(u.style.display="none"),await o(a)},await e.handleFile(s),t.show(!1,"Loaded","No workflow found here")}function vt(n){let e,t,l,r,s=n[0].fileType==="json"&&je(),o=n[0].fileType==="image"&&Pe(n),a=n[0].fileType==="video"&&He(n);return{c(){e=T("a"),s&&s.c(),t=J(),o&&o.c(),l=J(),a&&a.c(),this.h()},l(u){e=D(u,"A",{href:!0,target:!0,style:!0});var d=A(e);s&&s.l(d),t=W(d),o&&o.l(d),l=W(d),a&&a.l(d),d.forEach(g),this.h()},h(){b(e,"href",r=n[0].url),b(e,"target","_blank"),Le(e,"height","inherit"),Le(e,"width","inherit")},m(u,d){z(u,e,d),s&&s.m(e,null),w(e,t),o&&o.m(e,null),w(e,l),a&&a.m(e,null)},p(u,d){u[0].fileType==="json"?s||(s=je(),s.c(),s.m(e,t)):s&&(s.d(1),s=null),u[0].fileType==="image"?o?o.p(u,d):(o=Pe(u),o.c(),o.m(e,l)):o&&(o.d(1),o=null),u[0].fileType==="video"?a?a.p(u,d):(a=He(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null),d&1&&r!==(r=u[0].url)&&b(e,"href",r)},d(u){u&&g(e),s&&s.d(),o&&o.d(),a&&a.d()}}}function gt(n){let e,t='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"></path></svg>',l,r;return{c(){e=T("button"),e.innerHTML=t,this.h()},l(s){e=D(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-fq6lbl"&&(e.innerHTML=t),this.h()},h(){b(e,"class","w-full h-full flex items-center justify-center")},m(s,o){z(s,e,o),l||(r=Z(e,"click",n[3]),l=!0)},p:se,d(s){s&&g(e),l=!1,r()}}}function je(n){let e,t='<span class="font-bold text-xl">JSON</span>';return{c(){e=T("div"),e.innerHTML=t,this.h()},l(l){e=D(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-opd4jy"&&(e.innerHTML=t),this.h()},h(){b(e,"class","w-full h-full flex items-center justify-center")},m(l,r){z(l,e,r)},d(l){l&&g(e)}}}function Pe(n){let e,t,l;return{c(){e=T("img"),this.h()},l(r){e=D(r,"IMG",{class:!0,loading:!0,src:!0,alt:!0}),this.h()},h(){b(e,"class","h-full w-full object-contain"),b(e,"loading","lazy"),$e(e.src,t=n[0].url)||b(e,"src",t),b(e,"alt",l=n[0].name)},m(r,s){z(r,e,s)},p(r,s){s&1&&!$e(e.src,t=r[0].url)&&b(e,"src",t),s&1&&l!==(l=r[0].name)&&b(e,"alt",l)},d(r){r&&g(e)}}}function He(n){let e,t,l;return{c(){e=T("video"),t=T("track"),this.h()},l(r){e=D(r,"VIDEO",{class:!0,src:!0});var s=A(e);t=D(s,"TRACK",{kind:!0}),s.forEach(g),this.h()},h(){b(t,"kind","captions"),b(e,"class","h-full w-full object-contain pb-0.5 border-0.5 border-black"),$e(e.src,l=n[0].url)||b(e,"src",l),e.loop=!0,e.autoplay=!0,e.muted=!0},m(r,s){z(r,e,s),w(e,t)},p(r,s){s&1&&!$e(e.src,l=r[0].url)&&b(e,"src",l)},d(r){r&&g(e)}}}function wt(n){let e;function t(s,o){return s[0].type==="dir"?gt:vt}let l=t(n),r=l(n);return{c(){e=T("div"),r.c(),this.h()},l(s){e=D(s,"DIV",{class:!0});var o=A(e);r.l(o),o.forEach(g),this.h()},h(){b(e,"class",n[1])},m(s,o){z(s,e,o),r.m(e,null)},p(s,[o]){l===(l=t(s))&&r?r.p(s,o):(r.d(1),r=l(s),r&&(r.c(),r.m(e,null))),o&2&&b(e,"class",s[1])},i:se,o:se,d(s){s&&g(e),r.d()}}}function yt(n,e,t){let{file:l}=e,{styleClass:r}=e,{onClickDir:s}=e;const o=()=>s(l);return n.$$set=a=>{"file"in a&&t(0,l=a.file),"styleClass"in a&&t(1,r=a.styleClass),"onClickDir"in a&&t(2,s=a.onClickDir)},[l,r,s,o]}class st extends ge{constructor(e){super(),we(this,e,yt,wt,ve,{file:0,styleClass:1,onClickDir:2})}}function Ve(n,e,t){const l=n.slice();return l[21]=e[t],l}function Be(n,e,t){const l=n.slice();return l[24]=e[t],l[26]=t,l}function Ae(n){let e,t,l=n[24]+"",r,s,o;function a(){return n[15](n[26])}return{c(){e=T("li"),t=T("button"),r=x(l)},l(u){e=D(u,"LI",{});var d=A(e);t=D(d,"BUTTON",{});var y=A(t);r=ee(y,l),y.forEach(g),d.forEach(g)},m(u,d){z(u,e,d),w(e,t),w(t,r),s||(o=Z(t,"click",a),s=!0)},p(u,d){n=u,d&1&&l!==(l=n[24]+"")&&_e(r,l)},d(u){u&&g(e),s=!1,o()}}}function Fe(n){let e,t,l,r,s,o=n[21].name+"",a,u,d,y=n[21].formattedDatetime+"",S,P,k,F=n[21].formattedSize+"",O,U,M,Y,$,I="Collect",H,_,B="Delete",h,R,N,j;l=new st({props:{file:n[21],styleClass:"w-full h-36",onClickDir:n[10]}});let C=n[3]&&n[21].type!="dir"&&Ye(n);function le(){return n[19](n[21])}function E(){return n[20](n[21])}return{c(){e=T("div"),t=T("div"),ae(l.$$.fragment),r=J(),s=T("p"),a=x(o),u=J(),d=T("p"),S=x(y),P=J(),k=T("p"),O=x(F),U=J(),M=T("div"),C&&C.c(),Y=J(),$=T("button"),$.textContent=I,H=J(),_=T("button"),_.textContent=B,h=J(),this.h()},l(p){e=D(p,"DIV",{class:!0});var f=A(e);t=D(f,"DIV",{class:!0});var i=A(t);ce(l.$$.fragment,i),i.forEach(g),r=W(f),s=D(f,"P",{class:!0});var c=A(s);a=ee(c,o),c.forEach(g),u=W(f),d=D(f,"P",{class:!0});var v=A(d);S=ee(v,y),v.forEach(g),P=W(f),k=D(f,"P",{class:!0});var L=A(k);O=ee(L,F),L.forEach(g),U=W(f),M=D(f,"DIV",{class:!0});var m=A(M);C&&C.l(m),Y=W(m),$=D(m,"BUTTON",{class:!0,"data-svelte-h":!0}),ne($)!=="svelte-jct3zc"&&($.textContent=I),H=W(m),_=D(m,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(_)!=="svelte-1t0nfha"&&(_.textContent=B),m.forEach(g),h=W(f),f.forEach(g),this.h()},h(){b(t,"class","flex items-center"),b(s,"class","font-bold max-h-12 leading-6 overflow-auto mt-1"),b(d,"class","text-gray-500 text-xs"),b(k,"class","text-gray-500 text-xs"),b($,"class","btn btn-link btn-sm p-0 no-underline text-accent"),b(_,"class","btn btn-link btn-sm p-0 no-underline text-error"),b(M,"class",""),b(e,"class","bg-base-100 p-2 bg-base-300")},m(p,f){z(p,e,f),w(e,t),ue(l,t,null),w(e,r),w(e,s),w(s,a),w(e,u),w(e,d),w(d,S),w(e,P),w(e,k),w(k,O),w(e,U),w(e,M),C&&C.m(M,null),w(M,Y),w(M,$),w(M,H),w(M,_),w(e,h),R=!0,N||(j=[Z($,"click",le),Z(_,"click",E)],N=!0)},p(p,f){n=p;const i={};f&208&&(i.file=n[21]),l.$set(i),(!R||f&208)&&o!==(o=n[21].name+"")&&_e(a,o),(!R||f&208)&&y!==(y=n[21].formattedDatetime+"")&&_e(S,y),(!R||f&208)&&F!==(F=n[21].formattedSize+"")&&_e(O,F),n[3]&&n[21].type!="dir"?C?C.p(n,f):(C=Ye(n),C.c(),C.m(M,Y)):C&&(C.d(1),C=null)},i(p){R||(K(l.$$.fragment,p),R=!0)},o(p){X(l.$$.fragment,p),R=!1},d(p){p&&g(e),fe(l),C&&C.d(),N=!1,ye(j)}}}function Ye(n){let e,t="Load",l,r;function s(){return n[18](n[21])}return{c(){e=T("button"),e.textContent=t,this.h()},l(o){e=D(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1ie7fpp"&&(e.textContent=t),this.h()},h(){b(e,"class","btn btn-link btn-sm p-0 no-underline text-accent")},m(o,a){z(o,e,a),l||(r=Z(e,"click",s),l=!0)},p(o,a){n=o},d(o){o&&g(e),l=!1,r()}}}function ze(n){let e=["dir","image","video","json"].includes(n[21].fileType),t,l,r=e&&Fe(n);return{c(){r&&r.c(),t=be()},l(s){r&&r.l(s),t=be()},m(s,o){r&&r.m(s,o),z(s,t,o),l=!0},p(s,o){o&208&&(e=["dir","image","video","json"].includes(s[21].fileType)),e?r?(r.p(s,o),o&208&&K(r,1)):(r=Fe(s),r.c(),K(r,1),r.m(t.parentNode,t)):r&&(Ce(),X(r,1,1,()=>{r=null}),Ee())},i(s){l||(K(r),l=!0)},o(s){X(r),l=!1},d(s){s&&g(t),r&&r.d(s)}}}function Re(n){let e,t;function l(o,a){return o[5]?Tt:kt}let r=l(n),s=r(n);return{c(){e=T("div"),t=T("span"),s.c(),this.h()},l(o){e=D(o,"DIV",{class:!0});var a=A(e);t=D(a,"SPAN",{class:!0});var u=A(t);s.l(u),u.forEach(g),a.forEach(g),this.h()},h(){b(t,"class","font-bold text-4xl"),b(e,"class","w-full h-full flex items-center justify-center")},m(o,a){z(o,e,a),w(e,t),s.m(t,null)},p(o,a){r!==(r=l(o))&&(s.d(1),s=r(o),s&&(s.c(),s.m(t,null)))},d(o){o&&g(e),s.d()}}}function kt(n){let e;return{c(){e=x("Loading ...")},l(t){e=ee(t,"Loading ...")},m(t,l){z(t,e,l)},d(t){t&&g(e)}}}function Tt(n){let e;return{c(){e=x("It's empty here.")},l(t){e=ee(t,"It's empty here.")},m(t,l){z(t,e,l)},d(t){t&&g(e)}}}function Dt(n){let e,t,l,r,s="Root",o,a,u,d,y,S,P,k,F,O,U=me((n[0]||"").split("/")),M=[];for(let _=0;_<U.length;_+=1)M[_]=Ae(Be(n,U,_));let Y=me(n[4].filter(n[17]).slice(0,n[6])),$=[];for(let _=0;_<Y.length;_+=1)$[_]=ze(Ve(n,Y,_));const I=_=>X($[_],1,1,()=>{$[_]=null});let H=n[4].length===0&&Re(n);return{c(){e=T("div"),t=T("ul"),l=T("li"),r=T("button"),r.textContent=s,o=J();for(let _=0;_<M.length;_+=1)M[_].c();a=J(),u=T("input"),d=J(),y=T("div");for(let _=0;_<$.length;_+=1)$[_].c();S=J(),H&&H.c(),P=be(),this.h()},l(_){e=D(_,"DIV",{class:!0});var B=A(e);t=D(B,"UL",{class:!0});var h=A(t);l=D(h,"LI",{});var R=A(l);r=D(R,"BUTTON",{"data-svelte-h":!0}),ne(r)!=="svelte-1paj67z"&&(r.textContent=s),R.forEach(g),o=W(h);for(let j=0;j<M.length;j+=1)M[j].l(h);h.forEach(g),a=W(B),u=D(B,"INPUT",{type:!0,placeholder:!0,class:!0}),B.forEach(g),d=W(_),y=D(_,"DIV",{class:!0});var N=A(y);for(let j=0;j<$.length;j+=1)$[j].l(N);N.forEach(g),S=W(_),H&&H.l(_),P=be(),this.h()},h(){b(t,"class","basis-3/4"),b(u,"type","text"),b(u,"placeholder","Filter by filename"),b(u,"class","input input-bordered w-full h-full rounded-none border-slate-600 text-sm basis-1/4"),b(e,"class","max-w-full text-sm breadcrumbs flex flex-row ml-4"),b(y,"class","grid grid-cols-4 lg:grid-cols-6 gap-2")},m(_,B){z(_,e,B),w(e,t),w(t,l),w(l,r),w(t,o);for(let h=0;h<M.length;h+=1)M[h]&&M[h].m(t,null);w(e,a),w(e,u),pe(u,n[2]),z(_,d,B),z(_,y,B);for(let h=0;h<$.length;h+=1)$[h]&&$[h].m(y,null);z(_,S,B),H&&H.m(_,B),z(_,P,B),k=!0,F||(O=[Z(r,"click",n[14]),Z(u,"input",n[16])],F=!0)},p(_,[B]){if(B&2049){U=me((_[0]||"").split("/"));let h;for(h=0;h<U.length;h+=1){const R=Be(_,U,h);M[h]?M[h].p(R,B):(M[h]=Ae(R),M[h].c(),M[h].m(t,null))}for(;h<M.length;h+=1)M[h].d(1);M.length=U.length}if(B&4&&u.value!==_[2]&&pe(u,_[2]),B&2010){Y=me(_[4].filter(_[17]).slice(0,_[6]));let h;for(h=0;h<Y.length;h+=1){const R=Ve(_,Y,h);$[h]?($[h].p(R,B),K($[h],1)):($[h]=ze(R),$[h].c(),K($[h],1),$[h].m(y,null))}for(Ce(),h=Y.length;h<$.length;h+=1)I(h);Ee()}_[4].length===0?H?H.p(_,B):(H=Re(_),H.c(),H.m(P.parentNode,P)):H&&(H.d(1),H=null)},i(_){if(!k){for(let B=0;B<Y.length;B+=1)K($[B]);k=!0}},o(_){$=$.filter(Boolean);for(let B=0;B<$.length;B+=1)X($[B]);k=!1},d(_){_&&(g(e),g(d),g(y),g(S),g(P)),De(M,_),De($,_),H&&H.d(_),F=!1,ye(O)}}}function Ct(n,e,t){let{comfyUrl:l}=e,{folderType:r}=e,{toast:s}=e,{folderPath:o}=e,a,u=[],d=!1,y=20,S="",P=new RegExp("");Ie(async()=>{t(3,a=window.top.app),t(0,o=""),window.addEventListener("scroll",()=>{t(6,y=nt(y,u.length))})});async function k(h){const R=await fetch(l+"/browser/collections",{method:"POST",body:JSON.stringify({filename:h.name,folder_path:h.folder_path,folder_type:r})});s.show(R.ok,"Added to collections","Failed to add to collections. Please check the ComfyUI server.")}async function F(h){if(!confirm("You want to delete this file? "+h.name))return;const N=await fetch(l+"/browser/files",{method:"DELETE",body:JSON.stringify({folder_type:r,filename:h.name,folder_path:h.folder_path})});s.show(N.ok,"Deleted the file "+h.name,"Failed to delete the file. Please check the ComfyUI server."),t(4,u=u.filter(j=>j!=h))}async function O(h){t(0,o=h.path)}async function U(h){if(h===-1){t(0,o="");return}t(0,o=o.split("/").slice(0,h+1).join("/"))}const M=()=>U(-1),Y=h=>U(h);function $(){S=this.value,t(2,S)}const I=h=>P.test(h.name.toLowerCase()),H=async h=>await lt(h,a,s),_=async h=>await k(h),B=async h=>await F(h);return n.$$set=h=>{"comfyUrl"in h&&t(12,l=h.comfyUrl),"folderType"in h&&t(13,r=h.folderType),"toast"in h&&t(1,s=h.toast),"folderPath"in h&&t(0,o=h.folderPath)},n.$$.update=()=>{if(n.$$.dirty&12289&&o!=null&&Ue(r,l,o).then(h=>{t(4,u=h),t(5,d=!0)}),n.$$.dirty&4)try{t(7,P=new RegExp(S.toLowerCase()))}catch{t(7,P=new RegExp(""))}},[o,s,S,a,u,d,y,P,k,F,O,U,l,r,M,Y,$,I,H,_,B]}class rt extends ge{constructor(e){super(),we(this,e,Ct,Dt,ve,{comfyUrl:12,folderType:13,toast:1,folderPath:0})}}function Et(n){let e,t,l,r;e=new rt({props:{folderType:"outputs",comfyUrl:n[0],toast:n[1]}});let s={};return l=new Oe({props:s}),n[2](l),{c(){ae(e.$$.fragment),t=J(),ae(l.$$.fragment)},l(o){ce(e.$$.fragment,o),t=W(o),ce(l.$$.fragment,o)},m(o,a){ue(e,o,a),z(o,t,a),ue(l,o,a),r=!0},p(o,[a]){const u={};a&1&&(u.comfyUrl=o[0]),a&2&&(u.toast=o[1]),e.$set(u);const d={};l.$set(d)},i(o){r||(K(e.$$.fragment,o),K(l.$$.fragment,o),r=!0)},o(o){X(e.$$.fragment,o),X(l.$$.fragment,o),r=!1},d(o){o&&g(t),fe(e,o),n[2](null),fe(l,o)}}}function Mt(n,e,t){let{comfyUrl:l}=e,r;function s(o){Te[o?"unshift":"push"](()=>{r=o,t(1,r)})}return n.$$set=o=>{"comfyUrl"in o&&t(0,l=o.comfyUrl)},[l,r,s]}class St extends ge{constructor(e){super(),we(this,e,Mt,Et,ve,{comfyUrl:0})}}function Je(n,e,t){const l=n.slice();return l[30]=e[t],l}function We(n,e,t){const l=n.slice();return l[33]=e[t],l[35]=t,l}function qe(n){let e,t="Save",l,r;return{c(){e=T("button"),e.textContent=t,this.h()},l(s){e=D(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-vwqboa"&&(e.textContent=t),this.h()},h(){b(e,"class","btn btn-outline btn-accent")},m(s,o){z(s,e,o),l||(r=Z(e,"click",n[11]),l=!0)},p:se,d(s){s&&g(e),l=!1,r()}}}function Ge(n){let e,t,l=n[33]+"",r,s,o;function a(){return n[20](n[35])}return{c(){e=T("li"),t=T("button"),r=x(l)},l(u){e=D(u,"LI",{});var d=A(e);t=D(d,"BUTTON",{});var y=A(t);r=ee(y,l),y.forEach(g),d.forEach(g)},m(u,d){z(u,e,d),w(e,t),w(t,r),s||(o=Z(t,"click",a),s=!0)},p(u,d){n=u,d[0]&1&&l!==(l=n[33]+"")&&_e(r,l)},d(u){u&&g(e),s=!1,o()}}}function Ze(n){let e,t="Load",l,r;function s(){return n[24](n[30])}return{c(){e=T("button"),e.textContent=t,this.h()},l(o){e=D(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-1ie7fpp"&&(e.textContent=t),this.h()},h(){b(e,"class","btn btn-link btn-sm p-0 no-underline text-accent")},m(o,a){z(o,e,a),l||(r=Z(e,"click",s),l=!0)},p(o,a){n=o},d(o){o&&g(e),l=!1,r()}}}function Ke(n){let e,t,l,r,s,o,a,u,d=n[30].formattedDatetime+"",y,S,P=n[30].formattedSize+"",k,F,O,U,M,Y="Remove",$,I,H,_,B,h,R,N;t=new st({props:{file:n[30],styleClass:"w-36",onClickDir:n[15]}});function j(...p){return n[23](n[30],...p)}let C=n[2]&&n[30].type!="dir"&&Ze(n);function le(){return n[25](n[30])}function E(...p){return n[26](n[30],...p)}return{c(){e=T("li"),ae(t.$$.fragment),l=J(),r=T("div"),s=T("input"),a=J(),u=T("p"),y=x(d),S=x(" | "),k=x(P),F=J(),O=T("div"),C&&C.c(),U=J(),M=T("button"),M.textContent=Y,$=J(),I=T("div"),H=T("textarea"),B=J(),this.h()},l(p){e=D(p,"LI",{class:!0});var f=A(e);ce(t.$$.fragment,f),l=W(f),r=D(f,"DIV",{class:!0});var i=A(r);s=D(i,"INPUT",{type:!0,class:!0}),a=W(i),u=D(i,"P",{class:!0});var c=A(u);y=ee(c,d),S=ee(c," | "),k=ee(c,P),c.forEach(g),F=W(i),O=D(i,"DIV",{class:!0});var v=A(O);C&&C.l(v),U=W(v),M=D(v,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(M)!=="svelte-1mhg6fb"&&(M.textContent=Y),v.forEach(g),i.forEach(g),$=W(f),I=D(f,"DIV",{});var L=A(I);H=D(L,"TEXTAREA",{name:!0,cols:!0,rows:!0,placeholder:!0,class:!0}),A(H).forEach(g),L.forEach(g),B=W(f),f.forEach(g),this.h()},h(){b(s,"type","text"),b(s,"class","input-bordered font-bold w-full bg-base-100"),s.value=o=n[30].name,b(u,"class","text-gray-500 text-xs"),b(M,"class","btn btn-link btn-sm p-0 no-underline text-error"),b(O,"class","bottom-0 absolute"),b(r,"class","space-y-2 w-96 relative"),b(H,"name","notes"),b(H,"cols","40"),b(H,"rows","4"),b(H,"placeholder","write some memos..."),b(H,"class","resize-none textarea"),H.value=_=n[30].notes,b(e,"class","flex h-36 border-0 space-x-4 bg-base-100 p-2 bg-base-300")},m(p,f){z(p,e,f),ue(t,e,null),w(e,l),w(e,r),w(r,s),w(r,a),w(r,u),w(u,y),w(u,S),w(u,k),w(r,F),w(r,O),C&&C.m(O,null),w(O,U),w(O,M),w(e,$),w(e,I),w(I,H),w(e,B),h=!0,R||(N=[Z(s,"blur",j),Z(M,"click",le),Z(H,"blur",E)],R=!0)},p(p,f){n=p;const i={};f[0]&584&&(i.file=n[30]),t.$set(i),(!h||f[0]&584&&o!==(o=n[30].name)&&s.value!==o)&&(s.value=o),(!h||f[0]&584)&&d!==(d=n[30].formattedDatetime+"")&&_e(y,d),(!h||f[0]&584)&&P!==(P=n[30].formattedSize+"")&&_e(k,P),n[2]&&n[30].type!="dir"?C?C.p(n,f):(C=Ze(n),C.c(),C.m(O,U)):C&&(C.d(1),C=null),(!h||f[0]&584&&_!==(_=n[30].notes))&&(H.value=_)},i(p){h||(K(t.$$.fragment,p),h=!0)},o(p){X(t.$$.fragment,p),h=!1},d(p){p&&g(e),fe(t),C&&C.d(),R=!1,ye(N)}}}function Qe(n){let e,t;function l(o,a){return o[8]?Ut:$t}let r=l(n),s=r(n);return{c(){e=T("div"),t=T("span"),s.c(),this.h()},l(o){e=D(o,"DIV",{class:!0});var a=A(e);t=D(a,"SPAN",{class:!0});var u=A(t);s.l(u),u.forEach(g),a.forEach(g),this.h()},h(){b(t,"class","font-bold text-4xl"),b(e,"class","w-full h-full flex items-center justify-center")},m(o,a){z(o,e,a),w(e,t),s.m(t,null)},p(o,a){r!==(r=l(o))&&(s.d(1),s=r(o),s&&(s.c(),s.m(t,null)))},d(o){o&&g(e),s.d()}}}function $t(n){let e;return{c(){e=x("Loading ...")},l(t){e=ee(t,"Loading ...")},m(t,l){z(t,e,l)},d(t){t&&g(e)}}}function Ut(n){let e;return{c(){e=x("It's empty here.")},l(t){e=ee(t,"It's empty here.")},m(t,l){z(t,e,l)},d(t){t&&g(e)}}}function It(n){var f;let e,t,l,r,s,o="Sync",a,u,d,y,S,P="Root",k,F,O,U,M,Y,$,I,H,_,B,h=n[5]!=((f=n[4])==null?void 0:f.git_repo)&&qe(n),R=me((n[0]||"").split("/")),N=[];for(let i=0;i<R.length;i+=1)N[i]=Ge(We(n,R,i));let j=me(n[3].filter(n[22]).slice(0,n[6])),C=[];for(let i=0;i<j.length;i+=1)C[i]=Ke(Je(n,j,i));const le=i=>X(C[i],1,1,()=>{C[i]=null});let E=n[3].length===0&&Qe(n),p={};return I=new Oe({props:p}),n[27](I),{c(){e=T("div"),t=T("input"),l=J(),h&&h.c(),r=J(),s=T("button"),s.textContent=o,a=J(),u=T("div"),d=T("ul"),y=T("li"),S=T("button"),S.textContent=P,k=J();for(let i=0;i<N.length;i+=1)N[i].c();F=J(),O=T("input"),U=J(),M=T("ul");for(let i=0;i<C.length;i+=1)C[i].c();Y=J(),E&&E.c(),$=J(),ae(I.$$.fragment),this.h()},l(i){e=D(i,"DIV",{class:!0});var c=A(e);t=D(c,"INPUT",{type:!0,placeholder:!0,class:!0}),l=W(c),h&&h.l(c),r=W(c),s=D(c,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(s)!=="svelte-118xeor"&&(s.textContent=o),c.forEach(g),a=W(i),u=D(i,"DIV",{class:!0});var v=A(u);d=D(v,"UL",{class:!0});var L=A(d);y=D(L,"LI",{});var m=A(y);S=D(m,"BUTTON",{"data-svelte-h":!0}),ne(S)!=="svelte-1paj67z"&&(S.textContent=P),m.forEach(g),k=W(L);for(let q=0;q<N.length;q+=1)N[q].l(L);L.forEach(g),F=W(v),O=D(v,"INPUT",{type:!0,placeholder:!0,class:!0}),v.forEach(g),U=W(i),M=D(i,"UL",{class:!0});var V=A(M);for(let q=0;q<C.length;q+=1)C[q].l(V);V.forEach(g),Y=W(i),E&&E.l(i),$=W(i),ce(I.$$.fragment,i),this.h()},h(){b(t,"type","text"),b(t,"placeholder","Input your git repository address"),b(t,"class","input input-bordered w-full max-w-lg"),b(s,"class","btn btn-outline btn-accent"),b(e,"class","border-b-2 border-slate-700 pb-2"),b(d,"class","basis-2/3"),b(O,"type","text"),b(O,"placeholder","Filter by filename or memos"),b(O,"class","input input-bordered border-slate-600 w-full h-full rounded-none text-sm basis-1/3"),b(u,"class","max-w-full text-sm breadcrumbs flex flex-row ml-4"),b(M,"class","space-y-2")},m(i,c){z(i,e,c),w(e,t),pe(t,n[5]),w(e,l),h&&h.m(e,null),w(e,r),w(e,s),z(i,a,c),z(i,u,c),w(u,d),w(d,y),w(y,S),w(d,k);for(let v=0;v<N.length;v+=1)N[v]&&N[v].m(d,null);w(u,F),w(u,O),pe(O,n[1]),z(i,U,c),z(i,M,c);for(let v=0;v<C.length;v+=1)C[v]&&C[v].m(M,null);z(i,Y,c),E&&E.m(i,c),z(i,$,c),ue(I,i,c),H=!0,_||(B=[Z(t,"input",n[18]),Z(s,"click",n[10]),Z(S,"click",n[19]),Z(O,"input",n[21])],_=!0)},p(i,c){var L;if(c[0]&32&&t.value!==i[5]&&pe(t,i[5]),i[5]!=((L=i[4])==null?void 0:L.git_repo)?h?h.p(i,c):(h=qe(i),h.c(),h.m(e,r)):h&&(h.d(1),h=null),c[0]&65537){R=me((i[0]||"").split("/"));let m;for(m=0;m<R.length;m+=1){const V=We(i,R,m);N[m]?N[m].p(V,c):(N[m]=Ge(V),N[m].c(),N[m].m(d,null))}for(;m<N.length;m+=1)N[m].d(1);N.length=R.length}if(c[0]&2&&O.value!==i[1]&&pe(O,i[1]),c[0]&62156){j=me(i[3].filter(i[22]).slice(0,i[6]));let m;for(m=0;m<j.length;m+=1){const V=Je(i,j,m);C[m]?(C[m].p(V,c),K(C[m],1)):(C[m]=Ke(V),C[m].c(),K(C[m],1),C[m].m(M,null))}for(Ce(),m=j.length;m<C.length;m+=1)le(m);Ee()}i[3].length===0?E?E.p(i,c):(E=Qe(i),E.c(),E.m($.parentNode,$)):E&&(E.d(1),E=null);const v={};I.$set(v)},i(i){if(!H){for(let c=0;c<j.length;c+=1)K(C[c]);K(I.$$.fragment,i),H=!0}},o(i){C=C.filter(Boolean);for(let c=0;c<C.length;c+=1)X(C[c]);X(I.$$.fragment,i),H=!1},d(i){i&&(g(e),g(a),g(u),g(U),g(M),g(Y),g($)),h&&h.d(),De(N,i),De(C,i),E&&E.d(i),n[27](null),fe(I,i),_=!1,ye(B)}}}const Se="collections";function Ot(n,e,t){let{comfyUrl:l}=e,r,s=[],o={},a="",u=20,d,y,S=!1,P="",k=new RegExp("");Ie(async()=>{t(2,r=window.top.app),t(0,y=""),t(4,o=await F()||{}),t(5,a=o==null?void 0:o.git_repo),window.addEventListener("scroll",()=>{t(6,u=nt(u,s.length))})});async function F(){return await(await fetch(l+"/browser/config")).json()}async function O(i){const c=i.target;c.disabled=!0,c.innerHTML="Syncing...";const v=await fetch(l+"/browser/collections/sync",{method:"POST"});d.show(v.ok,"Synced","Failed to sync. Please check the ComfyUI server."),c.disabled=!1,c.innerHTML="Sync",t(0,y=""),t(3,s=await Ue(Se,l))}async function U(){const i=await fetch(l+"/browser/config",{method:"PUT",body:JSON.stringify({git_repo:a})});d.show(i.ok,"Updated config","Failed to update config. Please check the ComfyUI server.")}async function M(i){if(!confirm("You want to delete this file? "+i.name))return;const v=await fetch(l+"/browser/files",{method:"DELETE",body:JSON.stringify({folder_type:Se,filename:i.name,folder_path:i.folder_path})});d.show(v.ok,"Deleted the file "+i.name,"Failed to delete the file. Please check the ComfyUI server."),t(3,s=s.filter(L=>L!=i))}async function Y(i,c){return(await fetch(l+"/browser/files",{method:"PUT",body:JSON.stringify({folder_type:Se,folder_path:i.folder_path,filename:i.name,new_data:c})})).ok}async function $(i,c){const v=i.target.value;if(v===c.name)return;const L=await Y(c,{filename:v,notes:c.notes||"",folder_path:c.folder_path});d.show(L,"Memos Updated","Failed to update. Please check the ComfyUI server.")}async function I(i,c){const v=i.target.value;if(v==c.notes)return;const L=await Y(c,{filename:c.name,notes:v,folder_path:c.folder_path});d.show(L,"Updated","Failed to update. Please check the ComfyUI server.")}async function H(i){t(0,y=i.path)}async function _(i){if(i===-1){t(0,y="");return}t(0,y=y.split("/").slice(0,i+1).join("/"))}function B(){a=this.value,t(5,a)}const h=()=>_(-1),R=i=>_(i);function N(){P=this.value,t(1,P)}const j=i=>k.test(i.name.toLowerCase())||k.test(i.notes.toLowerCase()),C=(i,c)=>$(c,i),le=async i=>await lt(i,r,d),E=async i=>await M(i),p=(i,c)=>I(c,i);function f(i){Te[i?"unshift":"push"](()=>{d=i,t(7,d)})}return n.$$set=i=>{"comfyUrl"in i&&t(17,l=i.comfyUrl)},n.$$.update=()=>{if(n.$$.dirty[0]&131073&&y!=null&&Ue(Se,l,y).then(i=>{t(3,s=i),t(8,S=!0)}),n.$$.dirty[0]&2)try{t(9,k=new RegExp(P.toLowerCase()))}catch{t(9,k=new RegExp(""))}},[y,P,r,s,o,a,u,d,S,k,O,U,M,$,I,H,_,l,B,h,R,N,j,C,le,E,p,f]}class Lt extends ge{constructor(e){super(),we(this,e,Ot,It,ve,{comfyUrl:17},null,[-1,-1])}}function Xe(n,e,t){const l=n.slice();return l[17]=e[t],l}function Nt(n){let e,t='<span class="font-bold text-4xl">No source selected.</span>';return{c(){e=T("div"),e.innerHTML=t,this.h()},l(l){e=D(l,"DIV",{class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-5nwcqp"&&(e.innerHTML=t),this.h()},h(){b(e,"class","w-full h-full flex items-center justify-center")},m(l,r){z(l,e,r)},p:se,i:se,o:se,d(l){l&&g(e)}}}function jt(n){let e,t;return e=new rt({props:{folderType:"sources",folderPath:n[3].name,comfyUrl:n[0],toast:n[2]}}),{c(){ae(e.$$.fragment)},l(l){ce(e.$$.fragment,l)},m(l,r){ue(e,l,r),t=!0},p(l,r){const s={};r&8&&(s.folderPath=l[3].name),r&1&&(s.comfyUrl=l[0]),r&4&&(s.toast=l[2]),e.$set(s)},i(l){t||(K(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){fe(e,l)}}}function xe(n){let e,t,l,r=n[17].name+"",s,o,a,u='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg>',d,y,S,P;function k(){return n[11](n[17])}function F(){return n[12](n[17])}return{c(){e=T("li"),t=T("div"),l=T("button"),s=x(r),o=J(),a=T("button"),a.innerHTML=u,y=J(),this.h()},l(O){e=D(O,"LI",{class:!0});var U=A(e);t=D(U,"DIV",{class:!0});var M=A(t);l=D(M,"BUTTON",{class:!0});var Y=A(l);s=ee(Y,r),Y.forEach(g),o=W(M),a=D(M,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(a)!=="svelte-16x7l7z"&&(a.innerHTML=u),M.forEach(g),y=W(U),U.forEach(g),this.h()},h(){b(l,"class","btn w-3/4 items-center justify-center text-left text-sm"),b(a,"class","btn w-1/4"),b(t,"class",d="w-full "+(n[17]==n[3]?"bg-success":"")+" flex items-center justify-between"),b(e,"class","w-full")},m(O,U){z(O,e,U),w(e,t),w(t,l),w(l,s),w(t,o),w(t,a),w(e,y),S||(P=[Z(l,"click",k),Z(a,"click",F)],S=!0)},p(O,U){n=O,U&2&&r!==(r=n[17].name+"")&&_e(s,r),U&10&&d!==(d="w-full "+(n[17]==n[3]?"bg-success":"")+" flex items-center justify-between")&&b(t,"class",d)},d(O){O&&g(e),S=!1,ye(P)}}}function Pt(n){let e,t,l,r,s,o,a,u,d,y,S,P,k="Add new source",F,O,U,M,Y,$,I,H,_,B=n[6]?"Adding...":"Add",h,R,N,j="<button>close</button>",C,le,E;const p=[jt,Nt],f=[];function i(m,V){return m[3]?0:1}s=i(n),o=f[s]=p[s](n);let c=me(n[1]),v=[];for(let m=0;m<c.length;m+=1)v[m]=xe(Xe(n,c,m));let L={};return U=new Oe({props:L}),n[13](U),{c(){e=T("div"),t=T("input"),l=J(),r=T("div"),o.c(),a=J(),u=T("div"),d=T("ul"),y=T("li"),S=T("div"),P=T("button"),P.textContent=k,F=J();for(let m=0;m<v.length;m+=1)v[m].c();O=J(),ae(U.$$.fragment),M=J(),Y=T("dialog"),$=T("div"),I=T("input"),H=J(),_=T("button"),h=x(B),R=J(),N=T("form"),N.innerHTML=j,this.h()},l(m){e=D(m,"DIV",{class:!0});var V=A(e);t=D(V,"INPUT",{type:!0,class:!0}),l=W(V),r=D(V,"DIV",{class:!0});var q=A(r);o.l(q),q.forEach(g),a=W(V),u=D(V,"DIV",{class:!0});var Q=A(u);d=D(Q,"UL",{class:!0});var G=A(d);y=D(G,"LI",{class:!0});var re=A(y);S=D(re,"DIV",{class:!0});var de=A(S);P=D(de,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(P)!=="svelte-1qcfi61"&&(P.textContent=k),de.forEach(g),re.forEach(g),F=W(G);for(let ie=0;ie<v.length;ie+=1)v[ie].l(G);G.forEach(g),Q.forEach(g),V.forEach(g),O=W(m),ce(U.$$.fragment,m),M=W(m),Y=D(m,"DIALOG",{class:!0});var he=A(Y);$=D(he,"DIV",{class:!0});var oe=A($);I=D(oe,"INPUT",{type:!0,placeholder:!0,class:!0}),H=W(oe),_=D(oe,"BUTTON",{class:!0});var te=A(_);h=ee(te,B),te.forEach(g),oe.forEach(g),R=W(he),N=D(he,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),ne(N)!=="svelte-povsts"&&(N.innerHTML=j),he.forEach(g),this.h()},h(){b(t,"type","checkbox"),b(t,"class","drawer-toggle"),b(r,"class","drawer-content flex flex-col pl-2"),b(P,"class","btn btn-outline btn-primary w-3/4 justify-center text-left"),b(S,"class","w-full flex items-center justify-between"),b(y,"class","w-full"),b(d,"class","menu bg-base-200 w-56 p-0 [&_li>*]:rounded-none"),b(u,"class","drawer-side border-r-2 border-slate-700 pr-2"),b(e,"class","drawer md:drawer-open"),b(I,"type","text"),b(I,"placeholder","Input Git remote address of the source"),b(I,"class","input input-bordered w-full max-w-sm"),b(_,"class","btn absolute mr-4 r-0"),_.disabled=n[6],b($,"class","modal-box"),b(N,"method","dialog"),b(N,"class","modal-backdrop"),b(Y,"class","modal")},m(m,V){z(m,e,V),w(e,t),w(e,l),w(e,r),f[s].m(r,null),w(e,a),w(e,u),w(u,d),w(d,y),w(y,S),w(S,P),w(d,F);for(let q=0;q<v.length;q+=1)v[q]&&v[q].m(d,null);z(m,O,V),ue(U,m,V),z(m,M,V),z(m,Y,V),w(Y,$),w($,I),pe(I,n[5]),w($,H),w($,_),w(_,h),w(Y,R),w(Y,N),n[15](Y),C=!0,le||(E=[Z(P,"click",n[9]),Z(I,"input",n[14]),Z(_,"click",n[10])],le=!0)},p(m,[V]){let q=s;if(s=i(m),s===q?f[s].p(m,V):(Ce(),X(f[q],1,1,()=>{f[q]=null}),Ee(),o=f[s],o?o.p(m,V):(o=f[s]=p[s](m),o.c()),K(o,1),o.m(r,null)),V&394){c=me(m[1]);let G;for(G=0;G<c.length;G+=1){const re=Xe(m,c,G);v[G]?v[G].p(re,V):(v[G]=xe(re),v[G].c(),v[G].m(d,null))}for(;G<v.length;G+=1)v[G].d(1);v.length=c.length}const Q={};U.$set(Q),V&32&&I.value!==m[5]&&pe(I,m[5]),(!C||V&64)&&B!==(B=m[6]?"Adding...":"Add")&&_e(h,B),(!C||V&64)&&(_.disabled=m[6])},i(m){C||(K(o),K(U.$$.fragment,m),C=!0)},o(m){X(o),X(U.$$.fragment,m),C=!1},d(m){m&&(g(e),g(O),g(M),g(Y)),f[s].d(),De(v,m),n[13](null),fe(U,m),n[15](null),le=!1,ye(E)}}}function Ht(n,e,t){let{comfyUrl:l}=e,r=[],s,o,a,u,d=!1;async function y(I=null){const _=await(await fetch(l+"/browser/sources")).json();t(1,r=_.sources),I&&(I=I.trim(),t(3,o=r.find(B=>B.url==I))),o||t(3,o=r[0])}Ie(async()=>{await y()});function S(I){t(3,o=I)}async function P(I){if(!confirm("You want to delete this source? "+I.name))return;const _=await fetch(l+`/browser/sources/${I.name}`,{method:"DELETE"});_.ok&&await y(),s.show(_.ok,"Deleted this source","Failed to delete this source. Please check the ComfyUI server.")}function k(){a.showModal()}async function F(){if(!u){s.show(!1,"","missing Git URL");return}t(6,d=!0);const I=await fetch(l+"/browser/sources",{method:"POST",body:JSON.stringify({repo_url:u})});t(6,d=!1),I.ok&&await y(u),s.show(I.ok,"Added a new source","Failed to add a new source. Please check the ComfyUI server."),a.close()}const O=I=>S(I),U=I=>P(I);function M(I){Te[I?"unshift":"push"](()=>{s=I,t(2,s)})}function Y(){u=this.value,t(5,u)}function $(I){Te[I?"unshift":"push"](()=>{a=I,t(4,a)})}return n.$$set=I=>{"comfyUrl"in I&&t(0,l=I.comfyUrl)},[l,r,s,o,a,u,d,S,P,k,F,O,U,M,Y,$]}class Vt extends ge{constructor(e){super(),we(this,e,Ht,Pt,ve,{comfyUrl:0})}}function Bt(n){let e,t;return e=new Vt({props:{comfyUrl:n[1]}}),{c(){ae(e.$$.fragment)},l(l){ce(e.$$.fragment,l)},m(l,r){ue(e,l,r),t=!0},p:se,i(l){t||(K(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){fe(e,l)}}}function At(n){let e,t;return e=new St({props:{comfyUrl:n[1]}}),{c(){ae(e.$$.fragment)},l(l){ce(e.$$.fragment,l)},m(l,r){ue(e,l,r),t=!0},p:se,i(l){t||(K(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){fe(e,l)}}}function Ft(n){let e,t;return e=new Lt({props:{comfyUrl:n[1]}}),{c(){ae(e.$$.fragment)},l(l){ce(e.$$.fragment,l)},m(l,r){ue(e,l,r),t=!0},p:se,i(l){t||(K(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){fe(e,l)}}}function Yt(n){let e,t,l,r,s,o,a;function u(k){n[3](k)}let d={};n[0]!==void 0&&(d.activeTab=n[0]),e=new ut({props:d}),Te.push(()=>it(e,"activeTab",u));const y=[Ft,At,Bt],S=[];function P(k,F){return k[0]==="collections"?0:k[0]==="outputs"?1:2}return r=P(n),s=S[r]=y[r](n),{c(){ae(e.$$.fragment),l=J(),s.c(),o=be()},l(k){ce(e.$$.fragment,k),l=W(k),s.l(k),o=be()},m(k,F){ue(e,k,F),z(k,l,F),S[r].m(k,F),z(k,o,F),a=!0},p(k,[F]){const O={};!t&&F&1&&(t=!0,O.activeTab=k[0],ot(()=>t=!1)),e.$set(O);let U=r;r=P(k),r===U?S[r].p(k,F):(Ce(),X(S[U],1,1,()=>{S[U]=null}),Ee(),s=S[r],s?s.p(k,F):(s=S[r]=y[r](k),s.c()),K(s,1),s.m(o.parentNode,o))},i(k){a||(K(e.$$.fragment,k),K(s),a=!0)},o(k){X(e.$$.fragment,k),X(s),a=!1},d(k){k&&(g(l),g(o)),fe(e,k),S[r].d(k)}}}function zt(n,e,t){let{data:l}=e;const{comfyUrl:r}=l;let s="outputs";function o(a){s=a,t(0,s)}return n.$$set=a=>{"data"in a&&t(2,l=a.data)},[s,r,l,o]}class Wt extends ge{constructor(e){super(),we(this,e,zt,Yt,ve,{data:2})}}export{Wt as component};
